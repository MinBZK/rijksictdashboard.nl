(function(n,t){typeof exports=="object"&&typeof module!="undefined"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):t(n.d3=n.d3||{})})(this,function(n){"use strict";function iu(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function cp(n){return n.length===1&&(n=obt(n)),{left:function(t,i,r,u){for(r==null&&(r=0),u==null&&(u=t.length);r<u;){var f=r+u>>>1;n(t[f],i)<0?r=f+1:u=f}return r},right:function(t,i,r,u){for(r==null&&(r=0),u==null&&(u=t.length);r<u;){var f=r+u>>>1;n(t[f],i)>0?u=f:r=f+1}return r}}}function obt(n){return function(t,i){return iu(n(t),i)}}function hbt(n,t){t==null&&(t=nit);for(var i=0,r=n.length-1,u=n[0],f=new Array(r<0?0:r);i<r;)f[i]=t(u,u=n[++i]);return f}function nit(n,t){return[n,t]}function cbt(n,t,i){var e=n.length,o=t.length,s=new Array(e*o),r,u,f,h;for(i==null&&(i=nit),r=f=0;r<e;++r)for(h=n[r],u=0;u<o;++u,++f)s[f]=i(h,t[u]);return s}function lbt(n,t){return t<n?-1:t>n?1:t>=n?0:NaN}function sr(n){return n===null?NaN:+n}function tit(n,t){var s=n.length,e=0,f=-1,i=0,r,u,o=0;if(t==null)while(++f<s)isNaN(r=sr(n[f]))||(u=r-i,i+=u/++e,o+=u*(r-i));else while(++f<s)isNaN(r=sr(t(n[f],f,n)))||(u=r-i,i+=u/++e,o+=u*(r-i));if(e>1)return o/(e-1)}function iit(n,t){var i=tit(n,t);return i?Math.sqrt(i):i}function lp(n,t){var e=n.length,r=-1,i,u,f;if(t==null){while(++r<e)if((i=n[r])!=null&&i>=i)for(u=f=i;++r<e;)(i=n[r])!=null&&(u>i&&(u=i),f<i&&(f=i))}else while(++r<e)if((i=t(n[r],r,n))!=null&&i>=i)for(u=f=i;++r<e;)(i=t(n[r],r,n))!=null&&(u>i&&(u=i),f<i&&(f=i));return[u,f]}function nc(n){return function(){return n}}function ybt(n){return n}function pt(n,t,i){n=+n;t=+t;i=(r=arguments.length)<2?(t=n,n=0,1):r<3?1:+i;for(var u=-1,r=Math.max(0,Math.ceil((t-n)/i))|0,f=new Array(r);++u<r;)f[u]=n+u*i;return f}function pp(n,t,i){var o,u=-1,f,e,r;if(t=+t,n=+n,i=+i,n===t&&i>0)return[n];if((o=t<n)&&(f=n,n=t,t=f),(r=de(n,t,i))===0||!isFinite(r))return[];if(r>0)for(n=Math.ceil(n/r),t=Math.floor(t/r),e=new Array(f=Math.ceil(t-n+1));++u<f;)e[u]=(n+u)*r;else for(n=Math.floor(n*r),t=Math.ceil(t*r),e=new Array(f=Math.ceil(n-t+1));++u<f;)e[u]=(n-u)/r;return o&&e.reverse(),e}function de(n,t,i){var f=(t-n)/Math.max(0,i),u=Math.floor(Math.log(f)/Math.LN10),r=f/Math.pow(10,u);return u>=0?(r>=ap?10:r>=vp?5:r>=yp?2:1)*Math.pow(10,u):-Math.pow(10,-u)/(r>=ap?10:r>=vp?5:r>=yp?2:1)}function uu(n,t,i){var f=Math.abs(t-n)/Math.max(0,i),r=Math.pow(10,Math.floor(Math.log(f)/Math.LN10)),u=f/r;return u>=ap?r*=10:u>=vp?r*=5:u>=yp&&(r*=2),t<n?-r:r}function wp(n){return Math.ceil(Math.log(n.length)/Math.LN2)+1}function pbt(){function n(n){for(var a=n.length,h,c=new Array(a),e,l,v,u=0;u<a;++u)c[u]=t(n[u],u,n);var y=i(c),o=y[0],s=y[1],f=r(c,o,s);for(Array.isArray(f)||(f=uu(o,s,f),f=pt(Math.ceil(o/f)*f,Math.floor(s/f)*f,f)),e=f.length;f[0]<=o;)f.shift(),--e;while(f[e-1]>s)f.pop(),--e;for(l=new Array(e+1),u=0;u<=e;++u)v=l[u]=[],v.x0=u>0?f[u-1]:o,v.x1=u<e?f[u]:s;for(u=0;u<a;++u)h=c[u],o<=h&&h<=s&&l[ru(f,h,0,e)].push(n[u]);return l}var t=ybt,i=lp,r=wp;return n.value=function(i){return arguments.length?(t=typeof i=="function"?i:nc(i),n):t},n.domain=function(t){return arguments.length?(i=typeof t=="function"?t:nc([t[0],t[1]]),n):i},n.thresholds=function(t){return arguments.length?(r=typeof t=="function"?t:Array.isArray(t)?nc(abt.call(t)):nc(t),n):r},n}function ge(n,t,i){if(i==null&&(i=sr),r=n.length){if((t=+t)<=0||r<2)return+i(n[0],0,n);if(t>=1)return+i(n[r-1],r-1,n);var r,f=(r-1)*t,u=Math.floor(f),e=+i(n[u],u,n),o=+i(n[u+1],u+1,n);return e+(o-e)*(f-u)}}function wbt(n,t,i){return n=vbt.call(n,sr).sort(iu),Math.ceil((i-t)/(2*(ge(n,.75)-ge(n,.25))*Math.pow(n.length,-1/3)))}function bbt(n,t,i){return Math.ceil((i-t)/(3.5*iit(n)*Math.pow(n.length,-1/3)))}function uit(n,t){var f=n.length,r=-1,i,u;if(t==null){while(++r<f)if((i=n[r])!=null&&i>=i)for(u=i;++r<f;)(i=n[r])!=null&&i>u&&(u=i)}else while(++r<f)if((i=t(n[r],r,n))!=null&&i>=i)for(u=i;++r<f;)(i=t(n[r],r,n))!=null&&i>u&&(u=i);return u}function kbt(n,t){var f=n.length,r=f,i=-1,u,e=0;if(t==null)while(++i<f)isNaN(u=sr(n[i]))?--r:e+=u;else while(++i<f)isNaN(u=sr(t(n[i],i,n)))?--r:e+=u;if(r)return e/r}function dbt(n,t){var f=n.length,i=-1,r,u=[];if(t==null)while(++i<f)isNaN(r=sr(n[i]))||u.push(r);else while(++i<f)isNaN(r=sr(t(n[i],i,n)))||u.push(r);return ge(u.sort(iu),.5)}function bp(n){for(var t=n.length,i,e=-1,r=0,u,f;++e<t;)r+=n[e].length;for(u=new Array(r);--t>=0;)for(f=n[t],i=f.length;--i>=0;)u[--r]=f[i];return u}function fit(n,t){var f=n.length,r=-1,i,u;if(t==null){while(++r<f)if((i=n[r])!=null&&i>=i)for(u=i;++r<f;)(i=n[r])!=null&&u>i&&(u=i)}else while(++r<f)if((i=t(n[r],r,n))!=null&&i>=i)for(u=i;++r<f;)(i=t(n[r],r,n))!=null&&u>i&&(u=i);return u}function gbt(n,t){for(var i=t.length,r=new Array(i);i--;)r[i]=n[t[i]];return r}function nkt(n,t){if(f=n.length){var f,r=0,u=0,e,i=n[u];for(t==null&&(t=iu);++r<f;)(t(e=n[r],i)<0||t(i,i)!==0)&&(i=e,u=r);if(t(i,i)===0)return u}}function tkt(n,t,i){for(var r=(i==null?n.length:i)-(t=t==null?0:+t),f,u;r;)u=Math.random()*r--|0,f=n[r+t],n[r+t]=n[u+t],n[u+t]=f;return n}function ikt(n,t){var f=n.length,i=-1,r,u=0;if(t==null)while(++i<f)(r=+n[i])&&(u+=r);else while(++i<f)(r=+t(n[i],i,n))&&(u+=r);return u}function eit(n){var t,r,e;if(!(r=n.length))return[];for(var i=-1,u=fit(n,rkt),f=new Array(u);++i<u;)for(t=-1,e=f[i]=new Array(r);++t<r;)e[t]=n[t][i];return f}function rkt(n){return n.length}function ukt(){return eit(arguments)}function fkt(n){return n}function ekt(n){return"translate("+(n+.5)+",0)"}function okt(n){return"translate(0,"+(n+.5)+")"}function skt(n){return function(t){return+n(t)}}function hkt(n){var t=Math.max(0,n.bandwidth()-1)/2;return n.round()&&(t=Math.round(t)),function(i){return+n(i)+t}}function ckt(){return!this.__axis}function rc(n,t){function i(i){var rt=o==null?t.ticks?t.ticks.apply(t,e):t.domain():o,ut=s==null?t.tickFormat?t.tickFormat.apply(t,e):fkt:s,nt=Math.max(u,0)+c,d=t.range(),tt=+d[0]+.5,it=+d[d.length-1]+.5,b=(t.bandwidth?hkt:skt)(t.copy()),y=i.selection?i.selection():i,v=y.selectAll(".domain").data([null]),a=y.selectAll(".tick").data(rt,t).order(),g=a.exit(),k=a.enter().append("g").attr("class","tick"),p=a.select("line"),w=a.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000"));a=a.merge(k);p=p.merge(k.append("line").attr("stroke","#000").attr(h+"2",r*u));w=w.merge(k.append("text").attr("fill","#000").attr(h,r*nt).attr("dy",n===tc?"0em":n===dp?"0.71em":"0.32em"));i!==y&&(v=v.transition(i),a=a.transition(i),p=p.transition(i),w=w.transition(i),g=g.transition(i).attr("opacity",oit).attr("transform",function(n){return isFinite(n=b(n))?l(n):this.getAttribute("transform")}),k.attr("opacity",oit).attr("transform",function(n){var t=this.parentNode.__axis;return l(t&&isFinite(t=t(n))?t:b(n))}));g.remove();v.attr("d",n===no||n==ic?"M"+r*f+","+tt+"H0.5V"+it+"H"+r*f:"M"+tt+","+r*f+"V0.5H"+it+"V"+r*f);a.attr("opacity",1).attr("transform",function(n){return l(b(n))});p.attr(h+"2",r*u);w.attr(h,r*nt).text(ut);y.filter(ckt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",n===ic?"start":n===no?"end":"middle");y.each(function(){this.__axis=b})}var e=[],o=null,s=null,u=6,f=6,c=3,r=n===tc||n===no?-1:1,h=n===no||n===ic?"x":"y",l=n===tc||n===dp?ekt:okt;return i.scale=function(n){return arguments.length?(t=n,i):t},i.ticks=function(){return e=kp.call(arguments),i},i.tickArguments=function(n){return arguments.length?(e=n==null?[]:kp.call(n),i):e.slice()},i.tickValues=function(n){return arguments.length?(o=n==null?null:kp.call(n),i):o&&o.slice()},i.tickFormat=function(n){return arguments.length?(s=n,i):s},i.tickSize=function(n){return arguments.length?(u=f=+n,i):u},i.tickSizeInner=function(n){return arguments.length?(u=+n,i):u},i.tickSizeOuter=function(n){return arguments.length?(f=+n,i):f},i.tickPadding=function(n){return arguments.length?(c=+n,i):c},i}function lkt(n){return rc(tc,n)}function akt(n){return rc(ic,n)}function vkt(n){return rc(dp,n)}function ykt(n){return rc(no,n)}function fu(){for(var t=0,r=arguments.length,i={},n;t<r;++t){if(!(n=arguments[t]+"")||n in i)throw new Error("illegal type: "+n);i[n]=[]}return new uc(i)}function uc(n){this._=n}function wkt(n,t){return n.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}function bkt(n,t){for(var i=0,u=n.length,r;i<u;++i)if((r=n[i]).name===t)return r.value}function sit(n,t,i){for(var r=0,u=n.length;r<u;++r)if(n[r].name===t){n[r]=pkt;n=n.slice(0,r).concat(n.slice(r+1));break}return i!=null&&n.push({name:t,value:i}),n}function to(n){var t=n+="",i=t.indexOf(":");return i>=0&&(t=n.slice(0,i))!=="xmlns"&&(n=n.slice(i+1)),ec.hasOwnProperty(t)?{space:ec[t],local:n}:n}function kkt(n){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===fc&&t.documentElement.namespaceURI===fc?t.createElement(n):t.createElementNS(i,n)}}function dkt(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function oc(n){var t=to(n);return(t.local?dkt:kkt)(t)}function gkt(){}function sc(n){return n==null?gkt:function(){return this.querySelector(n)}}function ndt(n){typeof n!="function"&&(n=sc(n));for(var e=this._groups,o=e.length,s=new Array(o),r=0;r<o;++r)for(var u=e[r],h=u.length,c=s[r]=new Array(h),t,f,i=0;i<h;++i)(t=u[i])&&(f=n.call(t,t.__data__,i,u))&&("__data__"in t&&(f.__data__=t.__data__),c[i]=f);return new ot(s,this._parents)}function tdt(){return[]}function gp(n){return n==null?tdt:function(){return this.querySelectorAll(n)}}function idt(n){typeof n!="function"&&(n=gp(n));for(var f=this._groups,s=f.length,e=[],o=[],r=0;r<s;++r)for(var u=f[r],h=u.length,t,i=0;i<h;++i)(t=u[i])&&(e.push(n.call(t,t.__data__,i,u)),o.push(t));return new ot(e,o)}function rdt(n){typeof n!="function"&&(n=hc(n));for(var f=this._groups,e=f.length,o=new Array(e),t=0;t<e;++t)for(var u=f[t],s=u.length,h=o[t]=[],i,r=0;r<s;++r)(i=u[r])&&n.call(i,i.__data__,r,u)&&h.push(i);return new ot(o,this._parents)}function cit(n){return new Array(n.length)}function udt(){return new ot(this._enter||this._groups.map(cit),this._parents)}function cc(n,t){this.ownerDocument=n.ownerDocument;this.namespaceURI=n.namespaceURI;this._next=null;this._parent=n;this.__data__=t}function fdt(n){return function(){return n}}function edt(n,t,i,r,u,f){for(var e=0,o,s=t.length,h=f.length;e<h;++e)(o=t[e])?(o.__data__=f[e],r[e]=o):i[e]=new cc(n,f[e]);for(;e<s;++e)(o=t[e])&&(u[e]=o)}function odt(n,t,i,r,u,f,e){for(var s,c={},l=t.length,v=f.length,a=new Array(l),h,o=0;o<l;++o)(s=t[o])&&(a[o]=h=tw+e.call(s,s.__data__,o,t),h in c?u[o]=s:c[h]=s);for(o=0;o<v;++o)h=tw+e.call(n,f[o],o,f),(s=c[h])?(r[o]=s,s.__data__=f[o],c[h]=null):i[o]=new cc(n,f[o]);for(o=0;o<l;++o)(s=t[o])&&c[a[o]]===s&&(u[o]=s)}function sdt(n,t){var u,e,b,k;if(!n)return f=new Array(this.size()),i=-1,this.each(function(n){f[++i]=n}),f;var d=t?odt:edt,c=this._parents,l=this._groups;typeof n!="function"&&(n=fdt(n));for(var o=l.length,r=new Array(o),a=new Array(o),v=new Array(o),i=0;i<o;++i){var s=c[i],y=l[i],g=y.length,f=n.call(s,s&&s.__data__,i,c),h=f.length,p=a[i]=new Array(h),w=r[i]=new Array(h),nt=v[i]=new Array(g);for(d(s,y,p,w,nt,f,t),u=0,e=0;u<h;++u)if(b=p[u]){for(u>=e&&(e=u+1);!(k=w[e])&&++e<h;);b._next=k||null}}return r=new ot(r,c),r._enter=a,r._exit=v,r}function hdt(){return new ot(this._exit||this._groups.map(cit),this._parents)}function cdt(n){for(var r=this._groups,e=n._groups,u=r.length,c=e.length,l=Math.min(u,c),f=new Array(u),t=0;t<l;++t)for(var o=r[t],a=e[t],s=o.length,v=f[t]=new Array(s),h,i=0;i<s;++i)(h=o[i]||a[i])&&(v[i]=h);for(;t<u;++t)f[t]=r[t];return new ot(f,this._parents)}function ldt(){for(var u=this._groups,f=-1,e=u.length;++f<e;)for(var i=u[f],r=i.length-1,n=i[r],t;--r>=0;)(t=i[r])&&(n&&n!==t.nextSibling&&n.parentNode.insertBefore(t,n),n=t);return this}function adt(n){function c(t,i){return t&&i?n(t.__data__,i.__data__):!t-!i}n||(n=vdt);for(var r=this._groups,u=r.length,f=new Array(u),t=0;t<u;++t){for(var e=r[t],o=e.length,s=f[t]=new Array(o),h,i=0;i<o;++i)(h=e[i])&&(s[i]=h);s.sort(c)}return new ot(f,this._parents).order()}function vdt(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function ydt(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function pdt(){var n=new Array(this.size()),t=-1;return this.each(function(){n[++t]=this}),n}function wdt(){for(var i,r=this._groups,n=0,f=r.length;n<f;++n)for(var u=r[n],t=0,e=u.length;t<e;++t)if(i=u[t],i)return i;return null}function bdt(){var n=0;return this.each(function(){++n}),n}function kdt(){return!this.node()}function ddt(n){for(var f=this._groups,i=0,e=f.length;i<e;++i)for(var r=f[i],t=0,o=r.length,u;t<o;++t)(u=r[t])&&n.call(u,u.__data__,t,r);return this}function gdt(n){return function(){this.removeAttribute(n)}}function ngt(n){return function(){this.removeAttributeNS(n.space,n.local)}}function tgt(n,t){return function(){this.setAttribute(n,t)}}function igt(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function rgt(n,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(n):this.setAttribute(n,i)}}function ugt(n,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,i)}}function fgt(n,t){var i=to(n),r;return arguments.length<2?(r=this.node(),i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)):this.each((t==null?i.local?ngt:gdt:typeof t=="function"?i.local?ugt:rgt:i.local?igt:tgt)(i,t))}function iw(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function egt(n){return function(){this.style.removeProperty(n)}}function ogt(n,t,i){return function(){this.style.setProperty(n,t,i)}}function sgt(n,t,i){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,i)}}function hgt(n,t,i){return arguments.length>1?this.each((t==null?egt:typeof t=="function"?sgt:ogt)(n,t,i==null?"":i)):eu(this.node(),n)}function eu(n,t){return n.style.getPropertyValue(t)||iw(n).getComputedStyle(n,null).getPropertyValue(t)}function cgt(n){return function(){delete this[n]}}function lgt(n,t){return function(){this[n]=t}}function agt(n,t){return function(){var i=t.apply(this,arguments);i==null?delete this[n]:this[n]=i}}function vgt(n,t){return arguments.length>1?this.each((t==null?cgt:typeof t=="function"?agt:lgt)(n,t)):this.node()[n]}function lit(n){return n.trim().split(/^|\s+/)}function rw(n){return n.classList||new ait(n)}function ait(n){this._node=n;this._names=lit(n.getAttribute("class")||"")}function vit(n,t){for(var r=rw(n),i=-1,u=t.length;++i<u;)r.add(t[i])}function yit(n,t){for(var r=rw(n),i=-1,u=t.length;++i<u;)r.remove(t[i])}function ygt(n){return function(){vit(this,n)}}function pgt(n){return function(){yit(this,n)}}function wgt(n,t){return function(){(t.apply(this,arguments)?vit:yit)(this,n)}}function bgt(n,t){var i=lit(n+"");if(arguments.length<2){for(var u=rw(this.node()),r=-1,f=i.length;++r<f;)if(!u.contains(i[r]))return!1;return!0}return this.each((typeof t=="function"?wgt:t?ygt:pgt)(i,t))}function kgt(){this.textContent=""}function dgt(n){return function(){this.textContent=n}}function ggt(n){return function(){var t=n.apply(this,arguments);this.textContent=t==null?"":t}}function nnt(n){return arguments.length?this.each(n==null?kgt:(typeof n=="function"?ggt:dgt)(n)):this.node().textContent}function tnt(){this.innerHTML=""}function int(n){return function(){this.innerHTML=n}}function rnt(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t==null?"":t}}function unt(n){return arguments.length?this.each(n==null?tnt:(typeof n=="function"?rnt:int)(n)):this.node().innerHTML}function fnt(){this.nextSibling&&this.parentNode.appendChild(this)}function ent(){return this.each(fnt)}function ont(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function snt(){return this.each(ont)}function hnt(n){var t=typeof n=="function"?n:oc(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function cnt(){return null}function lnt(n,t){var i=typeof n=="function"?n:oc(n),r=t==null?cnt:typeof t=="function"?t:sc(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)})}function ant(){var n=this.parentNode;n&&n.removeChild(this)}function vnt(){return this.each(ant)}function ynt(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function pnt(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function wnt(n){return this.select(n?pnt:ynt)}function bnt(n){return arguments.length?this.property("__data__",n):this.node().__data__}function knt(n,t,i){return n=wit(n,t,i),function(t){var i=t.relatedTarget;i&&(i===this||i.compareDocumentPosition(this)&8)||n.call(this,t)}}function wit(t,i,r){return function(u){var f=n.event;n.event=u;try{t.call(this,this.__data__,i,r)}finally{n.event=f}}}function dnt(n){return n.trim().split(/^|\s+/).map(function(n){var i="",t=n.indexOf(".");return t>=0&&(i=n.slice(t+1),n=n.slice(0,t)),{type:n,name:i}})}function gnt(n){return function(){var i=this.__on;if(i){for(var r=0,u=-1,f=i.length,t;r<f;++r)(t=i[r],n.type&&t.type!==n.type||t.name!==n.name)?i[++u]=t:this.removeEventListener(t.type,t.listener,t.capture);++u?i.length=u:delete this.__on}}}function nti(n,t,i){var r=uw.hasOwnProperty(n.type)?knt:wit;return function(u,f,e){var s=this.__on,o,c=r(t,f,e),h,l;if(s)for(h=0,l=s.length;h<l;++h)if((o=s[h]).type===n.type&&o.name===n.name){this.removeEventListener(o.type,o.listener,o.capture);this.addEventListener(o.type,o.listener=c,o.capture=i);o.value=t;return}this.addEventListener(n.type,c,i);o={type:n.type,name:n.name,value:t,listener:c,capture:i};s?s.push(o):this.__on=[o]}}function tti(n,t,i){var o=dnt(n+""),r,s=o.length,h,u,f,c,e;if(arguments.length<2){if(u=this.node().__on,u)for(f=0,c=u.length;f<c;++f)for(r=0,e=u[f];r<s;++r)if((h=o[r]).type===e.type&&h.name===e.name)return e.value;return}for(u=t?nti:gnt,i==null&&(i=!1),r=0;r<s;++r)this.each(u(o[r],t,i));return this}function io(t,i,r,u){var f=n.event;t.sourceEvent=n.event;n.event=t;try{return i.apply(r,u)}finally{n.event=f}}function bit(n,t,i){var u=iw(n),r=u.CustomEvent;typeof r=="function"?r=new r(t,i):(r=u.document.createEvent("Event"),i?(r.initEvent(t,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(t,!1,!1));n.dispatchEvent(r)}function iti(n,t){return function(){return bit(this,n,t)}}function rti(n,t){return function(){return bit(this,n,t.apply(this,arguments))}}function uti(n,t){return this.each((typeof t=="function"?rti:iti)(n,t))}function ot(n,t){this._groups=n;this._parents=t}function ou(){return new ot([[document.documentElement]],lc)}function vt(n){return typeof n=="string"?new ot([[document.querySelector(n)]],[document.documentElement]):new ot([[n]],lc)}function fti(n){return vt(oc(n).call(document.documentElement))}function dit(){return new fw}function fw(){this._="@"+(++kit).toString(36)}function ew(){for(var t=n.event,i;i=t.sourceEvent;)t=i;return t}function ac(n,t){var u=n.ownerSVGElement||n,i,r;return u.createSVGPoint?(i=u.createSVGPoint(),i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]):(r=n.getBoundingClientRect(),[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop])}function hr(n){var t=ew();return t.changedTouches&&(t=t.changedTouches[0]),ac(n,t)}function eti(n){return typeof n=="string"?new ot([document.querySelectorAll(n)],[document.documentElement]):new ot([n==null?[]:n],lc)}function vc(n,t,i){arguments.length<3&&(i=t,t=ew().changedTouches);for(var r=0,f=t?t.length:0,u;r<f;++r)if((u=t[r]).identifier===i)return ac(n,u);return null}function oti(n,t){t==null&&(t=ew().touches);for(var i=0,r=t?t.length:0,u=new Array(r);i<r;++i)u[i]=ac(n,t[i]);return u}function ow(){n.event.stopImmediatePropagation()}function ef(){n.event.preventDefault();n.event.stopImmediatePropagation()}function yc(n){var t=n.document.documentElement,i=vt(n).on("dragstart.drag",ef,!0);if("onselectstart"in t)i.on("selectstart.drag",ef,!0);else t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none"}function pc(n,t){var i=n.document.documentElement,r=vt(n).on("dragstart.drag",null);if(t){r.on("click.drag",ef,!0);setTimeout(function(){r.on("click.drag",null)},0)}if("onselectstart"in i)r.on("selectstart.drag",null);else i.style.MozUserSelect=i.__noselect,delete i.__noselect}function wc(n){return function(){return n}}function sw(n,t,i,r,u,f,e,o,s,h){this.target=n;this.type=t;this.subject=i;this.identifier=r;this.active=u;this.x=f;this.y=e;this.dx=o;this.dy=s;this._=h}function sti(){return!n.event.button}function hti(){return this.parentNode}function cti(t){return t==null?{x:n.event.x,y:n.event.y}:t}function lti(){return"ontouchstart"in this}function ati(){function t(n){n.on("mousedown.drag",p).filter(c).on("touchstart.drag",k).on("touchmove.drag",d).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!r&&u.apply(this,arguments)){var t=y("mouse",f.apply(this,arguments),hr,this,arguments);if(t){vt(n.event.view).on("mousemove.drag",w,!0).on("mouseup.drag",b,!0);yc(n.event.view);ow();s=!1;a=n.event.clientX;v=n.event.clientY;t("start")}}}function w(){if(ef(),!s){var t=n.event.clientX-a,r=n.event.clientY-v;s=t*t+r*r>l}i.mouse("drag")}function b(){vt(n.event.view).on("mousemove.drag mouseup.drag",null);pc(n.event.view,s);ef();i.mouse("end")}function k(){if(u.apply(this,arguments))for(var i=n.event.changedTouches,e=f.apply(this,arguments),o=i.length,r,t=0;t<o;++t)(r=y(i[t].identifier,e,vc,this,arguments))&&(ow(),r("start"))}function d(){for(var r=n.event.changedTouches,f=r.length,u,t=0;t<f;++t)(u=i[r[t].identifier])&&(ef(),u("drag"))}function g(){var u=n.event.changedTouches,e=u.length,t,f;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<e;++t)(f=i[u[t].identifier])&&(ow(),f("end"))}function y(r,u,f,s,c){var l=f(u,r),a,y,p,v=e.copy();if(io(new sw(t,"beforestart",a,r,o,l[0],l[1],0,0,v),function(){return(n.event.subject=a=h.apply(s,c))==null?!1:(y=a.x-l[0]||0,p=a.y-l[1]||0,!0)}))return function w(n){var h=l,e;switch(n){case"start":i[r]=w;e=o++;break;case"end":delete i[r];--o;case"drag":l=f(u,r);e=o}io(new sw(t,n,a,r,e,l[0]+y,l[1]+p,l[0]-h[0],l[1]-h[1],v),v.apply,v,[n,s,c])}}var u=sti,f=hti,h=cti,c=lti,i={},e=fu("start","drag","end"),o=0,a,v,s,r,l=0;return t.filter=function(n){return arguments.length?(u=typeof n=="function"?n:wc(!!n),t):u},t.container=function(n){return arguments.length?(f=typeof n=="function"?n:wc(n),t):f},t.subject=function(n){return arguments.length?(h=typeof n=="function"?n:wc(n),t):h},t.touchable=function(n){return arguments.length?(c=typeof n=="function"?n:wc(!!n),t):c},t.on=function(){var n=e.on.apply(e,arguments);return n===e?t:n},t.clickDistance=function(n){return arguments.length?(l=(n=+n)*n,t):Math.sqrt(l)},t}function sf(n,t,i){n.prototype=t.prototype=i;i.constructor=n}function ro(n,t){var i=Object.create(n.prototype);for(var r in t)i[r]=t[r];return i}function cr(){}function lr(n){var t;return n=(n+"").trim().toLowerCase(),(t=vti.exec(n))?(t=parseInt(t[1],16),new tt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1)):(t=yti.exec(n))?nrt(parseInt(t[1],16)):(t=pti.exec(n))?new tt(t[1],t[2],t[3],1):(t=wti.exec(n))?new tt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bti.exec(n))?trt(t[1],t[2],t[3],t[4]):(t=kti.exec(n))?trt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dti.exec(n))?irt(t[1],t[2]/100,t[3]/100,1):(t=gti.exec(n))?irt(t[1],t[2]/100,t[3]/100,t[4]):git.hasOwnProperty(n)?nrt(git[n]):n==="transparent"?new tt(NaN,NaN,NaN,0):null}function nrt(n){return new tt(n>>16&255,n>>8&255,n&255,1)}function trt(n,t,i,r){return r<=0&&(n=t=i=NaN),new tt(n,t,i,r)}function hw(n){return(n instanceof cr||(n=lr(n)),!n)?new tt:(n=n.rgb(),new tt(n.r,n.g,n.b,n.opacity))}function lf(n,t,i,r){return arguments.length===1?hw(n):new tt(n,t,i,r==null?1:r)}function tt(n,t,i,r){this.r=+n;this.g=+t;this.b=+i;this.opacity=+r}function cw(n){return n=Math.max(0,Math.min(255,Math.round(n)||0)),(n<16?"0":"")+n.toString(16)}function irt(n,t,i,r){return r<=0?n=t=i=NaN:i<=0||i>=1?n=t=NaN:t<=0&&(n=NaN),new li(n,t,i,r)}function nii(n){if(n instanceof li)return new li(n.h,n.s,n.l,n.opacity);if(n instanceof cr||(n=lr(n)),!n)return new li;if(n instanceof li)return n;n=n.rgb();var u=n.r/255,i=n.g/255,f=n.b/255,e=Math.min(u,i,f),r=Math.max(u,i,f),o=NaN,t=r-e,s=(r+e)/2;return t?(o=u===r?(i-f)/t+(i<f)*6:i===r?(f-u)/t+2:(u-i)/t+4,t/=s<.5?r+e:2-r-e,o*=60):t=s>0&&s<1?0:o,new li(o,t,s,n.opacity)}function bc(n,t,i,r){return arguments.length===1?nii(n):new li(n,t,i,r==null?1:r)}function li(n,t,i,r){this.h=+n;this.s=+t;this.l=+i;this.opacity=+r}function lw(n,t,i){return(n<60?t+(i-t)*n/60:n<180?i:n<240?t+(i-t)*(240-n)/60:t)*255}function aw(n){var f;if(n instanceof ei)return new ei(n.l,n.a,n.b,n.opacity);if(n instanceof ai)return isNaN(n.h)?new ei(n.l,0,0,n.opacity):(f=n.h*rrt,new ei(n.l,Math.cos(f)*n.c,Math.sin(f)*n.c,n.opacity));n instanceof tt||(n=hw(n));var i=ww(n.r),t=ww(n.g),r=ww(n.b),u=vw((.2225045*i+.7168786*t+.0606169*r)/ert),e,o;return i===t&&t===r?e=o=u:(e=vw((.4360747*i+.3850649*t+.1430804*r)/frt),o=vw((.0139322*i+.0971045*t+.7141733*r)/ort)),new ei(116*u-16,500*(e-u),200*(u-o),n.opacity)}function iii(n,t){return new ei(n,0,0,t==null?1:t)}function dc(n,t,i,r){return arguments.length===1?aw(n):new ei(n,t,i,r==null?1:r)}function ei(n,t,i,r){this.l=+n;this.a=+t;this.b=+i;this.opacity=+r}function vw(n){return n>tii?Math.pow(n,1/3):n/hrt+srt}function yw(n){return n>af?n*n*n:hrt*(n-srt)}function pw(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function ww(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function crt(n){if(n instanceof ai)return new ai(n.h,n.c,n.l,n.opacity);if(n instanceof ei||(n=aw(n)),n.a===0&&n.b===0)return new ai(NaN,0,n.l,n.opacity);var t=Math.atan2(n.b,n.a)*urt;return new ai(t<0?t+360:t,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function rii(n,t,i,r){return arguments.length===1?crt(n):new ai(i,t,n,r==null?1:r)}function gc(n,t,i,r){return arguments.length===1?crt(n):new ai(n,t,i,r==null?1:r)}function ai(n,t,i,r){this.h=+n;this.c=+t;this.l=+i;this.opacity=+r}function uii(n){if(n instanceof hu)return new hu(n.h,n.s,n.l,n.opacity);n instanceof tt||(n=hw(n));var s=n.r/255,f=n.g/255,e=n.b/255,t=(yrt*e+art*s-vrt*f)/(yrt+art-vrt),i=e-t,r=(fo*(f-t)-kw*i)/nl,o=Math.sqrt(r*r+i*i)/(fo*t*(1-t)),u=o?Math.atan2(r,i)*urt-120:NaN;return new hu(u<0?u+360:u,o,t,n.opacity)}function oi(n,t,i,r){return arguments.length===1?uii(n):new hu(n,t,i,r==null?1:r)}function hu(n,t,i,r){this.h=+n;this.s=+t;this.l=+i;this.opacity=+r}function prt(n,t,i,r,u){var f=n*n,e=f*n;return((1-3*n+3*f-e)*t+(4-6*f+3*e)*i+(1+3*n+3*f-3*e)*r+e*u)/6}function wrt(n){var t=n.length-1;return function(i){var r=i<=0?i=0:i>=1?(i=1,t-1):Math.floor(i*t),u=n[r],f=n[r+1],e=r>0?n[r-1]:2*u-f,o=r<t-1?n[r+2]:2*f-u;return prt((i-r/t)*t,e,u,f,o)}}function brt(n){var t=n.length;return function(i){var r=Math.floor(((i%=1)<0?++i:i)*t),u=n[(r+t-1)%t],f=n[r%t],e=n[(r+1)%t],o=n[(r+2)%t];return prt((i-r/t)*t,u,f,e,o)}}function tl(n){return function(){return n}}function krt(n,t){return function(i){return n+i*t}}function fii(n,t,i){return n=Math.pow(n,i),t=Math.pow(t,i)-n,i=1/i,function(r){return Math.pow(n+r*t,i)}}function dw(n,t){var i=t-n;return i?krt(n,i>180||i<-180?i-360*Math.round(i/360):i):tl(isNaN(n)?t:n)}function eii(n){return(n=+n)==1?nt:function(t,i){return i-t?fii(t,i,n):tl(isNaN(t)?i:t)}}function nt(n,t){var i=t-n;return i?krt(n,i):tl(isNaN(n)?t:n)}function drt(n){return function(t){for(var u=t.length,f=new Array(u),e=new Array(u),o=new Array(u),i,r=0;r<u;++r)i=lf(t[r]),f[r]=i.r||0,e[r]=i.g||0,o[r]=i.b||0;return f=n(f),e=n(e),o=n(o),i.opacity=1,function(n){return i.r=f(n),i.g=e(n),i.b=o(n),i+""}}}function nut(n,t){for(var r=t?t.length:0,u=n?Math.min(r,n.length):0,e=new Array(u),f=new Array(r),i=0;i<u;++i)e[i]=eo(n[i],t[i]);for(;i<r;++i)f[i]=t[i];return function(n){for(i=0;i<u;++i)f[i]=e[i](n);return f}}function tut(n,t){var i=new Date;return n=+n,t-=n,function(r){return i.setTime(n+t*r),i}}function wt(n,t){return n=+n,t-=n,function(i){return n+t*i}}function iut(n,t){var r={},u={},i;(n===null||typeof n!="object")&&(n={});(t===null||typeof t!="object")&&(t={});for(i in t)i in n?r[i]=eo(n[i],t[i]):u[i]=t[i];return function(n){for(i in r)u[i]=r[i](n);return u}}function sii(n){return function(){return n}}function hii(n){return function(t){return n(t)+""}}function nb(n,t){var e=il.lastIndex=rl.lastIndex=0,s,f,u,r=-1,i=[],o=[];for(n=n+"",t=t+"";(s=il.exec(n))&&(f=rl.exec(t));)(u=f.index)>e&&(u=t.slice(e,u),i[r]?i[r]+=u:i[++r]=u),(s=s[0])===(f=f[0])?i[r]?i[r]+=f:i[++r]=f:(i[++r]=null,o.push({i:r,x:wt(s,f)})),e=rl.lastIndex;return e<t.length&&(u=t.slice(e),i[r]?i[r]+=u:i[++r]=u),i.length<2?o[0]?hii(o[0].x):sii(t):(t=o.length,function(n){for(var r=0,u;r<t;++r)i[(u=o[r]).i]=u.x(n);return i.join("")})}function eo(n,t){var i=typeof t,r;return t==null||i==="boolean"?tl(t):(i==="number"?wt:i==="string"?(r=lr(t))?(t=r,vf):nb:t instanceof lr?vf:t instanceof Date?tut:Array.isArray(t)?nut:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?iut:wt)(n,t)}function rut(n,t){return n=+n,t-=n,function(i){return Math.round(n+t*i)}}function uut(n,t,i,r,u,f){var o,s,e;return(o=Math.sqrt(n*n+t*t))&&(n/=o,t/=o),(e=n*i+t*r)&&(i-=n*e,r-=t*e),(s=Math.sqrt(i*i+r*r))&&(i/=s,r/=s,e/=s),n*r<t*i&&(n=-n,t=-t,e=-e,o=-o),{translateX:u,translateY:f,rotate:Math.atan2(t,n)*tb,skewX:Math.atan(e)*tb,scaleX:o,scaleY:s}}function cii(n){return n==="none"?ul:(oo||(oo=document.createElement("DIV"),ib=document.documentElement,fut=document.defaultView),oo.style.transform=n,n=fut.getComputedStyle(ib.appendChild(oo),null).getPropertyValue("transform"),ib.removeChild(oo),n=n.slice(7,-1).split(","),uut(+n[0],+n[1],+n[2],+n[3],+n[4],+n[5]))}function lii(n){return n==null?ul:(fl||(fl=document.createElementNS("http://www.w3.org/2000/svg","g")),fl.setAttribute("transform",n),!(n=fl.transform.baseVal.consolidate()))?ul:(n=n.matrix,uut(n.a,n.b,n.c,n.d,n.e,n.f))}function eut(n,t,i,r){function u(n){return n.length?n.pop()+" ":""}function f(n,r,u,f,e,o){if(n!==u||r!==f){var s=e.push("translate(",null,t,null,i);o.push({i:s-4,x:wt(n,u)},{i:s-2,x:wt(r,f)})}else(u||f)&&e.push("translate("+u+t+f+i)}function e(n,t,i,f){n!==t?(n-t>180?t+=360:t-n>180&&(n+=360),f.push({i:i.push(u(i)+"rotate(",null,r)-2,x:wt(n,t)})):t&&i.push(u(i)+"rotate("+t+r)}function o(n,t,i,f){n!==t?f.push({i:i.push(u(i)+"skewX(",null,r)-2,x:wt(n,t)}):t&&i.push(u(i)+"skewX("+t+r)}function s(n,t,i,r,f,e){if(n!==i||t!==r){var o=f.push(u(f)+"scale(",null,",",null,")");e.push({i:o-4,x:wt(n,i)},{i:o-2,x:wt(t,r)})}else(i!==1||r!==1)&&f.push(u(f)+"scale("+i+","+r+")")}return function(t,i){var r=[],u=[];return t=n(t),i=n(i),f(t.translateX,t.translateY,i.translateX,i.translateY,r,u),e(t.rotate,i.rotate,r,u),o(t.skewX,i.skewX,r,u),s(t.scaleX,t.scaleY,i.scaleX,i.scaleY,r,u),t=i=null,function(n){for(var t=-1,f=u.length,i;++t<f;)r[(i=u[t]).i]=i.x(n);return r.join("")}}}function cut(n){return((n=Math.exp(n))+1/n)/2}function vii(n){return((n=Math.exp(n))-1/n)/2}function yii(n){return((n=Math.exp(2*n))-1)/(n+1)}function lut(n,t){var c=n[0],l=n[1],i=n[2],p=t[0],w=t[1],r=t[2],e=p-c,o=w-l,s=e*e+o*o,h,u;if(s<aii)u=Math.log(r/i)/so,h=function(n){return[c+n*e,l+n*o,i*Math.exp(so*n*u)]};else{var a=Math.sqrt(s),v=(r*r-i*i+hut*s)/(2*i*rb*a),y=(r*r-i*i-hut*s)/(2*r*rb*a),f=Math.log(Math.sqrt(v*v+1)-v),b=Math.log(Math.sqrt(y*y+1)-y);u=(b-f)/so;h=function(n){var t=n*u,r=cut(f),s=i/(rb*a)*(r*yii(so*t+f)-vii(f));return[c+s*e,l+s*o,i*r/cut(so*t+f)]}}return h.duration=u*1e3,h}function aut(n){return function(t,i){var r=n((t=bc(t)).h,(i=bc(i)).h),u=nt(t.s,i.s),f=nt(t.l,i.l),e=nt(t.opacity,i.opacity);return function(n){return t.h=r(n),t.s=u(n),t.l=f(n),t.opacity=e(n),t+""}}}function pii(n,t){var i=nt((n=dc(n)).l,(t=dc(t)).l),r=nt(n.a,t.a),u=nt(n.b,t.b),f=nt(n.opacity,t.opacity);return function(t){return n.l=i(t),n.a=r(t),n.b=u(t),n.opacity=f(t),n+""}}function put(n){return function(t,i){var r=n((t=gc(t)).h,(i=gc(i)).h),u=nt(t.c,i.c),f=nt(t.l,i.l),e=nt(t.opacity,i.opacity);return function(n){return t.h=r(n),t.c=u(n),t.l=f(n),t.opacity=e(n),t+""}}}function kut(n){return function t(i){function r(t,r){var u=n((t=oi(t)).h,(r=oi(r)).h),f=nt(t.s,r.s),e=nt(t.l,r.l),o=nt(t.opacity,r.opacity);return function(n){return t.h=u(n),t.s=f(n),t.l=e(Math.pow(n,i)),t.opacity=o(n),t+""}}return i=+i,r.gamma=t,r}(1)}function wii(n,t){for(var r=0,i=t.length-1,u=t[0],f=new Array(i<0?0:i);r<i;)f[r]=n(u,u=t[++r]);return function(n){var t=Math.max(0,Math.min(i-1,Math.floor(n*=i)));return f[t](n-t)}}function bii(n,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=n(i/(t-1));return r}function pf(){return cu||(nft(kii),cu=vo.now()+sl)}function kii(){cu=0}function yo(){this._call=this._time=this._next=null}function hl(n,t,i){var r=new yo;return r.restart(n,t,i),r}function tft(){pf();++yf;for(var n=el,t;n;)(t=cu-n._time)>=0&&n._call.call(null,t),n=n._next;--yf}function ift(){cu=(ol=vo.now())+sl;yf=co=0;try{tft()}finally{yf=0;gii();cu=0}}function dii(){var n=vo.now(),t=n-ol;t>gut&&(sl-=t,ol=n)}function gii(){for(var t,n=el,i,r=Infinity;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(i=n._next,n._next=null,n=t?t._next=i:el=i);ao=t;ub(r)}function ub(n){if(!yf){co&&(co=clearTimeout(co));var t=n-cu;t>24?(n<Infinity&&(co=setTimeout(ift,n-vo.now()-sl)),lo&&(lo=clearInterval(lo))):(lo||(ol=vo.now(),lo=setInterval(dii,gut)),yf=1,nft(ift))}}function fb(n,t,i){var r=new yo;return t=t==null?0:+t,r.restart(function(i){r.stop();n(i+t)},t,i),r}function nri(n,t,i){var r=new yo,u=t;return t==null?(r.restart(n,t,i),r):(t=+t,i=i==null?pf():+i,r.restart(function f(e){e+=u;r.restart(f,u+=t,i);n(e)},t,i),r)}function al(n,t,i,r,u,f){var e=n.__transition;if(e){if(i in e)return}else n.__transition={};rri(n,i,{name:t,index:r,group:u,on:tri,tween:iri,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:rft})}function hb(n,t){var i=si(n,t);if(i.state>rft)throw new Error("too late; already scheduled");return i}function lu(n,t){var i=si(n,t);if(i.state>cl)throw new Error("too late; already started");return i}function si(n,t){var i=n.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function rri(n,t,i){function s(n){i.state=eb;i.timer.restart(f,i.delay,i.time);i.delay<=n&&f(n-i.delay)}function f(s){var c,l,a,h;if(i.state!==eb)return e();for(c in r)if(h=r[c],h.name===i.name){if(h.state===ob)return fb(f);h.state===uft?(h.state=ll,h.timer.stop(),h.on.call("interrupt",n,n.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=ll,h.timer.stop(),delete r[c])}if(fb(function(){i.state===ob&&(i.state=uft,i.timer.restart(o,i.delay,i.time),o(s))}),i.state=cl,i.on.call("start",n,n.__data__,i.index,i.group),i.state===cl){for(i.state=ob,u=new Array(a=i.tween.length),c=0,l=-1;c<a;++c)(h=i.tween[c].value.call(n,n.__data__,i.index,i.group))&&(u[++l]=h);u.length=l+1}}function o(t){for(var f=t<i.duration?i.ease.call(null,t/i.duration):(i.timer.restart(e),i.state=sb,1),r=-1,o=u.length;++r<o;)u[r].call(null,f);i.state===sb&&(i.on.call("end",n,n.__data__,i.index,i.group),e())}function e(){i.state=ll;i.timer.stop();delete r[t];for(var u in r)return;delete n.__transition}var r=n.__transition,u;r[t]=i;i.timer=hl(s,0,i.time)}function au(n,t){var r=n.__transition,i,f,e=!0,u;if(r){t=t==null?null:t+"";for(u in r){if((i=r[u]).name!==t){e=!1;continue}f=i.state>cl&&i.state<sb;i.state=ll;i.timer.stop();f&&i.on.call("interrupt",n,n.__data__,i.index,i.group);delete r[u]}e&&delete n.__transition}}function uri(n){return this.each(function(){au(this,n)})}function fri(n,t){var r,i;return function(){var f=lu(this,n),e=f.tween,u,o;if(e!==r)for(i=r=e,u=0,o=i.length;u<o;++u)if(i[u].name===t){i=i.slice();i.splice(u,1);break}f.tween=i}}function eri(n,t,i){var u,r;if(typeof i!="function")throw new Error;return function(){var e=lu(this,n),o=e.tween;if(o!==u){r=(u=o).slice();for(var s={name:t,value:i},f=0,h=r.length;f<h;++f)if(r[f].name===t){r[f]=s;break}f===h&&r.push(s)}e.tween=r}}function ori(n,t){var u=this._id,r,i,f,e;if(n+="",arguments.length<2){for(r=si(this.node(),u).tween,i=0,f=r.length;i<f;++i)if((e=r[i]).name===n)return e.value;return null}return this.each((t==null?fri:eri)(u,n,t))}function cb(n,t,i){var r=n._id;return n.each(function(){var n=lu(this,r);(n.value||(n.value={}))[t]=i.apply(this,arguments)}),function(n){return si(n,r).value[t]}}function fft(n,t){var i;return(typeof t=="number"?wt:t instanceof lr?vf:(i=lr(t))?(t=i,vf):nb)(n,t)}function sri(n){return function(){this.removeAttribute(n)}}function hri(n){return function(){this.removeAttributeNS(n.space,n.local)}}function cri(n,t,i){var r,u;return function(){var f=this.getAttribute(n);return f===i?null:f===r?u:u=t(r=f,i)}}function lri(n,t,i){var r,u;return function(){var f=this.getAttributeNS(n.space,n.local);return f===i?null:f===r?u:u=t(r=f,i)}}function ari(n,t,i){var r,u,f;return function(){var e,o=i(this);return o==null?void this.removeAttribute(n):(e=this.getAttribute(n),e===o?null:e===r&&o===u?f:f=t(r=e,u=o))}}function vri(n,t,i){var r,u,f;return function(){var e,o=i(this);return o==null?void this.removeAttributeNS(n.space,n.local):(e=this.getAttributeNS(n.space,n.local),e===o?null:e===r&&o===u?f:f=t(r=e,u=o))}}function yri(n,t){var i=to(n),r=i==="transform"?sut:fft;return this.attrTween(n,typeof t=="function"?(i.local?vri:ari)(i,r,cb(this,"attr."+n,t)):t==null?(i.local?hri:sri)(i):(i.local?lri:cri)(i,r,t+""))}function pri(n,t){function i(){var i=this,r=t.apply(i,arguments);return r&&function(t){i.setAttributeNS(n.space,n.local,r(t))}}return i._value=t,i}function wri(n,t){function i(){var i=this,r=t.apply(i,arguments);return r&&function(t){i.setAttribute(n,r(t))}}return i._value=t,i}function bri(n,t){var i="attr."+n,r;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return r=to(n),this.tween(i,(r.local?pri:wri)(r,t))}function kri(n,t){return function(){hb(this,n).delay=+t.apply(this,arguments)}}function dri(n,t){return t=+t,function(){hb(this,n).delay=t}}function gri(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?kri:dri)(t,n)):si(this.node(),t).delay}function nui(n,t){return function(){lu(this,n).duration=+t.apply(this,arguments)}}function tui(n,t){return t=+t,function(){lu(this,n).duration=t}}function iui(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?nui:tui)(t,n)):si(this.node(),t).duration}function rui(n,t){if(typeof t!="function")throw new Error;return function(){lu(this,n).ease=t}}function uui(n){var t=this._id;return arguments.length?this.each(rui(t,n)):si(this.node(),t).ease}function fui(n){typeof n!="function"&&(n=hc(n));for(var f=this._groups,e=f.length,o=new Array(e),t=0;t<e;++t)for(var u=f[t],s=u.length,h=o[t]=[],i,r=0;r<s;++r)(i=u[r])&&n.call(i,i.__data__,r,u)&&h.push(i);return new vi(o,this._parents,this._name,this._id)}function eui(n){if(n._id!==this._id)throw new Error;for(var r=this._groups,e=n._groups,u=r.length,c=e.length,l=Math.min(u,c),f=new Array(u),t=0;t<l;++t)for(var o=r[t],a=e[t],s=o.length,v=f[t]=new Array(s),h,i=0;i<s;++i)(h=o[i]||a[i])&&(v[i]=h);for(;t<u;++t)f[t]=r[t];return new vi(f,this._parents,this._name,this._id)}function oui(n){return(n+"").trim().split(/^|\s+/).every(function(n){var t=n.indexOf(".");return t>=0&&(n=n.slice(0,t)),!n||n==="start"})}function sui(n,t,i){var r,u,f=oui(t)?hb:lu;return function(){var e=f(this,n),o=e.on;if(o!==r)(u=(r=o).copy()).on(t,i);e.on=u}}function hui(n,t){var i=this._id;return arguments.length<2?si(this.node(),i).on.on(n):this.each(sui(i,n,t))}function cui(n){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==n)return;t&&t.removeChild(this)}}function lui(){return this.on("end.remove",cui(this._id))}function aui(n){var s=this._name,u=this._id;typeof n!="function"&&(n=sc(n));for(var h=this._groups,c=h.length,l=new Array(c),r=0;r<c;++r)for(var f=h[r],a=f.length,e=l[r]=new Array(a),i,o,t=0;t<a;++t)(i=f[t])&&(o=n.call(i,i.__data__,t,f))&&("__data__"in i&&(o.__data__=i.__data__),e[t]=o,al(e[t],s,u,t,e,si(i,u)));return new vi(l,this._parents,s,u)}function vui(n){var s=this._name,f=this._id;typeof n!="function"&&(n=gp(n));for(var h=this._groups,v=h.length,c=[],l=[],e=0;e<v;++e)for(var o=h[e],y=o.length,t,i=0;i<y;++i)if(t=o[i]){for(var r=n.call(t,t.__data__,i,o),a,p=si(t,f),u=0,w=r.length;u<w;++u)(a=r[u])&&al(a,s,f,u,r,p);c.push(r);l.push(t)}return new vi(c,l,s,f)}function yui(){return new eft(this._groups,this._parents)}function pui(n,t){var i,r,u;return function(){var f=eu(this,n),e=(this.style.removeProperty(n),eu(this,n));return f===e?null:f===i&&e===r?u:u=t(i=f,r=e)}}function wui(n){return function(){this.style.removeProperty(n)}}function bui(n,t,i){var r,u;return function(){var f=eu(this,n);return f===i?null:f===r?u:u=t(r=f,i)}}function kui(n,t,i){var r,u,f;return function(){var o=eu(this,n),e=i(this);return e==null&&(e=(this.style.removeProperty(n),eu(this,n))),o===e?null:o===r&&e===u?f:f=t(r=o,u=e)}}function dui(n,t,i){var r=(n+="")=="transform"?out:fft;return t==null?this.styleTween(n,pui(n,r)).on("end.style."+n,wui(n)):this.styleTween(n,typeof t=="function"?kui(n,r,cb(this,"style."+n,t)):bui(n,r,t+""),i)}function gui(n,t,i){function r(){var r=this,u=t.apply(r,arguments);return u&&function(t){r.style.setProperty(n,u(t),i)}}return r._value=t,r}function nfi(n,t,i){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,gui(n,t,i==null?"":i))}function tfi(n){return function(){this.textContent=n}}function ifi(n){return function(){var t=n(this);this.textContent=t==null?"":t}}function rfi(n){return this.tween("text",typeof n=="function"?ifi(cb(this,"text",n)):tfi(n==null?"":n+""))}function ufi(){for(var n,e=this._name,s=this._id,o=hft(),i=this._groups,h=i.length,r=0;r<h;++r)for(var u=i[r],c=u.length,f,t=0;t<c;++t)(f=u[t])&&(n=si(f,s),al(f,e,o,t,u,{time:n.time+n.delay+n.duration,delay:0,duration:n.duration,ease:n.ease}));return new vi(i,this._parents,e,o)}function vi(n,t,i,r){this._groups=n;this._parents=t;this._name=i;this._id=r}function sft(n){return ou().transition(n)}function hft(){return++oft}function ffi(n){return+n}function efi(n){return n*n}function ofi(n){return n*(2-n)}function cft(n){return((n*=2)<=1?n*n:--n*(2-n)+1)/2}function sfi(n){return n*n*n}function hfi(n){return--n*n*n+1}function lb(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}function afi(n){return 1-Math.cos(n*vft)}function vfi(n){return Math.sin(n*vft)}function yft(n){return(1-Math.cos(aft*n))/2}function yfi(n){return Math.pow(2,10*n-10)}function pfi(n){return 1-Math.pow(2,-10*n)}function pft(n){return((n*=2)<=1?Math.pow(2,10*n-10):2-Math.pow(2,10-10*n))/2}function wfi(n){return 1-Math.sqrt(1-n*n)}function bfi(n){return Math.sqrt(1- --n*n)}function wft(n){return((n*=2)<=1?1-Math.sqrt(1-n*n):Math.sqrt(1-(n-=2)*n)+1)/2}function fei(n){return 1-po(1-n)}function po(n){return(n=+n)<vb?vl*n*n:n<dfi?vl*(n-=kfi)*n+gfi:n<tei?vl*(n-=nei)*n+iei:vl*(n-=rei)*n+uei}function eei(n){return((n*=2)<=1?1-po(1-n):po(n-1)+1)/2}function lei(n,t){for(var i;!(i=n.__transition)||!(i=i[t]);)if(!(n=n.parentNode))return bb.time=pf(),bb;return i}function aei(n){var t,o;n instanceof vi?(t=n._id,n=n._name):(t=hft(),(o=bb).time=pf(),n=n==null?null:n+"");for(var r=this._groups,s=r.length,u=0;u<s;++u)for(var f=r[u],h=f.length,e,i=0;i<h;++i)(e=f[i])&&al(e,n,t,i,f,o||lei(e,t));return new vi(r,this._parents,n,t)}function vei(n,t){var i=n.__transition,u,r;if(i){t=t==null?null:t+"";for(r in i)if((u=i[r]).state>eb&&u.name===t)return new vi([[n]],dft,t,+r)}return null}function gft(n){return function(){return n}}function yei(n,t,i){this.target=n;this.type=t;this.selection=i}function net(){n.event.stopImmediatePropagation()}function yl(){n.event.preventDefault();n.event.stopImmediatePropagation()}function wo(n){return{type:n}}function kei(){return!n.event.button}function dei(){var n=this.ownerSVGElement||this;return[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]}function db(n){while(!n.__brush)if(!(n=n.parentNode))return;return n.__brush}function gb(n){return n[0][0]===n[1][0]||n[0][1]===n[1][1]}function gei(n){var t=n.__brush;return t?t.dim.output(t.selection):null}function noi(){return nk(pl)}function toi(){return nk(wl)}function ioi(){return nk(pei)}function nk(t){function i(n){var r=n.property("__brush",a).selectAll(".overlay").data([wo("overlay")]),i;r.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",gi.overlay).merge(r).each(function(){var n=db(this).extent;vt(this).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1])});n.selectAll(".selection").data([wo("selection")]).enter().append("rect").attr("class","selection").attr("cursor",gi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");i=n.selectAll(".handle").data(t.handles,function(n){return n.type});i.exit().remove();i.enter().append("rect").attr("class",function(n){return"handle handle--"+n.type}).attr("cursor",function(n){return gi[n.type]});n.each(u).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",l)}function u(){var t=vt(this),n=db(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return t.type[t.type.length-1]==="e"?n[1][0]-r/2:n[0][0]-r/2}).attr("y",function(t){return t.type[0]==="s"?n[1][1]-r/2:n[0][1]-r/2}).attr("width",function(t){return t.type==="n"||t.type==="s"?n[1][0]-n[0][0]+r:r}).attr("height",function(t){return t.type==="e"||t.type==="w"?n[1][1]-n[0][1]+r:r})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function o(n,t){return n.__brush.emitter||new c(n,t)}function c(n,t){this.that=n;this.args=t;this.state=n.__brush;this.active=0}function l(){function ni(){if(d3.event.offsetX==undefined)var n=hr(f);else n=[d3.event.clientX-f.getBoundingClientRect().x-f.clientLeft,d3.event.clientY-f.getBoundingClientRect().y-f.clientTop];!pt||wt||bt||(Math.abs(n[0]-ot[0])>Math.abs(n[1]-ot[1])?bt=!0:wt=!0);ot=n;dt=!0;yl();ht()}function ht(){var n;s=ot[0]-it[0];c=ot[1]-it[1];switch(nt){case kb:case tet:i&&(s=Math.max(rt-l,Math.min(ft-v,s)),w=l+s,k=v+s);r&&(c=Math.max(ut-a,Math.min(et-y,c)),b=a+c,d=y+c);break;case bf:i<0?(s=Math.max(rt-l,Math.min(ft-l,s)),w=l+s,k=v):i>0&&(s=Math.max(rt-v,Math.min(ft-v,s)),w=l,k=v+s);r<0?(c=Math.max(ut-a,Math.min(et-a,c)),b=a+c,d=y):r>0&&(c=Math.max(ut-y,Math.min(et-y,c)),b=a,d=y+c);break;case kf:i&&(w=Math.max(rt,Math.min(ft,l-s*i)),k=Math.max(rt,Math.min(ft,v+s*i)));r&&(b=Math.max(ut,Math.min(et,a-c*r)),d=Math.max(ut,Math.min(et,y+c*r)))}k<w&&(i*=-1,n=l,l=v,v=n,n=w,w=k,k=n,g in iet&&st.attr("cursor",gi[g=iet[g]]));d<b&&(r*=-1,n=a,a=y,y=n,n=b,b=d,d=n,g in ret&&st.attr("cursor",gi[g=ret[g]]));tt.selection&&(p=tt.selection);wt&&(w=p[0][0],k=p[1][0]);bt&&(b=p[0][1],d=p[1][1]);(p[0][0]!==w||p[0][1]!==b||p[1][0]!==k||p[1][1]!==d)&&(tt.selection=[[w,b],[k,d]],u.call(f),kt.brush())}function ti(){if(net(),n.event.touches){if(n.event.touches.length)return;e&&clearTimeout(e);e=setTimeout(function(){e=null},500);at.on("touchmove.brush touchend.brush touchcancel.brush",null)}else{pc(n.event.view,dt);gt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null)}at.attr("pointer-events","all");st.attr("cursor",gi.overlay);tt.selection&&(p=tt.selection);gb(p)&&(tt.selection=null,u.call(f));kt.end()}function ii(){switch(n.event.keyCode){case 16:pt=i&&r;break;case 18:nt===bf&&(i&&(v=k-s*i,l=w+s*i),r&&(y=d-c*r,a=b+c*r),nt=kf,ht());break;case 32:(nt===bf||nt===kf)&&(i<0?v=k-s:i>0&&(l=w-s),r<0?y=d-c:r>0&&(a=b-c),nt=kb,st.attr("cursor",gi.selection),ht());break;default:return}yl()}function ri(){switch(n.event.keyCode){case 16:pt&&(wt=bt=pt=!1,ht());break;case 18:nt===kf&&(i<0?v=k:i>0&&(l=w),r<0?y=d:r>0&&(a=b),nt=bf,ht());break;case 32:nt===kb&&(n.event.altKey?(i&&(v=k-s*i,l=w+s*i),r&&(y=d-c*r,a=b+c*r),nt=kf):(i<0?v=k:i>0&&(l=w),r<0?y=d:r>0&&(a=b),nt=bf),st.attr("cursor",gi[g]),ht());break;default:return}yl()}var ct,lt,it,ot,kt,at,st,gt;if(n.event.touches){if(n.event.changedTouches.length<n.event.touches.length)return yl()}else if(e)return;if(h.apply(this,arguments)){var f=this,g=n.event.target.__data__.type,nt=(n.event.metaKey?g="overlay":g)==="selection"?tet:n.event.altKey?kf:bf,i=t===wl?null:wei[g],r=t===pl?null:bei[g],tt=db(f),yt=tt.extent,p=tt.selection,rt=yt[0][0],l,w,ut=yt[0][1],a,b,ft=yt[1][0],v,k,et=yt[1][1],y,d,s,c,dt,pt=i&&r&&n.event.shiftKey,wt,bt;if(d3.event.offsetX==undefined?it=hr(f):(ct=d3.event.offsetX,lt=d3.event.offsetY,ct+f.getCTM().e>d3.event.layerX-.01&&ct+f.getCTM().e<d3.event.layerX+.01&&(ct=d3.event.layerX),lt+f.getCTM().f>d3.event.layerY-.01&&lt+f.getCTM().f<d3.event.layerY+.01&&(lt=d3.event.layerY),it=[ct+f.getCTM().inverse().e,lt+f.getCTM().inverse().f]),ot=it,kt=o(f,arguments).beforestart(),g==="overlay"?tt.selection=p=[[l=t===wl?rt:it[0],a=t===pl?ut:it[1]],[v=t===wl?ft:l,y=t===pl?et:a]]:(l=p[0][0],a=p[0][1],v=p[1][0],y=p[1][1]),w=l,b=a,k=v,d=y,at=vt(f).attr("pointer-events","none"),st=at.selectAll(".overlay").attr("cursor",gi[g]),n.event.touches)at.on("touchmove.brush",ni,!0).on("touchend.brush touchcancel.brush",ti,!0);else gt=vt(n.event.view).on("keydown.brush",ii,!0).on("keyup.brush",ri,!0).on("mousemove.brush",ni,!0).on("mouseup.brush",ti,!0),yc(n.event.view);net();au(f);u.call(f);kt.start()}}function a(){var n=this.__brush||{selection:null};return n.extent=s.apply(this,arguments),n.dim=t,n}var s=dei,h=kei,f=fu(i,"start","brush","end"),r=6,e;return i.move=function(n,i){n.selection?n.on("start.brush",function(){o(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){o(this,arguments).end()}).tween("brush",function(){function s(t){r.selection=t===1&&gb(f)?null:c(t);u.call(n);h.brush()}var n=this,r=n.__brush,h=o(n,arguments),e=r.selection,f=t.input(typeof i=="function"?i.apply(this,arguments):i,r.extent),c=eo(e,f);return e&&f?s:s(1)}):n.each(function(){var n=this,f=arguments,e=n.__brush,r=t.input(typeof i=="function"?i.apply(n,f):i,e.extent),s=o(n,f).beforestart();au(n);e.selection=r==null||gb(r)?null:r;u.call(n);s.start().brush().end()})},c.prototype={beforestart:function(){return++this.active==1&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return--this.active==0&&(delete this.state.emitter,this.emit("end")),this},emit:function(n){io(new yei(i,n,t.output(this.state.selection)),f.apply,f,[n,this.that,this.args])}},i.extent=function(n){return arguments.length?(s=typeof n=="function"?n:gft([[+n[0][0],+n[0][1]],[+n[1][0],+n[1][1]]]),i):s},i.filter=function(n){return arguments.length?(h=typeof n=="function"?n:gft(!!n),i):h},i.handleSize=function(n){return arguments.length?(r=+n,i):r},i.on=function(){var n=f.on.apply(f,arguments);return n===f?i:n},i}function roi(n){return function(t,i){return n(t.source.value+t.target.value,i.source.value+i.target.value)}}function uoi(){function n(n){for(var f=n.length,v=[],k=pt(f),p=[],y=[],tt=y.groups=new Array(f),w=new Array(f*f),o,d,g,s,l,a,c=0,e=-1;++e<f;){for(o=0,s=-1;++s<f;)o+=n[e][s];v.push(o);p.push(pt(f));c+=o}for(r&&k.sort(function(n,t){return r(v[n],v[t])}),u&&p.forEach(function(t,i){t.sort(function(t,r){return u(n[i][t],n[i][r])})}),c=set(0,oet-i*f)/c,g=c?i:oet/f,o=0,e=-1;++e<f;){for(d=o,s=-1;++s<f;){var h=k[e],b=p[h][s],nt=n[h][b],it=o,rt=o+=nt*c;w[b*f+h]={index:h,subindex:b,startAngle:it,endAngle:rt,value:nt}}tt[h]={index:h,startAngle:d,endAngle:o,value:v[h]};o+=g}for(e=-1;++e<f;)for(s=e-1;++s<f;)l=w[s*f+e],a=w[e*f+s],(l.value||a.value)&&y.push(l.value<a.value?{source:a,target:l}:{source:l,target:a});return t?y.sort(t):y}var i=0,r=null,u=null,t=null;return n.padAngle=function(t){return arguments.length?(i=set(0,t),n):i},n.sortGroups=function(t){return arguments.length?(r=t,n):r},n.sortSubgroups=function(t){return arguments.length?(u=t,n):u},n.sortChords=function(i){return arguments.length?(i==null?t=null:(t=roi(i))._=i,n):t&&t._},n}function tk(n){return function(){return n}}function uk(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function ar(){return new uk}function eoi(n){return n.source}function ooi(n){return n.target}function soi(n){return n.radius}function hoi(n){return n.startAngle}function coi(n){return n.endAngle}function loi(){function n(){var h,n=het.call(arguments),w=f.apply(this,n),b=e.apply(this,n),c=+i.apply(this,(n[0]=w,n)),o=r.apply(this,n)-bl,a=u.apply(this,n)-bl,v=c*uet(o),y=c*fet(o),l=+i.apply(this,(n[0]=b,n)),s=r.apply(this,n)-bl,p=u.apply(this,n)-bl;return t||(t=h=ar()),t.moveTo(v,y),t.arc(0,0,c,o,a),(o!==s||a!==p)&&(t.quadraticCurveTo(0,0,l*uet(s),l*fet(s)),t.arc(0,0,l,s,p)),t.quadraticCurveTo(0,0,v,y),t.closePath(),h?(t=null,h+""||null):void 0}var f=eoi,e=ooi,i=soi,r=hoi,u=coi,t=null;return n.radius=function(t){return arguments.length?(i=typeof t=="function"?t:tk(+t),n):i},n.startAngle=function(t){return arguments.length?(r=typeof t=="function"?t:tk(+t),n):r},n.endAngle=function(t){return arguments.length?(u=typeof t=="function"?t:tk(+t),n):u},n.source=function(t){return arguments.length?(f=t,n):f},n.target=function(t){return arguments.length?(e=t,n):e},n.context=function(i){return arguments.length?(t=i==null?null:i,n):t},n}function kl(){}function nr(n,t){var r=new kl,i,u,e,f;if(n instanceof kl)n.each(function(n,t){r.set(t,n)});else if(Array.isArray(n))if(i=-1,u=n.length,t==null)while(++i<u)r.set(i,n[i]);else while(++i<u)r.set(t(e=n[i],i,n),e);else if(n)for(f in n)r.set(f,n[f]);return r}function aoi(){function r(t,f,e,o){if(f>=n.length)return u!=null&&t.sort(u),i!=null?i(t):t;for(var c=-1,y=t.length,p=n[f++],l,s,h=nr(),a,v=e();++c<y;)(a=h.get(l=p(s=t[c])+""))?a.push(s):h.set(l,[s]);return h.each(function(n,t){o(v,t,r(n,f,e,o))}),v}function e(t,r){if(++r>n.length)return t;var u,o=f[r-1];return i!=null&&r>=n.length?u=t.entries():(u=[],t.each(function(n,t){u.push({key:t,values:e(n,r)})})),o!=null?u.sort(function(n,t){return o(n.key,t.key)}):u}var n=[],f=[],u,i,t;return t={object:function(n){return r(n,0,voi,yoi)},map:function(n){return r(n,0,cet,aet)},entries:function(n){return e(r(n,0,cet,aet),0)},key:function(i){return n.push(i),t},sortKeys:function(i){return f[n.length-1]=i,t},sortValues:function(n){return u=n,t},rollup:function(n){return i=n,t}}}function voi(){return{}}function yoi(n,t,i){n[t]=i}function cet(){return nr()}function aet(n,t,i){n.set(t,i)}function dl(){}function vet(n,t){var r=new dl,i,u;if(n instanceof dl)n.each(function(n){r.add(n)});else if(n)if(i=-1,u=n.length,t==null)while(++i<u)r.add(n[i]);else while(++i<u)r.add(t(n[i],i,n));return r}function poi(n){var t=[];for(var i in n)t.push(i);return t}function woi(n){var t=[];for(var i in n)t.push(n[i]);return t}function boi(n){var t=[];for(var i in n)t.push({key:i,value:n[i]});return t}function koi(n,t){return n-t}function doi(n){for(var t=0,i=n.length,r=n[i-1][1]*n[0][0]-n[i-1][0]*n[0][1];++t<i;)r+=n[t-1][1]*n[t][0]-n[t-1][0]*n[t][1];return r}function pu(n){return function(){return n}}function goi(n,t){for(var i=-1,u=t.length,r;++i<u;)if(r=nsi(n,t[i]))return r;return 0}function nsi(n,t){for(var a=t[0],i=t[1],r=-1,u=0,s=n.length,h=s-1;u<s;h=u++){var f=n[u],c=f[0],e=f[1],o=n[h],v=o[0],l=o[1];if(tsi(f,o,t))return 0;e>i!=l>i&&a<(v-c)*(i-e)/(l-e)+c&&(r=-r)}return r}function tsi(n,t,i){var r;return isi(n,t,i)&&rsi(n[r=+(n[0]===t[0])],i[r],t[r])}function isi(n,t,i){return(t[0]-n[0])*(i[1]-n[1])==(i[0]-n[0])*(t[1]-n[1])}function rsi(n,t,i){return n<=t&&t<=i||i<=t&&t<=n}function usi(){}function pet(){function t(n){var t=r(n);if(Array.isArray(t))t=t.slice().sort(koi);else{var i=lp(n),u=i[0],f=i[1];t=uu(u,f,t);t=pt(Math.floor(u/t)*t,Math.floor(f/t)*t,t)}return t.map(function(t){return e(n,t)})}function e(n,t){var i=[],r=[];return s(n,t,function(f){u(f,n,t);doi(f)>0?i.push([f]):r.push(f)}),r.forEach(function(n){for(var t=0,u=i.length,r;t<u;++t)if(goi((r=i[t])[0],n)!==-1){r.push(n);return}}),{type:"MultiPolygon",value:t,coordinates:i}}function s(t,r,u){function a(n){var a=[n[0][0]+f,n[0][1]+h],r=[n[1][0]+f,n[1][1]+h],e=o(a),s=o(r),t,i;(t=l[e])?(i=c[s])?(delete l[t.end],delete c[i.start],t===i?(t.ring.push(r),u(t.ring)):c[t.start]=l[i.end]={start:t.start,end:i.end,ring:t.ring.concat(i.ring)}):(delete l[t.end],t.ring.push(r),l[t.end=s]=t):(t=c[s])?(i=l[e])?(delete c[t.start],delete l[i.end],t===i?(t.ring.push(r),u(t.ring)):c[i.start]=l[t.end]={start:i.start,end:t.end,ring:i.ring.concat(t.ring)}):(delete c[t.start],t.ring.unshift(a),c[t.start=e]=t):c[e]=l[s]={start:e,end:s,ring:[a,r]}}var c=[],l=[],f,h,v,e,s,y;for(f=h=-1,e=t[0]>=r,yi[e<<1].forEach(a);++f<n-1;)v=e,e=t[f+1]>=r,yi[v|e<<1].forEach(a);for(yi[e<<0].forEach(a);++h<i-1;){for(f=-1,e=t[h*n+n]>=r,s=t[h*n]>=r,yi[e<<1|s<<2].forEach(a);++f<n-1;)v=e,e=t[h*n+n+f+1]>=r,y=s,s=t[h*n+f+1]>=r,yi[v|e<<1|s<<2|y<<3].forEach(a);yi[e|s<<3].forEach(a)}for(f=-1,s=t[h*n]>=r,yi[s<<2].forEach(a);++f<n-1;)y=s,s=t[h*n+f+1]>=r,yi[s<<2|y<<3].forEach(a);yi[s<<3].forEach(a)}function o(t){return t[0]*2+t[1]*(n+1)*4}function f(t,r,u){t.forEach(function(t){var e=t[0],o=t[1],s=e|0,h=o|0,f,c=r[h*n+s];e>0&&e<n&&s===e&&(f=r[h*n+s-1],t[0]=e+(u-f)/(c-f)-.5);o>0&&o<i&&h===o&&(f=r[(h-1)*n+s],t[1]=o+(u-f)/(c-f)-.5)})}var n=1,i=1,r=wp,u=f;return t.contour=e,t.size=function(r){if(!arguments.length)return[n,i];var u=Math.ceil(r[0]),f=Math.ceil(r[1]);if(!(u>0)||!(f>0))throw new Error("invalid size");return n=u,i=f,t},t.thresholds=function(n){return arguments.length?(r=typeof n=="function"?n:Array.isArray(n)?pu(fk.call(n)):pu(n),t):r},t.smooth=function(n){return arguments.length?(u=n?f:usi,t):u===f},t}function ek(n,t,i){for(var r,o,u=n.width,s=n.height,e=(i<<1)+1,f=0;f<s;++f)for(r=0,o=0;r<u+i;++r)r<u&&(o+=n.data[r+f*u]),r>=i&&(r>=e&&(o-=n.data[r-e+f*u]),t.data[r-i+f*u]=o/Math.min(r+1,u-1+e-r,e))}function ok(n,t,i){for(var r,o,f=n.width,s=n.height,e=(i<<1)+1,u=0;u<f;++u)for(r=0,o=0;r<s+i;++r)r<s&&(o+=n.data[u+r*f]),r>=i&&(r>=e&&(o-=n.data[u+(r-e)*f]),t.data[u+(r-i)*f]=o/Math.min(r+1,s-1+e-r,e))}function fsi(n){return n[0]}function esi(n){return n[1]}function osi(){function u(u){var e=new Float32Array(n*i),l=new Float32Array(n*i),o,v;return u.forEach(function(r,u,o){var c=s(r,u,o)+f>>t,l=h(r,u,o)+f>>t;c>=0&&c<n&&l>=0&&l<i&&++e[c+l*n]}),ek({width:n,height:i,data:e},{width:n,height:i,data:l},r>>t),ok({width:n,height:i,data:l},{width:n,height:i,data:e},r>>t),ek({width:n,height:i,data:e},{width:n,height:i,data:l},r>>t),ok({width:n,height:i,data:l},{width:n,height:i,data:e},r>>t),ek({width:n,height:i,data:e},{width:n,height:i,data:l},r>>t),ok({width:n,height:i,data:l},{width:n,height:i,data:e},r>>t),o=c(e),Array.isArray(o)||(v=uit(e),o=uu(0,v,o),o=pt(0,Math.floor(v/o)*o,o),o.shift()),pet().thresholds(o).size([n,i])(e).map(a)}function a(n){return n.value*=Math.pow(2,-2*t),n.coordinates.forEach(v),n}function v(n){n.forEach(y)}function y(n){n.forEach(p)}function p(n){n[0]=n[0]*Math.pow(2,t)-f;n[1]=n[1]*Math.pow(2,t)-f}function l(){return f=r*3,n=e+f*2>>t,i=o+f*2>>t,u}var s=fsi,h=esi,e=960,o=500,r=20,t=2,f=r*3,n=e+f*2>>t,i=o+f*2>>t,c=pu(20);return u.x=function(n){return arguments.length?(s=typeof n=="function"?n:pu(+n),u):s},u.y=function(n){return arguments.length?(h=typeof n=="function"?n:pu(+n),u):h},u.size=function(n){if(!arguments.length)return[e,o];var t=Math.ceil(n[0]),i=Math.ceil(n[1]);if(!(t>=0)&&!(t>=0))throw new Error("invalid size");return e=t,o=i,l()},u.cellSize=function(n){if(!arguments.length)return 1<<t;if(!((n=+n)>=1))throw new Error("invalid cell size");return t=Math.floor(Math.log(n)/Math.LN2),l()},u.thresholds=function(n){return arguments.length?(c=typeof n=="function"?n:Array.isArray(n)?pu(fk.call(n)):pu(n),u):c},u.bandwidth=function(n){if(!arguments.length)return Math.sqrt(r*(r+1));if(!((n=+n)>=0))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*n*n+1)-1)/2),l()},u}function bet(n){return new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}")}function ssi(n,t){var i=bet(n);return function(r,u){return t(i(r),u,n)}}function hsi(n){var t=Object.create(null),i=[];return n.forEach(function(n){for(var r in n)r in t||i.push(t[r]=r)}),i}function gl(n){function f(n,t){var r,u,f=i(n,function(n,i){if(r)return r(n,i-1);u=n;r=t?ssi(n,t):bet(n)});return f.columns=u||[],f}function i(n,t){function c(){if(s)return sk;if(f)return f=!1,wet;var e,o=i,t;if(n.charCodeAt(o)===hk){while(i++<r&&n.charCodeAt(i)!==hk||n.charCodeAt(++i)===hk);return(e=i)>=r?s=!0:(t=n.charCodeAt(i++))===bo?f=!0:t===ck&&(f=!0,n.charCodeAt(i)===bo&&++i),n.slice(o+1,e-1).replace(/""/g,'"')}while(i<r){if((t=n.charCodeAt(e=i++))===bo)f=!0;else if(t===ck)f=!0,n.charCodeAt(i)===bo&&++i;else if(t!==u)continue;return n.slice(o,e)}return s=!0,n.slice(o,r)}var h=[],r=n.length,i=0,l=0,e,s=r<=0,f=!1,o;for(n.charCodeAt(r-1)===bo&&--r,n.charCodeAt(r-1)===ck&&--r;(e=c())!==sk;){for(o=[];e!==wet&&e!==sk;)o.push(e),e=c();t&&(o=t(o,l++))==null||h.push(o)}return h}function e(i,r){return r==null&&(r=hsi(i)),[r.map(t).join(n)].concat(i.map(function(i){return r.map(function(n){return t(i[n])}).join(n)})).join("\n")}function o(n){return n.map(s).join("\n")}function s(i){return i.map(t).join(n)}function t(n){return n==null?"":r.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n}var r=new RegExp('["'+n+"\n\r]"),u=n.charCodeAt(0);return{parse:f,parseRows:i,format:e,formatRows:o}}function wsi(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);return n.blob()}function bsi(n,t){return fetch(n,t).then(wsi)}function ksi(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);return n.arrayBuffer()}function dsi(n,t){return fetch(n,t).then(ksi)}function gsi(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);return n.text()}function ia(n,t){return fetch(n,t).then(gsi)}function get(n){return function(t,i,r){return arguments.length===2&&typeof i=="function"&&(r=i,i=undefined),ia(t,i).then(function(t){return n(t,r)})}}function nhi(n,t,i,r){arguments.length===3&&typeof i=="function"&&(r=i,i=undefined);var u=gl(n);return ia(t,i).then(function(n){return u.parse(n,r)})}function thi(n,t){return new Promise(function(i,r){var u=new Image;for(var f in t)u[f]=t[f];u.onerror=r;u.onload=function(){i(u)};u.src=n})}function ihi(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);return n.json()}function rhi(n,t){return fetch(n,t).then(ihi)}function lk(n){return function(t,i){return ia(t,i).then(function(t){return(new DOMParser).parseFromString(t,n)})}}function ohi(n,t){function i(){for(var f=r.length,u,e=0,o=0,i=0;i<f;++i)u=r[i],e+=u.x,o+=u.y;for(e=e/f-n,o=o/f-t,i=0;i<f;++i)u=r[i],u.x-=e,u.y-=o}var r;return n==null&&(n=0),t==null&&(t=0),i.initialize=function(n){r=n},i.x=function(t){return arguments.length?(n=+t,i):n},i.y=function(n){return arguments.length?(t=+n,i):t},i}function k(n){return function(){return n}}function yr(){return(Math.random()-.5)*1e-6}function shi(n){var t=+this._x.call(null,n),i=+this._y.call(null,n);return iot(this.cover(t,i),t,i,n)}function iot(n,t,i,r){if(isNaN(t)||isNaN(i))return n;var u,f=n._root,s={data:r},c=n._x0,l=n._y0,a=n._x1,v=n._y1,e,o,w,b,y,p,h,k;if(!f)return n._root=s,n;while(f.length)if((y=t>=(e=(c+a)/2))?c=e:a=e,(p=i>=(o=(l+v)/2))?l=o:v=o,u=f,!(f=f[h=p<<1|y]))return u[h]=s,n;if(w=+n._x.call(null,f.data),b=+n._y.call(null,f.data),t===w&&i===b)return s.next=f,u?u[h]=s:n._root=s,n;do u=u?u[h]=new Array(4):n._root=new Array(4),(y=t>=(e=(c+a)/2))?c=e:a=e,(p=i>=(o=(l+v)/2))?l=o:v=o;while((h=p<<1|y)==(k=(b>=o)<<1|w>=e));return u[k]=f,u[h]=s,n}function hhi(n){for(var h,s=n.length,i,r,c=new Array(s),l=new Array(s),u=Infinity,f=Infinity,e=-Infinity,o=-Infinity,t=0;t<s;++t)isNaN(i=+this._x.call(null,h=n[t]))||isNaN(r=+this._y.call(null,h))||(c[t]=i,l[t]=r,i<u&&(u=i),i>e&&(e=i),r<f&&(f=r),r>o&&(o=r));for(e<u&&(u=this._x0,e=this._x1),o<f&&(f=this._y0,o=this._y1),this.cover(u,f).cover(e,o),t=0;t<s;++t)iot(this,c[t],l[t],n[t]);return this}function chi(n,t){var i,s,u,h;if(isNaN(n=+n)||isNaN(t=+t))return this;var r=this._x0,e=this._y0,f=this._x1,o=this._y1;if(isNaN(r))f=(r=Math.floor(n))+1,o=(e=Math.floor(t))+1;else if(r>n||n>f||e>t||t>o){i=f-r;s=this._root;switch(h=(t<(e+o)/2)<<1|n<(r+f)/2){case 0:do u=new Array(4),u[h]=s,s=u;while(i*=2,f=r+i,o=e+i,n>f||t>o);break;case 1:do u=new Array(4),u[h]=s,s=u;while(i*=2,r=f-i,o=e+i,r>n||t>o);break;case 2:do u=new Array(4),u[h]=s,s=u;while(i*=2,f=r+i,e=o-i,n>f||e>t);break;case 3:do u=new Array(4),u[h]=s,s=u;while(i*=2,r=f-i,e=o-i,r>n||e>t)}this._root&&this._root.length&&(this._root=s)}else return this;return this._x0=r,this._y0=e,this._x1=f,this._y1=o,this}function lhi(){var n=[];return this.visit(function(t){if(!t.length)do n.push(t.data);while(t=t.next)}),n}function ahi(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?undefined:[[this._x0,this._y0],[this._x1,this._y1]]}function st(n,t,i,r,u){this.node=n;this.x0=t;this.y0=i;this.x1=r;this.y1=u}function vhi(n,t,i){var k,h=this._x0,c=this._y0,l,a,v,y,p=this._x1,w=this._y1,r=[],u=this._root,f,b,e,o,s;for(u&&r.push(new st(u,h,c,p,w)),i==null?i=Infinity:(h=n-i,c=t-i,p=n+i,w=t+i,i*=i);f=r.pop();)if((u=f.node)&&!((l=f.x0)>p)&&!((a=f.y0)>w)&&!((v=f.x1)<h)&&!((y=f.y1)<c))if(u.length)e=(l+v)/2,o=(a+y)/2,r.push(new st(u[3],e,o,v,y),new st(u[2],l,o,e,y),new st(u[1],e,a,v,o),new st(u[0],l,a,e,o)),(b=(t>=o)<<1|n>=e)&&(f=r[r.length-1],r[r.length-1]=r[r.length-1-b],r[r.length-1-b]=f);else{var d=n-+this._x.call(null,u.data),g=t-+this._y.call(null,u.data),nt=d*d+g*g;nt<i&&(s=Math.sqrt(i=nt),h=n-s,c=t-s,p=n+s,w=t+s,k=u.data)}return k}function yhi(n){if(isNaN(v=+this._x.call(null,n))||isNaN(y=+this._y.call(null,n)))return this;var i,t=this._root,e,f,u,h=this._x0,c=this._y0,l=this._x1,a=this._y1,v,y,o,s,p,w,r,b;if(!t)return this;if(t.length)for(;;){if((p=v>=(o=(h+l)/2))?h=o:l=o,(w=y>=(s=(c+a)/2))?c=s:a=s,!(i=t,t=t[r=w<<1|p]))return this;if(!t.length)break;(i[r+1&3]||i[r+2&3]||i[r+3&3])&&(e=i,b=r)}while(t.data!==n)if(!(f=t,t=t.next))return this;return((u=t.next)&&delete t.next,f)?(u?f.next=u:delete f.next,this):i?(u?i[r]=u:delete i[r],(t=i[0]||i[1]||i[2]||i[3])&&t===(i[3]||i[2]||i[1]||i[0])&&!t.length&&(e?e[b]=t:this._root=t),this):(this._root=u,this)}function phi(n){for(var t=0,i=n.length;t<i;++t)this.remove(n[t]);return this}function whi(){return this._root}function bhi(){var n=0;return this.visit(function(t){if(!t.length)do++n;while(t=t.next)}),n}function khi(n){var r=[],u,t=this._root,i,o,s,h,c,f,e;for(t&&r.push(new st(t,this._x0,this._y0,this._x1,this._y1));u=r.pop();)!n(t=u.node,o=u.x0,s=u.y0,h=u.x1,c=u.y1)&&t.length&&(f=(o+h)/2,e=(s+c)/2,(i=t[3])&&r.push(new st(i,f,e,h,c)),(i=t[2])&&r.push(new st(i,o,e,f,c)),(i=t[1])&&r.push(new st(i,f,s,h,e)),(i=t[0])&&r.push(new st(i,o,s,f,e)));return this}function dhi(n){var r=[],l=[],t,u;for(this._root&&r.push(new st(this._root,this._x0,this._y0,this._x1,this._y1));t=r.pop();){if(u=t.node,u.length){var i,o=t.x0,s=t.y0,h=t.x1,c=t.y1,f=(o+h)/2,e=(s+c)/2;(i=u[0])&&r.push(new st(i,o,s,f,e));(i=u[1])&&r.push(new st(i,f,s,h,e));(i=u[2])&&r.push(new st(i,o,e,f,c));(i=u[3])&&r.push(new st(i,f,e,h,c))}l.push(t)}while(t=l.pop())n(t.node,t.x0,t.y0,t.x1,t.y1);return this}function ghi(n){return n[0]}function nci(n){return arguments.length?(this._x=n,this):this._x}function tci(n){return n[1]}function ici(n){return arguments.length?(this._y=n,this):this._y}function ra(n,t,i){var r=new ak(t==null?ghi:t,i==null?tci:i,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function ak(n,t,i,r,u,f){this._x=n;this._y=t;this._x0=i;this._y0=r;this._x1=u;this._y1=f;this._root=undefined}function rot(n){for(var t={data:n.data},i=t;n=n.next;)i=i.next={data:n.data};return t}function rci(n){return n.x+n.vx}function uci(n){return n.y+n.vy}function fci(n){function i(){function y(t,i,r,f,o){var v=t.data,w=t.r,c=h+w;if(v){if(v.index>n.index){var y=e-v.x-v.vx,p=s-v.y-v.vy,a=y*y+p*p;a<c*c&&(y===0&&(y=yr(),a+=y*y),p===0&&(p=yr(),a+=p*p),a=(c-(a=Math.sqrt(a)))/a*u,n.vx+=(y*=a)*(c=(w*=w)/(l+w)),n.vy+=(p*=a)*c,v.vx-=y*(c=1-c),v.vy-=p*c)}return}return i>e+c||f<e-c||r>s+c||o<s-c}for(var i,v=t.length,c,n,e,s,h,l,a=0;a<f;++a)for(c=ra(t,rci,uci).visitAfter(o),i=0;i<v;++i)n=t[i],h=r[n.index],l=h*h,e=n.x+n.vx,s=n.y+n.vy,c.visit(y)}function o(n){if(n.data)return n.r=r[n.data.index];for(var t=n.r=0;t<4;++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}function e(){if(t){var i,f=t.length,u;for(r=new Array(f),i=0;i<f;++i)u=t[i],r[u.index]=+n(u,i,t)}}var t,r,u=1,f=1;return typeof n!="function"&&(n=k(n==null?1:+n)),i.initialize=function(n){t=n;e()},i.iterations=function(n){return arguments.length?(f=+n,i):f},i.strength=function(n){return arguments.length?(u=+n,i):u},i.radius=function(t){return arguments.length?(n=typeof t=="function"?t:k(+t),e(),i):n},i}function eci(n){return n.index}function uot(n,t){var i=n.get(t);if(!i)throw new Error("missing: "+t);return i}function oci(n){function y(n){return 1/Math.min(i[n.source.index],i[n.target.index])}function t(t){for(var i,y,r,u,f,o,l,a,v=0,p=n.length;v<c;++v)for(i=0;i<p;++i)y=n[i],r=y.source,u=y.target,f=u.x+u.vx-r.x-r.vx||yr(),o=u.y+u.vy-r.y-r.vy||yr(),l=Math.sqrt(f*f+o*o),l=(l-s[i])/l*t*e[i],f*=l,o*=l,u.vx-=f*(a=h[i]),u.vy-=o*a,r.vx+=f*(a=1-a),r.vy+=o*a}function l(){if(r){var f,l=r.length,o=n.length,c=nr(r,u),t;for(f=0,i=new Array(l);f<o;++f)t=n[f],t.index=f,typeof t.source!="object"&&(t.source=uot(c,t.source)),typeof t.target!="object"&&(t.target=uot(c,t.target)),i[t.source.index]=(i[t.source.index]||0)+1,i[t.target.index]=(i[t.target.index]||0)+1;for(f=0,h=new Array(o);f<o;++f)t=n[f],h[f]=i[t.source.index]/(i[t.source.index]+i[t.target.index]);e=new Array(o);a();s=new Array(o);v()}}function a(){if(r)for(var t=0,i=n.length;t<i;++t)e[t]=+f(n[t],t,n)}function v(){if(r)for(var t=0,i=n.length;t<i;++t)s[t]=+o(n[t],t,n)}var u=eci,f=y,e,o=k(30),s,r,i,h,c=1;return n==null&&(n=[]),t.initialize=function(n){r=n;l()},t.links=function(i){return arguments.length?(n=i,l(),t):n},t.id=function(n){return arguments.length?(u=n,t):u},t.iterations=function(n){return arguments.length?(c=+n,t):c},t.strength=function(n){return arguments.length?(f=typeof n=="function"?n:k(+n),a(),t):f},t.distance=function(n){return arguments.length?(o=typeof n=="function"?n:k(+n),v(),t):o},t}function sci(n){return n.x}function hci(n){return n.y}function cci(n){function c(){l();e.call("tick",t);i<u&&(h.stop(),e.call("end",t))}function l(){var u,e=n.length,t;for(i+=(s-i)*o,r.each(function(n){n(i)}),u=0;u<e;++u)t=n[u],t.fx==null?t.x+=t.vx*=f:(t.x=t.fx,t.vx=0),t.fy==null?t.y+=t.vy*=f:(t.y=t.fy,t.vy=0)}function a(){for(var t,r,u,i=0,f=n.length;i<f;++i)t=n[i],t.index=i,(isNaN(t.x)||isNaN(t.y))&&(r=fot*Math.sqrt(i),u=i*eot,t.x=r*Math.cos(u),t.y=r*Math.sin(u)),(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}function v(t){return t.initialize&&t.initialize(n),t}var t,i=1,u=.001,o=1-Math.pow(u,1/300),s=0,f=.6,r=nr(),h=hl(c),e=fu("tick","end");return n==null&&(n=[]),a(),t={tick:l,restart:function(){return h.restart(c),t},stop:function(){return h.stop(),t},nodes:function(i){return arguments.length?(n=i,a(),r.each(v),t):n},alpha:function(n){return arguments.length?(i=+n,t):i},alphaMin:function(n){return arguments.length?(u=+n,t):u},alphaDecay:function(n){return arguments.length?(o=+n,t):+o},alphaTarget:function(n){return arguments.length?(s=+n,t):s},velocityDecay:function(n){return arguments.length?(f=1-n,t):1-f},force:function(n,i){return arguments.length>1?(i==null?r.remove(n):r.set(n,v(i)),t):r.get(n)},find:function(t,i,r){var u=0,c=n.length,e,o,s,f,h;for(r==null?r=Infinity:r*=r,u=0;u<c;++u)f=n[u],e=t-f.x,o=i-f.y,s=e*e+o*o,s<r&&(h=f,r=s);return h},on:function(n,i){return arguments.length>1?(e.on(n,i),t):e.on(n)}}}function lci(){function n(n){var r,f=i.length,e=ra(i,sci,hci).visitAfter(c);for(u=n,r=0;r<f;++r)t=i[r],e.visit(l)}function h(){if(i){var n,r=i.length,t;for(f=new Array(r),n=0;n<r;++n)t=i[n],f[t.index]=+o(t,n,i)}}function c(n){var u=0,t,i,e=0,o,s,r;if(n.length){for(o=s=r=0;r<4;++r)(t=n[r])&&(i=Math.abs(t.value))&&(u+=t.value,e+=i,o+=i*t.x,s+=i*t.y);n.x=o/e;n.y=s/e}else{t=n;t.x=t.data.x;t.y=t.data.y;do u+=f[t.data.index];while(t=t.next)}n.value=u}function l(n,i,o,h){if(!n.value)return!0;var l=n.x-t.x,a=n.y-t.y,v=h-i,c=l*l+a*a;if(v*v/s<c)return c<e&&(l===0&&(l=yr(),c+=l*l),a===0&&(a=yr(),c+=a*a),c<r&&(c=Math.sqrt(r*c)),t.vx+=l*n.value*u/c,t.vy+=a*n.value*u/c),!0;if(!n.length&&!(c>=e)){(n.data!==t||n.next)&&(l===0&&(l=yr(),c+=l*l),a===0&&(a=yr(),c+=a*a),c<r&&(c=Math.sqrt(r*c)));do n.data!==t&&(v=f[n.data.index]*u/c,t.vx+=l*v,t.vy+=a*v);while(n=n.next)}}var i,t,u,o=k(-30),f,r=1,e=Infinity,s=.81;return n.initialize=function(n){i=n;h()},n.strength=function(t){return arguments.length?(o=typeof t=="function"?t:k(+t),h(),n):o},n.distanceMin=function(t){return arguments.length?(r=t*t,n):Math.sqrt(r)},n.distanceMax=function(t){return arguments.length?(e=t*t,n):Math.sqrt(e)},n.theta=function(t){return arguments.length?(s=t*t,n):Math.sqrt(s)},n}function aci(n,t,i){function r(n){for(var r=0,c=u.length;r<c;++r){var e=u[r],s=e.x-t||1e-6,h=e.y-i||1e-6,l=Math.sqrt(s*s+h*h),a=(f[r]-l)*o[r]*n/l;e.vx+=s*a;e.vy+=h*a}}function s(){if(u){var t,i=u.length;for(o=new Array(i),f=new Array(i),t=0;t<i;++t)f[t]=+n(u[t],t,u),o[t]=isNaN(f[t])?0:+e(u[t],t,u)}}var u,e=k(.1),o,f;return typeof n!="function"&&(n=k(+n)),t==null&&(t=0),i==null&&(i=0),r.initialize=function(n){u=n;s()},r.strength=function(n){return arguments.length?(e=typeof n=="function"?n:k(+n),s(),r):e},r.radius=function(t){return arguments.length?(n=typeof t=="function"?t:k(+t),s(),r):n},r.x=function(n){return arguments.length?(t=+n,r):t},r.y=function(n){return arguments.length?(i=+n,r):i},r}function vci(n){function i(n){for(var i=0,e=t.length,r;i<e;++i)r=t[i],r.vx+=(f[i]-r.x)*u[i]*n}function e(){if(t){var i,e=t.length;for(u=new Array(e),f=new Array(e),i=0;i<e;++i)u[i]=isNaN(f[i]=+n(t[i],i,t))?0:+r(t[i],i,t)}}var r=k(.1),t,u,f;return typeof n!="function"&&(n=k(n==null?0:+n)),i.initialize=function(n){t=n;e()},i.strength=function(n){return arguments.length?(r=typeof n=="function"?n:k(+n),e(),i):r},i.x=function(t){return arguments.length?(n=typeof t=="function"?t:k(+t),e(),i):n},i}function yci(n){function i(n){for(var i=0,e=t.length,r;i<e;++i)r=t[i],r.vy+=(f[i]-r.y)*u[i]*n}function e(){if(t){var i,e=t.length;for(u=new Array(e),f=new Array(e),i=0;i<e;++i)u[i]=isNaN(f[i]=+n(t[i],i,t))?0:+r(t[i],i,t)}}var r=k(.1),t,u,f;return typeof n!="function"&&(n=k(n==null?0:+n)),i.initialize=function(n){t=n;e()},i.strength=function(n){return arguments.length?(r=typeof n=="function"?n:k(+n),e(),i):r},i.y=function(t){return arguments.length?(n=typeof t=="function"?t:k(+t),e(),i):n},i}function ua(n,t){if((r=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var r,i=n.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+n.slice(r+1)]}function df(n){return n=ua(Math.abs(n)),n?n[1]:NaN}function pci(n,t){return function(i,r){for(var f=i.length,o=[],s=0,u=n[0],e=0;f>0&&u>0;){if(e+u+1>r&&(u=Math.max(1,r-e)),o.push(i.substring(f-=u,f+u)),(e+=u+1)>r)break;u=n[s=(s+1)%n.length]}return o.reverse().join(t)}}function wci(n){return function(t){return t.replace(/[0-9]/g,function(t){return n[+t]})}}function ko(n){return new vk(n)}function vk(n){if(!(t=oot.exec(n)))throw new Error("invalid format: "+n);var t;this.fill=t[1]||" ";this.align=t[2]||">";this.sign=t[3]||"-";this.symbol=t[4]||"";this.zero=!!t[5];this.width=t[6]&&+t[6];this.comma=!!t[7];this.precision=t[8]&&+t[8].slice(1);this.trim=!!t[9];this.type=t[10]||""}function bci(n){n:for(var u=n.length,t=1,i=-1,r;t<u;++t)switch(n[t]){case".":i=r=t;break;case"0":i===0&&(i=t);r=t;break;default:if(i>0){if(!+n[t])break n;i=0}}return i>0?n.slice(0,i)+n.slice(r+1):n}function kci(n,t){var u=ua(n,t);if(!u)return n+"";var r=u[0],e=u[1],i=e-(sot=Math.max(-8,Math.min(8,Math.floor(e/3)))*3)+1,f=r.length;return i===f?r:i>f?r+new Array(i-f+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+ua(n,Math.max(0,t+i-1))[0]}function hot(n,t){var u=ua(n,t),i,r;return u?(i=u[0],r=u[1],r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")):n+""}function cot(n){return n}function lot(n){function r(n){function b(n){var a=k,i=d,b,rt,it,nt,tt,e;if(r==="c")i=w(n)+i,n="";else if(n=+n,nt=n<0,n=w(Math.abs(n),o),p&&(n=bci(n)),nt&&+n==0&&(nt=!1),a=(nt?s==="("?s:"-":s==="-"||s==="("?"":s)+a,i=(r==="s"?pk[8+sot/3]:"")+i+(nt&&s==="("?")":""),g)for(b=-1,rt=n.length;++b<rt;)if(it=n.charCodeAt(b),48>it||it>57){i=(it===46?u+n.slice(b+1):n.slice(b))+i;n=n.slice(0,b);break}y&&!h&&(n=t(n,Infinity));tt=a.length+n.length+i.length;e=tt<v?new Array(v-tt+1).join(c):"";y&&h&&(n=t(e+n,e.length?v-i.length:Infinity),e="");switch(l){case"<":n=a+n+i+e;break;case"=":n=a+e+n+i;break;case"^":n=e.slice(0,tt=e.length>>1)+a+n+i+e.slice(tt);break;default:n=e+a+n+i}return f(n)}n=ko(n);var c=n.fill,l=n.align,s=n.sign,a=n.symbol,h=n.zero,v=n.width,y=n.comma,o=n.precision,p=n.trim,r=n.type;r==="n"?(y=!0,r="g"):yk[r]||(o==null&&(o=12),p=!0,r="g");(h||c==="0"&&l==="=")&&(h=!0,c="0",l="=");var k=a==="$"?i[0]:a==="#"&&/[boxX]/.test(r)?"0"+r.toLowerCase():"",d=a==="$"?i[1]:/[%p]/.test(r)?e:"",w=yk[r],g=/[defgprs%]/.test(r);return o=o==null?6:/[gprs]/.test(r)?Math.max(1,Math.min(21,o)):Math.max(0,Math.min(20,o)),b.toString=function(){return n+""},b}function o(n,t){var u=r((n=ko(n),n.type="f",n)),i=Math.max(-8,Math.min(8,Math.floor(df(t)/3)))*3,f=Math.pow(10,-i),e=pk[8+i/3];return function(n){return u(f*n)+e}}var t=n.grouping&&n.thousands?pci(n.grouping,n.thousands):cot,i=n.currency,u=n.decimal,f=n.numerals?wci(n.numerals):cot,e=n.percent||"%";return{format:r,formatPrefix:o}}function aot(t){return fa=lot(t),n.format=fa.format,n.formatPrefix=fa.formatPrefix,fa}function vot(n){return Math.max(0,-df(Math.abs(n)))}function yot(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(df(t)/3)))*3-df(Math.abs(n)))}function pot(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,df(t)-df(n))+1}function pr(){return new ea}function ea(){this.reset()}function wot(n,t,i){var r=n.s=t+i,u=r-t,f=r-u;n.t=t-f+(i-u)}function dot(n){return n>1?0:n<-1?o:Math.acos(n)}function kt(n){return n>1?y:n<-1?-y:Math.asin(n)}function got(n){return(n=t(n/2))*n}function v(){}function ca(n,t){n&&dk.hasOwnProperty(n.type)&&dk[n.type](n,t)}function gk(n,t,i){var u=-1,f=n.length-i,r;for(t.lineStart();++u<f;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function nst(n,t){var i=-1,r=n.length;for(t.polygonStart();++i<r;)gk(n[i],t,1);t.polygonEnd()}function hi(n,t){n&&kk.hasOwnProperty(n.type)?kk[n.type](n,t):ca(n,t)}function dci(){pi.point=nli}function gci(){rst(tst,ist)}function nli(n,i){pi.point=rst;tst=n;ist=i;n*=u;i*=u;nd=n;td=r(i=i/2+oa);id=t(i)}function rst(n,i){n*=u;i*=u;i=i/2+oa;var f=n-nd,e=f>=0?1:-1,o=e*f,s=r(i),h=t(i),c=id*h,l=td*s+c*r(o),a=c*e*t(o);la.add(ht(a,l));nd=n;td=s;id=h}function tli(n){return aa.reset(),hi(n,pi),aa*2}function va(n){return[ht(n[1],n[0]),kt(n[2])]}function wu(n){var i=n[0],u=n[1],f=r(u);return[f*r(i),f*t(i),t(u)]}function ya(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function ne(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function rd(n,t){n[0]+=t[0];n[1]+=t[1];n[2]+=t[2]}function pa(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function wa(n){var t=d(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t;n[1]/=t;n[2]/=t}function ud(n,t){wr.push(tr=[p=n,b=n]);t<dt&&(dt=t);t>ti&&(ti=t)}function est(n,t){var c=wu([n*u,t*u]);if(te){var o=ne(te,c),v=[o[1],-o[0],0],i=ne(v,o);wa(i);i=va(i);var l=n-bu,e=l>0?1:-1,r=i[0]*a*e,f,h=s(l)>180;h^(e*bu<r&&r<e*n)?(f=i[1]*a,f>ti&&(ti=f)):(r=(r+360)%360-180,h^(e*bu<r&&r<e*n))?(f=-i[1]*a,f<dt&&(dt=f)):(t<dt&&(dt=t),t>ti&&(ti=t));h?n<bu?gt(p,n)>gt(p,b)&&(b=n):gt(n,b)>gt(p,b)&&(p=n):b>=p?(n<p&&(p=n),n>b&&(b=n)):n>bu?gt(p,n)>gt(p,b)&&(b=n):gt(n,b)>gt(p,b)&&(p=n)}else wr.push(tr=[p=n,b=n]);t<dt&&(dt=t);t>ti&&(ti=t);te=c;bu=n}function ost(){wi.point=est}function sst(){tr[0]=p;tr[1]=b;wi.point=ud;te=null}function hst(n,t){if(te){var i=n-bu;ie.add(s(i)>180?i+(i>0?360:-360):i)}else ust=n,fst=t;pi.point(n,t);est(n,t)}function ili(){pi.lineStart()}function rli(){hst(ust,fst);pi.lineEnd();s(ie)>i&&(p=-(b=180));tr[0]=p;tr[1]=b;te=null}function gt(n,t){return(t-=n)<0?t+360:t}function uli(n,t){return n[0]-t[0]}function cst(n,t){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}function fli(n){var r,u,t,i,f,e,o;if(ti=b=-(p=dt=Infinity),wr=[],hi(n,wi),u=wr.length){for(wr.sort(uli),r=1,t=wr[0],f=[t];r<u;++r)i=wr[r],cst(t,i[0])||cst(t,i[1])?(gt(t[0],i[1])>gt(t[0],t[1])&&(t[1]=i[1]),gt(i[0],t[1])>gt(t[0],t[1])&&(t[0]=i[0])):f.push(t=i);for(e=-Infinity,u=f.length-1,r=0,t=f[u];r<=u;t=i,++r)i=f[r],(o=gt(t[1],i[0]))>e&&(e=o,p=i[0],b=t[1])}return wr=tr=null,p===Infinity||dt===Infinity?[[NaN,NaN],[NaN,NaN]]:[[p,dt],[b,ti]]}function sd(n,i){n*=u;i*=u;var f=r(i);is(f*r(n),f*t(n),t(i))}function is(n,t,i){++ts;ka+=(n-ka)/ts;da+=(t-da)/ts;ga+=(i-ga)/ts}function vst(){ii.point=eli}function eli(n,i){n*=u;i*=u;var f=r(i);ct=f*r(n);lt=f*t(n);at=t(i);ii.point=oli;is(ct,lt,at)}function oli(n,i){n*=u;i*=u;var h=r(i),e=h*r(n),o=h*t(n),s=t(i),f=ht(d((f=lt*s-at*o)*f+(f=at*e-ct*s)*f+(f=ct*o-lt*e)*f),ct*e+lt*o+at*s);ba+=f;nv+=f*(ct+(ct=e));tv+=f*(lt+(lt=o));iv+=f*(at+(at=s));is(ct,lt,at)}function yst(){ii.point=sd}function sli(){ii.point=cli}function hli(){pst(lst,ast);ii.point=sd}function cli(n,i){lst=n;ast=i;n*=u;i*=u;ii.point=pst;var f=r(i);ct=f*r(n);lt=f*t(n);at=t(i);is(ct,lt,at)}function pst(n,i){n*=u;i*=u;var y=r(i),e=y*r(n),o=y*t(n),s=t(i),h=lt*s-at*o,c=at*e-ct*s,l=ct*o-lt*e,a=d(h*h+c*c+l*l),f=kt(a),v=a&&-f/a;fd+=v*h;ed+=v*c;od+=v*l;ba+=f;nv+=f*(ct+(ct=e));tv+=f*(lt+(lt=o));iv+=f*(at+(at=s));is(ct,lt,at)}function lli(n){ts=ba=ka=da=ga=nv=tv=iv=fd=ed=od=0;hi(n,ii);var t=fd,r=ed,u=od,f=t*t+r*r+u*u;return f<bot&&(t=nv,r=tv,u=iv,ba<i&&(t=ka,r=da,u=ga),f=t*t+r*r+u*u,f<bot)?[NaN,NaN]:[ht(r,t)*a,kt(u/d(f))*a]}function re(n){return function(){return n}}function hd(n,t){function i(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(i.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),i}function cd(n,t){return[n>o?n-yt:n<-o?n+yt:n,t]}function ld(n,t,i){return(n%=yt)?t||i?hd(bst(n),kst(t,i)):bst(n):t||i?kst(t,i):cd}function wst(n){return function(t,i){return t+=n,[t>o?t-yt:t<-o?t+yt:t,i]}}function bst(n){var t=wst(n);return t.invert=wst(-n),t}function kst(n,i){function s(n,i){var s=r(i),h=r(n)*s,c=t(n)*s,l=t(i),a=l*u+h*f;return[ht(c*e-a*o,h*u-l*f),kt(a*e+c*o)]}var u=r(n),f=t(n),e=r(i),o=t(i);return s.invert=function(n,i){var s=r(i),h=r(n)*s,c=t(n)*s,l=t(i),a=l*e-c*o;return[ht(c*e+l*o,h*u+a*f),kt(a*u-h*f)]},s}function dst(n){function t(t){return t=n(t[0]*u,t[1]*u),t[0]*=a,t[1]*=a,t}return n=ld(n[0]*u,n[1]*u,n.length>2?n[2]*u:0),t.invert=function(t){return t=n.invert(t[0]*u,t[1]*u),t[0]*=a,t[1]*=a,t},t}function gst(n,i,u,f,e,o){var c,s;if(u){var h=r(i),l=t(i),a=f*u;for(e==null?(e=i+f*yt,o=i-a/2):(e=nht(h,e),o=nht(h,o),(f>0?e<o:e>o)&&(e+=f*yt)),s=e;f>0?s>o:s<o;s-=a)c=va([h,-l*r(s),-l*t(s)]),n.point(c[0],c[1])}}function nht(n,t){t=wu(t);t[0]-=n;wa(t);var r=dot(-t[1]);return((-t[2]<0?-r:r)+yt-i)%yt}function ali(){function s(n,i){t.push(n=e(n,i));n[0]*=a;n[1]*=a}function n(){var n=i.apply(this,arguments),s=r.apply(this,arguments)*u,h=f.apply(this,arguments)*u;return t=[],e=ld(-n[0]*u,-n[1]*u,0).invert,gst(o,s,h,1),n={type:"Polygon",coordinates:[t]},t=e=null,n}var i=re([0,0]),r=re(90),f=re(6),t,e,o={point:s};return n.center=function(t){return arguments.length?(i=typeof t=="function"?t:re([+t[0],+t[1]]),n):i},n.radius=function(t){return arguments.length?(r=typeof t=="function"?t:re(+t),n):r},n.precision=function(t){return arguments.length?(f=typeof t=="function"?t:re(+t),n):f},n}function tht(){var n=[],t;return{point:function(n,i){t.push([n,i])},lineStart:function(){n.push(t=[])},lineEnd:v,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function rv(n,t){return s(n[0]-t[0])<i&&s(n[1]-t[1])<i}function uv(n,t,i,r){this.x=n;this.z=t;this.o=i;this.e=r;this.v=!1;this.n=this.p=null}function iht(n,t,i,r,u){var h=[],s=[],e,l,v,o,a,f,c;if(n.forEach(function(n){if(!((r=n.length-1)<=0)){var r,i=n[0],f=n[r],t;if(rv(i,f)){for(u.lineStart(),e=0;e<r;++e)u.point((i=n[e])[0],i[1]);u.lineEnd();return}h.push(t=new uv(i,n,null,!0));s.push(t.o=new uv(i,null,t,!1));h.push(t=new uv(f,n,null,!1));s.push(t.o=new uv(f,null,t,!0))}}),h.length){for(s.sort(t),rht(h),rht(s),e=0,l=s.length;e<l;++e)s[e].e=i=!i;for(v=h[0];;){for(f=v,c=!0;f.v;)if((f=f.n)===v)return;o=f.z;u.lineStart();do{if(f.v=f.o.v=!0,f.e){if(c)for(e=0,l=o.length;e<l;++e)u.point((a=o[e])[0],a[1]);else r(f.x,f.n.x,1,u);f=f.n}else{if(c)for(o=f.p.z,e=o.length-1;e>=0;--e)u.point((a=o[e])[0],a[1]);else r(f.x,f.p.x,-1,u);f=f.p}f=f.o;o=f.z;c=!c}while(!f.v);u.lineEnd()}}}function rht(n){if(r=n.length){for(var r,u=0,t=n[0],i;++u<r;)t.n=i=n[u],i.p=t,t=i;t.n=i=n[0];i.p=t}}function uht(n,u){var h=u[0],e=u[1],ut=t(e),wt=[t(h),-r(h),0],w=0,ft=0,c,et,a,s,it,rt;for(fv.reset(),ut===1?e=y+i:ut===-1&&(e=-y-i),c=0,et=n.length;c<et;++c)if(k=(b=n[c]).length){var b,k,l=b[k-1],d=l[0],ot=l[1]/2+oa,st=t(ot),ct=r(ot);for(a=0;a<k;++a,d=g,st=at,ct=vt,l=v){var v=b[a],g=v[0],lt=v[1]/2+oa,at=t(lt),vt=r(lt),f=g-d,nt=f>=0?1:-1,tt=nt*f,p=tt>o,pt=st*at;fv.add(ht(pt*nt*t(tt),ct*vt+pt*r(tt)));w+=p?f+nt*yt:f;p^d>=h^g>=h&&(s=ne(wu(l),wu(v)),wa(s),it=ne(wt,s),wa(it),rt=(p^f>=0?-1:1)*kt(it[2]),(e>rt||e===rt&&(s[0]||s[1]))&&(ft+=p^f>=0?1:-1))}}return(w<-i||w<i&&fv<-i)^ft&1}function fht(n,t,i,r){return function(u){function a(t,i){n(t,i)&&u.point(t,i)}function b(n,t){l.point(n,t)}function y(){f.point=b;l.lineStart()}function p(){f.point=a;l.lineEnd()}function w(n,t){s.push([n,t]);h.point(n,t)}function k(){h.lineStart();s=[]}function d(){w(s[0][0],s[0][1]);h.lineEnd();var r=h.clean(),n=v.result(),t,f=n.length,l,i,a;if(s.pop(),c.push(s),s=null,f){if(r&1){if(i=n[0],(l=i.length-1)>0){for(e||(u.polygonStart(),e=!0),u.lineStart(),t=0;t<l;++t)u.point((a=i[t])[0],a[1]);u.lineEnd()}return}f>1&&r&2&&n.push(n.pop().concat(n.shift()));o.push(n.filter(vli))}}var l=t(u),v=tht(),h=t(v),e=!1,c,o,s,f={point:a,lineStart:y,lineEnd:p,polygonStart:function(){f.point=w;f.lineStart=k;f.lineEnd=d;o=[];c=[]},polygonEnd:function(){f.point=a;f.lineStart=y;f.lineEnd=p;o=bp(o);var n=uht(c,r);o.length?(e||(u.polygonStart(),e=!0),iht(o,yli,n,i,u)):n&&(e||(u.polygonStart(),e=!0),u.lineStart(),i(null,null,1,u),u.lineEnd());e&&(u.polygonEnd(),e=!1);o=c=null},sphere:function(){u.polygonStart();u.lineStart();i(null,null,1,u);u.lineEnd();u.polygonEnd()}};return f}}function vli(n){return n.length>1}function yli(n,t){return((n=n.x)[0]<0?n[1]-y-i:y-n[1])-((t=t.x)[0]<0?t[1]-y-i:y-t[1])}function pli(n){var r=NaN,t=NaN,u=NaN,f;return{lineStart:function(){n.lineStart();f=1},point:function(e,h){var c=e>0?o:-o,l=s(e-r);s(l-o)<i?(n.point(r,t=(t+h)/2>0?y:-y),n.point(u,t),n.lineEnd(),n.lineStart(),n.point(c,t),n.point(e,t),f=0):u!==c&&l>=o&&(s(r-u)<i&&(r-=u*i),s(e-c)<i&&(e-=c*i),t=wli(r,t,e,h),n.point(u,t),n.lineEnd(),n.lineStart(),n.point(c,t),f=0);n.point(r=e,t=h);u=c},lineEnd:function(){n.lineEnd();r=t=NaN},clean:function(){return 2-f}}}function wli(n,u,f,e){var o,h,c=t(n-f);return s(c)>i?gf((t(u)*(h=r(e))*t(f)-t(e)*(o=r(u))*t(n))/(o*h*c)):(u+e)/2}function bli(n,t,r,u){var f,e;n==null?(f=r*y,u.point(-o,f),u.point(0,f),u.point(o,f),u.point(o,0),u.point(o,-f),u.point(0,-f),u.point(-o,-f),u.point(-o,0),u.point(-o,f)):s(n[0]-t[0])>i?(e=n[0]<t[0]?o:-o,f=r*e/2,u.point(-e,f),u.point(0,f),u.point(e,f)):u.point(t[0],t[1])}function eht(n){function v(t,i,r,u){gst(u,n,l,r,t,i)}function h(n,i){return r(n)*r(i)>t}function y(n){var t,l,r,s,u;return{lineStart:function(){s=r=!1;u=1},point:function(v,y){var p=[v,y],w,b=h(v,y),d=f?b?0:c(v,y):b?c(v+(v<0?o:-o),y):0,k;!t&&(s=r=b)&&n.lineStart();b!==r&&(w=e(t,p),(!w||rv(t,w)||rv(p,w))&&(p[0]+=i,p[1]+=i,b=h(p[0],p[1])));b!==r?(u=0,b?(n.lineStart(),w=e(p,t),n.point(w[0],w[1])):(w=e(t,p),n.point(w[0],w[1]),n.lineEnd()),t=w):a&&t&&f^b&&(d&l||!(k=e(p,t,!0))||(u=0,f?(n.lineStart(),n.point(k[0][0],k[0][1]),n.point(k[1][0],k[1][1]),n.lineEnd()):(n.point(k[1][0],k[1][1]),n.lineEnd(),n.lineStart(),n.point(k[0][0],k[0][1]))));!b||t&&rv(t,p)||n.point(p[0],p[1]);t=p;r=b;l=d},lineEnd:function(){r&&n.lineEnd();t=null},clean:function(){return u|(s&&r)<<1}}}function e(n,r,u){var ot=wu(n),st=wu(r),ut=[1,0,0],a=ne(ot,st),ft=ya(a,a),b=a[0],k=ft-b*b,nt,f,rt;if(!k)return!u&&n;var ht=t*ft/k,ct=-t*b/k,lt=ne(ut,a),e=pa(ut,ht),at=pa(a,ct);rd(e,at);var v=lt,p=ya(e,v),g=ya(v,v),et=p*p-g*(ya(e,e)-1);if(!(et<0)){if(nt=d(et),f=pa(v,(-p-nt)/g),rd(f,e),f=va(f),!u)return f;var h=n[0],y=r[0],c=n[1],l=r[1],w;y<h&&(w=h,h=y,y=w);var tt=y-h,it=s(tt-o)<i,vt=it||tt<i;return!it&&l<c&&(w=c,c=l,l=w),(vt?it?c+l>0^f[1]<(s(f[0]-h)<i?c:l):c<=f[1]&&f[1]<=l:tt>o^(h<=f[0]&&f[0]<=y))?(rt=pa(v,(-p+nt)/g),rd(rt,e),[f,va(rt)]):void 0}}function c(t,i){var u=f?n:o-n,r=0;return t<-u?r|=1:t>u&&(r|=2),i<-u?r|=4:i>u&&(r|=8),r}var t=r(n),l=6*u,f=t>0,a=s(t)>i;return fht(h,y,v,f?[0,-n]:[-o,n-o])}function kli(n,t,i,r,u,f){var l=n[0],a=n[1],v=t[0],y=t[1],o=0,s=1,h=v-l,c=y-a,e;if(e=i-l,h||!(e>0)){if(e/=h,h<0){if(e<o)return;e<s&&(s=e)}else if(h>0){if(e>s)return;e>o&&(o=e)}if(e=u-l,h||!(e<0)){if(e/=h,h<0){if(e>s)return;e>o&&(o=e)}else if(h>0){if(e<o)return;e<s&&(s=e)}if(e=r-a,c||!(e>0)){if(e/=c,c<0){if(e<o)return;e<s&&(s=e)}else if(c>0){if(e>s)return;e>o&&(o=e)}if(e=f-a,c||!(e<0)){if(e/=c,c<0){if(e>s)return;e>o&&(o=e)}else if(c>0){if(e<o)return;e<s&&(s=e)}return o>0&&(n[0]=l+o*h,n[1]=a+o*c),s<1&&(t[0]=l+s*h,t[1]=a+s*c),!0}}}}}function ov(n,t,r,u){function e(i,f){return n<=i&&i<=r&&t<=f&&f<=u}function o(i,e,o,s){var c=0,l=0;if(i==null||(c=f(i,o))!==(l=f(e,o))||h(i,e)<0^o>0){do s.point(c===0||c===3?n:r,c>1?u:t);while((c=(c+o+4)%4)!==l)}else s.point(e[0],e[1])}function f(u,f){return s(u[0]-n)<i?f>0?0:3:s(u[0]-r)<i?f>0?2:1:s(u[1]-t)<i?f>0?1:0:f>0?3:2}function c(n,t){return h(n.x,t.x)}function h(n,t){var i=f(n,1),r=f(t,1);return i!==r?i-r:i===0?t[1]-n[1]:i===1?n[0]-t[0]:i===2?n[1]-t[1]:t[0]-n[0]}return function(i){function tt(n,t){e(n,t)&&f.point(n,t)}function rt(){for(var o=0,s=0,a=h.length;s<a;++s)for(var c=h[s],l=1,v=c.length,r=c[0],f,t,e=r[0],i=r[1];l<v;++l)f=e,t=i,r=c[l],e=r[0],i=r[1],t<=u?i>u&&(e-f)*(u-t)>(i-t)*(n-f)&&++o:i<=u&&(e-f)*(u-t)<(i-t)*(n-f)&&--o;return o}function ut(){f=p;s=[];h=[];y=!0}function ft(){var n=rt(),t=y&&n,r=(s=bp(s)).length;(t||r)&&(i.polygonStart(),t&&(i.lineStart(),o(null,null,1,i),i.lineEnd()),r&&iht(s,c,n,o,i),i.polygonEnd());f=i;s=h=w=null}function et(){k.point=it;h&&h.push(w=[]);b=!0;l=!1;a=v=NaN}function ot(){s&&(it(d,g),nt&&l&&p.rejoin(),s.push(p.result()));k.point=tt;l&&f.lineEnd()}function it(i,o){var s=e(i,o),c,p;h&&w.push([i,o]);b?(d=i,g=o,nt=s,b=!1,s&&(f.lineStart(),f.point(i,o))):s&&l?f.point(i,o):(c=[a=Math.max(rs,Math.min(ue,a)),v=Math.max(rs,Math.min(ue,v))],p=[i=Math.max(rs,Math.min(ue,i)),o=Math.max(rs,Math.min(ue,o))],kli(c,p,n,t,r,u)?(l||(f.lineStart(),f.point(c[0],c[1])),f.point(p[0],p[1]),s||f.lineEnd(),y=!1):s&&(f.lineStart(),f.point(i,o),y=!1));a=i;v=o;l=s}var f=i,p=tht(),s,h,w,d,g,nt,a,v,l,b,y,k={point:tt,lineStart:et,lineEnd:ot,polygonStart:ut,polygonEnd:ft};return k}}function dli(){var t=0,i=0,r=960,u=500,n,f,e;return e={stream:function(e){return n&&f===e?n:n=ov(t,i,r,u)(f=e)},extent:function(o){return arguments.length?(t=+o[0][0],i=+o[0][1],r=+o[1][0],u=+o[1][1],n=f=null,e):[[t,i],[r,u]]}}}function gli(){ku.point=tai;ku.lineEnd=nai}function nai(){ku.point=ku.lineEnd=v}function tai(n,i){n*=u;i*=u;ad=n;hv=t(i);cv=r(i);ku.point=iai}function iai(n,i){n*=u;i*=u;var e=t(i),f=r(i),o=s(n-ad),h=r(o),a=t(o),c=f*a,l=cv*e-hv*f*h,v=hv*e+cv*f*h;sv.add(ht(d(c*c+l*l),v));ad=n;hv=e;cv=f}function oht(n){return sv.reset(),hi(n,ku),+sv}function us(n,t){return lv[0]=n,lv[1]=t,oht(sht)}function av(n,t){return n&&yd.hasOwnProperty(n.type)?yd[n.type](n,t):!1}function hht(n,t){return us(n,t)===0}function cht(n,t){var r=us(n[0],n[1]),u=us(n[0],t),f=us(t,n[1]);return u+f<=r+i}function lht(n,t){return!!uht(n.map(rai),aht(t))}function rai(n){return n=n.map(aht),n.pop(),n}function aht(n){return[n[0]*u,n[1]*u]}function uai(n,t){return(n&&vd.hasOwnProperty(n.type)?vd[n.type]:av)(n,t)}function vht(n,t,r){var u=pt(n,t-i,r).concat(t);return function(n){return u.map(function(t){return[n,t]})}}function yht(n,t,r){var u=pt(n,t-i,r).concat(t);return function(n){return u.map(function(t){return[t,n]})}}function pht(){function n(){return{type:"MultiLineString",coordinates:g()}}function g(){return pt(sa(r/a)*a,t,a).map(w).concat(pt(sa(f/v)*v,u,v).map(b)).concat(pt(sa(o/l)*l,e,l).filter(function(n){return s(n%a)>i}).map(k)).concat(pt(sa(c/p)*p,h,p).filter(function(n){return s(n%v)>i}).map(d))}var e,o,t,r,h,c,u,f,l=10,p=l,a=90,v=360,k,d,w,b,y=2.5;return n.lines=function(){return g().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[w(r).concat(b(u).slice(1),w(t).reverse().slice(1),b(f).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.extentMajor(t).extentMinor(t):n.extentMinor()},n.extentMajor=function(i){return arguments.length?(r=+i[0][0],t=+i[1][0],f=+i[0][1],u=+i[1][1],r>t&&(i=r,r=t,t=i),f>u&&(i=f,f=u,u=i),n.precision(y)):[[r,f],[t,u]]},n.extentMinor=function(t){return arguments.length?(o=+t[0][0],e=+t[1][0],c=+t[0][1],h=+t[1][1],o>e&&(t=o,o=e,e=t),c>h&&(t=c,c=h,h=t),n.precision(y)):[[o,c],[e,h]]},n.step=function(t){return arguments.length?n.stepMajor(t).stepMinor(t):n.stepMinor()},n.stepMajor=function(t){return arguments.length?(a=+t[0],v=+t[1],n):[a,v]},n.stepMinor=function(t){return arguments.length?(l=+t[0],p=+t[1],n):[l,p]},n.precision=function(i){return arguments.length?(y=+i,k=vht(c,h,90),d=yht(o,e,y),w=vht(f,u,90),b=yht(r,t,y),n):y},n.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function fai(){return pht()()}function eai(n,i){var e=n[0]*u,o=n[1]*u,s=i[0]*u,h=i[1]*u,c=r(o),p=t(o),l=r(h),w=t(h),b=c*r(e),k=c*t(e),g=l*r(s),nt=l*t(s),f=2*kt(d(got(h-o)+c*l*got(s-e))),v=t(f),y=f?function(n){var i=t(n*=f)/v,r=t(f-n)/v,u=r*b+i*g,e=r*k+i*nt,o=r*p+i*w;return[ht(e,u)*a,ht(o,d(u*u+e*e))*a]}:function(){return[e*a,o*a]};return y.distance=f,y}function du(n){return n}function oai(){ir.point=sai}function sai(n,t){ir.point=kht;wht=bd=n;bht=kd=t}function kht(n,t){wd.add(kd*n-bd*t);bd=n;kd=t}function hai(){kht(wht,bht)}function cai(n,t){n<fe&&(fe=n);n>fs&&(fs=n);t<vv&&(vv=t);t>yv&&(yv=t)}function gu(n,t){dd+=n;gd+=t;++es}function nct(){ri.point=lai}function lai(n,t){ri.point=aai;gu(bi=n,ki=t)}function aai(n,t){var r=n-bi,u=t-ki,i=d(r*r+u*u);wv+=i*(bi+n)/2;bv+=i*(ki+t)/2;ee+=i;gu(bi=n,ki=t)}function tct(){ri.point=gu}function vai(){ri.point=pai}function yai(){ict(dht,ght)}function pai(n,t){ri.point=ict;gu(dht=bi=n,ght=ki=t)}function ict(n,t){var r=n-bi,u=t-ki,i=d(r*r+u*u);wv+=i*(bi+n)/2;bv+=i*(ki+t)/2;ee+=i;i=ki*n-bi*t;ng+=i*(bi+n);tg+=i*(ki+t);os+=i*3;gu(bi=n,ki=t)}function rct(n){this._context=n}function wai(n,t){oe.point=ect;uct=ss=n;fct=hs=t}function ect(n,t){ss-=n;hs-=t;kv.add(d(ss*ss+hs*hs));ss=n;hs=t}function oct(){this._string=[]}function sct(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function bai(n,t){function i(n){return n&&(typeof r=="function"&&f.pointRadius(+r.apply(this,arguments)),hi(n,u(f))),f.result()}var r=4.5,u,f;return i.area=function(n){return hi(n,u(ir)),ir.result()},i.measure=function(n){return hi(n,u(oe)),oe.result()},i.bounds=function(n){return hi(n,u(pv)),pv.result()},i.centroid=function(n){return hi(n,u(ri)),ri.result()},i.projection=function(t){return arguments.length?(u=t==null?(n=null,du):(n=t).stream,i):n},i.context=function(n){return arguments.length?(f=n==null?(t=null,new oct):new rct(t=n),typeof r!="function"&&f.pointRadius(r),i):t},i.pointRadius=function(n){return arguments.length?(r=typeof n=="function"?n:(f.pointRadius(+n),+n),i):r},i.projection(n).context(t)}function kai(n){return{stream:cs(n)}}function cs(n){return function(t){var i=new rg;for(var r in n)i[r]=n[r];return i.stream=t,i}}function rg(){}function ug(n,t,i){var r=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),r!=null&&n.clipExtent(null),hi(i,n.stream(pv)),t(pv.result()),r!=null&&n.clipExtent(r),n}function dv(n,t,i){return ug(n,function(i){var u=t[1][0]-t[0][0],f=t[1][1]-t[0][1],r=Math.min(u/(i[1][0]-i[0][0]),f/(i[1][1]-i[0][1])),e=+t[0][0]+(u-r*(i[1][0]+i[0][0]))/2,o=+t[0][1]+(f-r*(i[1][1]+i[0][1]))/2;n.scale(150*r).translate([e,o])},i)}function fg(n,t,i){return dv(n,[[0,0],t],i)}function eg(n,t,i){return ug(n,function(i){var u=+t,r=u/(i[1][0]-i[0][0]),f=(u-r*(i[1][0]+i[0][0]))/2,e=-r*i[0][1];n.scale(150*r).translate([f,e])},i)}function og(n,t,i){return ug(n,function(i){var u=+t,r=u/(i[1][1]-i[0][1]),f=-r*i[0][0],e=(u-r*(i[1][1]+i[0][1]))/2;n.scale(150*r).translate([f,e])},i)}function cct(n,t){return+t?gai(n,t):dai(n)}function dai(n){return cs({point:function(t,i){t=n(t,i);this.stream.point(t[0],t[1])}})}function gai(n,t){function r(u,f,e,o,h,c,l,a,v,y,p,w,b,k){var it=l-u,rt=a-f,et=it*it+rt*rt;if(et>4*t&&b--){var nt=o+y,tt=h+p,g=c+w,ot=d(nt*nt+tt*tt+g*g),yt=kt(g/=ot),st=s(s(g)-1)<i||s(e-v)<i?(e+v)/2:ht(tt,nt),ct=n(st,yt),ut=ct[0],ft=ct[1],lt=ut-u,at=ft-f,vt=rt*lt-it*at;(vt*vt/et>t||s((it*lt+rt*at)/et-.5)>.3||o*y+h*p+c*w<hct)&&(r(u,f,e,o,h,c,ut,ft,st,nt/=ot,tt/=ot,g,b,k),k.point(ut,ft),r(ut,ft,st,nt,tt,g,l,a,v,y,p,w,b,k))}}return function(t){function d(i,r){i=n(i,r);t.point(i[0],i[1])}function c(){u=NaN;i.point=l;t.lineStart()}function l(i,c){var l=wu([i,c]),a=n(i,c);r(u,f,h,e,o,s,u=a[0],f=a[1],h=i,e=l[0],o=l[1],s=l[2],sg,t);t.point(u,f)}function a(){i.point=d;t.lineEnd()}function g(){c();i.point=nt;i.lineEnd=tt}function nt(n,t){l(v=n,t);y=u;p=f;w=e;b=o;k=s;i.point=l}function tt(){r(u,f,h,e,o,s,y,p,v,w,b,k,sg,t);i.lineEnd=a;a()}var v,y,p,w,b,k,h,u,f,e,o,s,i={point:d,lineStart:c,lineEnd:a,polygonStart:function(){t.polygonStart();i.lineStart=g},polygonEnd:function(){t.polygonEnd();i.lineStart=c}};return i}}function nvi(n){return cs({point:function(t,i){var r=n(t,i);return this.stream.point(r[0],r[1])}})}function tvi(n,t,i){function r(r,u){return[t+n*r,i-n*u]}return r.invert=function(r,u){return[(r-t)/n,(i-u)/n]},r}function act(n,i,u,f){function a(n,t){return[s*n-h*t+i,u-h*n-s*t]}var e=r(f),o=t(f),s=e*n,h=o*n,c=e/n,l=o/n,v=(o*u-e*i)/n,y=(o*i+e*u)/n;return a.invert=function(n,t){return[c*n-l*t+v,y-l*n-c*t]},a}function rr(n){return hg(function(){return n})()}function hg(n){function t(n){return st(n[0]*u,n[1]*u)}function ct(n){return n=st.invert(n[0],n[1]),n&&[n[0]*a,n[1]*a]}function i(){var n=act(s,0,0,f).apply(null,o(nt,tt)),t=(f?act:tvi)(s,k-n[0],g-n[1],f);return ft=ld(it,rt,ut),w=hd(o,t),st=hd(ft,w),ot=cct(w,et),r()}function r(){return b=ht=null,t}var o,s=150,k=480,g=250,nt=0,tt=0,it=0,rt=0,ut=0,ft,f=0,h=null,c=ev,e=null,l,v,y,p=du,et=.5,ot,w,st,b,ht;return t.stream=function(n){return b&&ht===n?b:b=lct(nvi(ft)(c(ot(p(ht=n)))))},t.preclip=function(n){return arguments.length?(c=n,h=undefined,r()):c},t.postclip=function(n){return arguments.length?(p=n,e=l=v=y=null,r()):p},t.clipAngle=function(n){return arguments.length?(c=+n?eht(h=n*u):(h=null,ev),r()):h*a},t.clipExtent=function(n){return arguments.length?(p=n==null?(e=l=v=y=null,du):ov(e=+n[0][0],l=+n[0][1],v=+n[1][0],y=+n[1][1]),r()):e==null?null:[[e,l],[v,y]]},t.scale=function(n){return arguments.length?(s=+n,i()):s},t.translate=function(n){return arguments.length?(k=+n[0],g=+n[1],i()):[k,g]},t.center=function(n){return arguments.length?(nt=n[0]%360*u,tt=n[1]%360*u,i()):[nt*a,tt*a]},t.rotate=function(n){return arguments.length?(it=n[0]%360*u,rt=n[1]%360*u,ut=n.length>2?n[2]%360*u:0,i()):[it*a,rt*a,ut*a]},t.angle=function(n){return arguments.length?(f=n%360*u,i()):f*a},t.precision=function(n){return arguments.length?(ot=cct(w,et=n*n),r()):d(et)},t.fitExtent=function(n,i){return dv(t,n,i)},t.fitSize=function(n,i){return fg(t,n,i)},t.fitWidth=function(n,i){return eg(t,n,i)},t.fitHeight=function(n,i){return og(t,n,i)},function(){return o=n.apply(this,arguments),t.invert=o.invert&&ct,i()}}function cg(n){var t=0,i=o/3,r=hg(n),f=r(t,i);return f.parallels=function(n){return arguments.length?r(t=n[0]*u,i=n[1]*u):[t*a,i*a]},f}function ivi(n){function u(n,r){return[n*i,t(r)/i]}var i=r(n);return u.invert=function(n,t){return[n/i,kt(t*i)]},u}function vct(n,u){function c(n,i){var u=d(e-2*f*t(i))/f;return[u*t(n*=f),h-u*r(n)]}var o=t(n),f=(o+t(u))/2,e,h;return s(f)<i?ivi(n):(e=1+o*(2*f-o),h=d(e)/f,c.invert=function(n,t){var i=h-t;return[ht(n,s(i))/f*ns(i),kt((e-(n*n+i*i)*f*f)/(2*f))]},c)}function gv(){return cg(vct).scale(155.424).center([0,33.6442])}function yct(){return gv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function rvi(n){var t=n.length;return{point:function(i,r){for(var u=-1;++u<t;)n[u].point(i,r)},sphere:function(){for(var i=-1;++i<t;)n[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)n[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)n[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)n[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)n[i].polygonEnd()}}}function uvi(){function n(n){var t=n[0],i=n[1];return f=null,(h.point(t,i),f)||(c.point(t,i),f)||(l.point(t,i),f)}function a(){return e=o=null,n}var e,o,t=yct(),h,r=gv().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c,u=gv().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,f,s={point:function(n,t){f=[n,t]}};return n.invert=function(n){var e=t.scale(),o=t.translate(),i=(n[0]-o[0])/e,f=(n[1]-o[1])/e;return(f>=.12&&f<.234&&i>=-.425&&i<-.214?r:f>=.166&&f<.234&&i>=-.214&&i<-.115?u:t).invert(n)},n.stream=function(n){return e&&o===n?e:e=rvi([t.stream(o=n),r.stream(n),u.stream(n)])},n.precision=function(n){return arguments.length?(t.precision(n),r.precision(n),u.precision(n),a()):t.precision()},n.scale=function(i){return arguments.length?(t.scale(i),r.scale(i*.35),u.scale(i),n.translate(t.translate())):t.scale()},n.translate=function(n){if(!arguments.length)return t.translate();var f=t.scale(),e=+n[0],o=+n[1];return h=t.translate(n).clipExtent([[e-.455*f,o-.238*f],[e+.455*f,o+.238*f]]).stream(s),c=r.translate([e-.307*f,o+.201*f]).clipExtent([[e-.425*f+i,o+.12*f+i],[e-.214*f-i,o+.234*f-i]]).stream(s),l=u.translate([e-.205*f,o+.212*f]).clipExtent([[e-.214*f+i,o+.166*f+i],[e-.115*f-i,o+.234*f-i]]).stream(s),a()},n.fitExtent=function(t,i){return dv(n,t,i)},n.fitSize=function(t,i){return fg(n,t,i)},n.fitWidth=function(t,i){return eg(n,t,i)},n.fitHeight=function(t,i){return og(n,t,i)},n.scale(1070)}function pct(n){return function(i,u){var o=r(i),f=r(u),e=n(o*f);return[e*f*t(i),e*t(u)]}}function ls(n){return function(i,u){var f=d(i*i+u*u),e=n(f),o=t(e),s=r(e);return[ht(i*o,f*s),kt(f&&u*o/f)]}}function fvi(){return rr(ny).scale(124.75).clipAngle(180-.001)}function evi(){return rr(ty).scale(79.4188).clipAngle(180-.001)}function as(n,t){return[n,ha(bk((y+t)/2))]}function ovi(){return wct(as).scale(961/yt)}function wct(n){function e(){var e=o*s(),h=t(dst(t.rotate()).invert([0,0]));return l(i==null?[[h[0]-e,h[1]-e],[h[0]+e,h[1]+e]]:n===as?[[Math.max(h[0]-e,i),r],[Math.min(h[0]+e,u),f]]:[[i,Math.max(h[1]-e,r)],[u,Math.min(h[1]+e,f)]])}var t=rr(n),h=t.center,s=t.scale,c=t.translate,l=t.clipExtent,i=null,r,u,f;return t.scale=function(n){return arguments.length?(s(n),e()):s()},t.translate=function(n){return arguments.length?(c(n),e()):c()},t.center=function(n){return arguments.length?(h(n),e()):h()},t.clipExtent=function(n){return arguments.length?(n==null?i=r=u=f=null:(i=+n[0][0],r=+n[0][1],u=+n[1][0],f=+n[1][1]),e()):i==null?null:[[i,r],[u,f]]},e()}function iy(n){return bk((y+n)/2)}function bct(n,u){function h(n,u){e>0?u<-y+i&&(u=-y+i):u>y-i&&(u=y-i);var o=e/wk(iy(u),f);return[o*t(f*n),e-o*r(f*n)]}var o=r(n),f=n===u?t(n):ha(o/r(u))/ha(iy(u)/iy(n)),e=o*wk(iy(n),f)/f;return f?(h.invert=function(n,t){var i=e-t,r=ns(f)*d(n*n+i*i);return[ht(n,s(i))/f*ns(i),2*gf(wk(e/r,1/f))-y]},h):as}function svi(){return cg(bct).scale(109.5).parallels([30,30])}function vs(n,t){return[n,t]}function hvi(){return rr(vs).scale(152.63)}function kct(n,u){function h(n,i){var u=e-i,o=f*n;return[u*t(o),e-u*r(o)]}var o=r(n),f=n===u?t(n):(o-r(u))/(u-n),e=o/f+n;return s(f)<i?vs:(h.invert=function(n,t){var i=e-t;return[ht(n,s(i))/f*ns(i),e-ns(f)*d(n*n+i*i)]},h)}function cvi(){return cg(kct).scale(131.154).center([0,13.9389])}function lg(n,i){var u=r(i),f=r(n)*u;return[u*t(n)/f,t(i)/f]}function lvi(){return rr(lg).scale(144.049).clipAngle(60)}function ry(n,t,i,r){return n===1&&t===1&&i===0&&r===0?du:cs({point:function(u,f){this.stream.point(u*n+i,f*t+r)}})}function avi(){function i(){return v=y=null,t}var n=1,r=0,u=0,f=1,e=1,o=du,s=null,h,c,l,a=du,v,y,t;return t={stream:function(n){return v&&y===n?v:v=o(a(y=n))},postclip:function(n){return arguments.length?(a=n,s=h=c=l=null,i()):a},clipExtent:function(n){return arguments.length?(a=n==null?(s=h=c=l=null,du):ov(s=+n[0][0],h=+n[0][1],c=+n[1][0],l=+n[1][1]),i()):s==null?null:[[s,h],[c,l]]},scale:function(t){return arguments.length?(o=ry((n=+t)*f,n*e,r,u),i()):n},translate:function(t){return arguments.length?(o=ry(n*f,n*e,r=+t[0],u=+t[1]),i()):[r,u]},reflectX:function(t){return arguments.length?(o=ry(n*(f=t?-1:1),n*e,r,u),i()):f<0},reflectY:function(t){return arguments.length?(o=ry(n*f,n*(e=t?-1:1),r,u),i()):e<0},fitExtent:function(n,i){return dv(t,n,i)},fitSize:function(n,i){return fg(t,n,i)},fitWidth:function(n,i){return eg(t,n,i)},fitHeight:function(n,i){return og(t,n,i)}}}function ag(n,t){var i=t*t,r=i*i;return[n*(.8707-.131979*i+r*(-.013791+r*(.003971*i-.001529*r))),t*(1.007226+i*(.015085+r*(-.044475+.028874*i-.005916*r)))]}function vvi(){return rr(ag).scale(175.295)}function vg(n,i){return[r(i)*t(n),t(i)]}function yvi(){return rr(vg).scale(249.5).clipAngle(90+i)}function yg(n,i){var u=r(i),f=1+r(n)*u;return[u*t(n)/f,t(i)/f]}function pvi(){return rr(yg).scale(250).clipAngle(142)}function pg(n,t){return[ha(bk((y+t)/2)),-n]}function wvi(){var n=wct(pg),i=n.center,t=n.rotate;return n.center=function(n){return arguments.length?i([-n[1],n[0]]):(n=i(),[n[1],-n[0]])},n.rotate=function(n){return arguments.length?t([n[0],n[1],n.length>2?n[2]+90:90]):(n=t(),[n[0],n[1],n[2]-90])},t([0,0,90]).scale(159.155)}function bvi(n,t){return n.parent===t.parent?1:2}function kvi(n){return n.reduce(dvi,0)/n.length}function dvi(n,t){return n+t.x}function gvi(n){return 1+n.reduce(nyi,0)}function nyi(n,t){return Math.max(n,t.y)}function tyi(n){for(var t;t=n.children;)n=t[0];return n}function iyi(n){for(var t;t=n.children;)n=t[t.length-1];return n}function ryi(){function n(n){var f,h=0;n.eachAfter(function(n){var t=n.children;t?(n.x=kvi(t),n.y=gvi(t)):(n.x=f?h+=r(n,f):0,n.y=0,f=n)});var e=tyi(n),o=iyi(n),s=e.x-r(e,o)/2,c=o.x+r(o,e)/2;return n.eachAfter(u?function(r){r.x=(r.x-n.x)*t;r.y=(n.y-r.y)*i}:function(r){r.x=(r.x-s)/(c-s)*t;r.y=(1-(n.y?r.y/n.y:1))*i})}var r=bvi,t=1,i=1,u=!1;return n.separation=function(t){return arguments.length?(r=t,n):r},n.size=function(r){return arguments.length?(u=!1,t=+r[0],i=+r[1],n):u?null:[t,i]},n.nodeSize=function(r){return arguments.length?(u=!0,t=+r[0],i=+r[1],n):u?[t,i]:null},n}function uyi(n){var t=0,i=n.children,r=i&&i.length;if(r)while(--r>=0)t+=i[r].value;else t=1;n.value=t}function fyi(){return this.eachAfter(uyi)}function eyi(n){var t=this,f,i=[t],r,u,e;do for(f=i.reverse(),i=[];t=f.pop();)if(n(t),r=t.children,r)for(u=0,e=r.length;u<e;++u)i.push(r[u]);while(i.length);return this}function oyi(n){for(var t=this,u=[t],i,r;t=u.pop();)if(n(t),i=t.children,i)for(r=i.length-1;r>=0;--r)u.push(i[r]);return this}function syi(n){for(var t=this,u=[t],f=[],i,r,e;t=u.pop();)if(f.push(t),i=t.children,i)for(r=0,e=i.length;r<e;++r)u.push(i[r]);while(t=f.pop())n(t);return this}function hyi(n){return this.eachAfter(function(t){for(var r=+n(t.data)||0,i=t.children,u=i&&i.length;--u>=0;)r+=i[u].value;t.value=r})}function cyi(n){return this.eachBefore(function(t){t.children&&t.children.sort(n)})}function lyi(n){for(var t=this,r=ayi(t,n),i=[t],u;t!==r;)t=t.parent,i.push(t);for(u=i.length;n!==r;)i.splice(u,0,n),n=n.parent;return i}function ayi(n,t){if(n===t)return n;var i=n.ancestors(),r=t.ancestors(),u=null;for(n=i.pop(),t=r.pop();n===t;)u=n,n=i.pop(),t=r.pop();return u}function vyi(){for(var n=this,t=[n];n=n.parent;)t.push(n);return t}function yyi(){var n=[];return this.each(function(t){n.push(t)}),n}function pyi(){var n=[];return this.eachBefore(function(t){t.children||n.push(t)}),n}function wyi(){var n=this,t=[];return n.each(function(i){i!==n&&t.push({source:i.parent,target:i})}),t}function wg(n,t){var u=new se(n),h=+n.value&&(u.value=n.value),i,s=[u],f,e,r,o;for(t==null&&(t=kyi);i=s.pop();)if(h&&(i.value=+i.data.value),(e=t(i.data))&&(o=e.length))for(i.children=new Array(o),r=o-1;r>=0;--r)s.push(f=i.children[r]=new se(e[r])),f.parent=i,f.depth=i.depth+1;return u.eachBefore(dct)}function byi(){return wg(this).eachBefore(dyi)}function kyi(n){return n.children}function dyi(n){n.data=n.data.data}function dct(n){var t=0;do n.height=t;while((n=n.parent)&&n.height<++t)}function se(n){this.data=n;this.depth=this.height=0;this.parent=null}function gyi(n){for(var t=n.length,r,i;t;)i=Math.random()*t--|0,r=n[t],n[t]=n[i],n[i]=r;return n}function nlt(n){for(var t=0,f=(n=gyi(gct.call(n))).length,u=[],r,i;t<f;)r=n[t],i&&tlt(i,r)?++t:(i=tpi(u=npi(u,r)),t=0);return i}function npi(n,t){var i,r;if(bg(t,n))return[t];for(i=0;i<n.length;++i)if(uy(t,n[i])&&bg(ys(n[i],t),n))return[n[i],t];for(i=0;i<n.length-1;++i)for(r=i+1;r<n.length;++r)if(uy(ys(n[i],n[r]),t)&&uy(ys(n[i],t),n[r])&&uy(ys(n[r],t),n[i])&&bg(ilt(n[i],n[r],t),n))return[n[i],n[r],t];throw new Error;}function uy(n,t){var i=n.r-t.r,r=t.x-n.x,u=t.y-n.y;return i<0||i*i<r*r+u*u}function tlt(n,t){var i=n.r-t.r+1e-6,r=t.x-n.x,u=t.y-n.y;return i>0&&i*i>r*r+u*u}function bg(n,t){for(var i=0;i<t.length;++i)if(!tlt(n,t[i]))return!1;return!0}function tpi(n){switch(n.length){case 1:return ipi(n[0]);case 2:return ys(n[0],n[1]);case 3:return ilt(n[0],n[1],n[2])}}function ipi(n){return{x:n.x,y:n.y,r:n.r}}function ys(n,t){var f=n.x,e=n.y,o=n.r,s=t.x,h=t.y,c=t.r,i=s-f,r=h-e,l=c-o,u=Math.sqrt(i*i+r*r);return{x:(f+s+i/u*l)/2,y:(e+h+r/u*l)/2,r:(u+o+c)/2}}function ilt(n,t,i){var u=n.x,f=n.y,r=n.r,a=t.x,v=t.y,y=t.r,p=i.x,w=i.y,b=i.r,k=u-a,d=u-p,g=f-v,nt=f-w,rt=y-r,ut=b-r,ft=u*u+f*f-r*r,et=ft-a*a-v*v+y*y,ot=ft-p*p-w*w+b*b,e=d*g-k*nt,o=(g*ot-nt*et)/(e*2)-u,s=(nt*rt-g*ut)/e,h=(d*et-k*ot)/(e*2)-f,c=(k*ut-d*rt)/e,tt=s*s+c*c-1,l=2*(r+o*s+h*c),st=o*o+h*h-r*r,it=-(tt?(l+Math.sqrt(l*l-4*tt*st))/(2*tt):st/l);return{x:u+o+s*it,y:f+h+c*it,r:it}}function rlt(n,t,i){var o=n.x-t.x,r,u,s=n.y-t.y,h,f,e=o*o+s*s;e?(u=t.r+i.r,u*=u,f=n.r+i.r,f*=f,u>f?(r=(e+f-u)/(2*e),h=Math.sqrt(Math.max(0,f/e-r*r)),i.x=n.x-r*o-h*s,i.y=n.y-r*s+h*o):(r=(e+u-f)/(2*e),h=Math.sqrt(Math.max(0,u/e-r*r)),i.x=t.x+r*o-h*s,i.y=t.y+r*s+h*o)):(i.x=t.x+i.r,i.y=t.y)}function ult(n,t){var i=n.r+t.r-1e-6,r=t.x-n.x,u=t.y-n.y;return i>0&&i*i>r*r+u*u}function flt(n){var t=n._,i=n.next._,r=t.r+i.r,u=(t.x*i.r+i.x*t.r)/r,f=(t.y*i.r+i.y*t.r)/r;return u*u+f*f}function fy(n){this._=n;this.next=null;this.previous=null}function elt(n){if(!(o=n.length))return 0;var t,i,r,o,s,l,u,f,e,h,c;if(t=n[0],t.x=0,t.y=0,!(o>1))return t.r;if(i=n[1],t.x=-i.r,i.x=t.r,i.y=0,!(o>2))return t.r+i.r;rlt(i,t,r=n[2]);t=new fy(t);i=new fy(i);r=new fy(r);t.next=r.previous=i;i.next=t.previous=r;r.next=i.previous=t;n:for(u=3;u<o;++u){rlt(t._,i._,r=n[u]);r=new fy(r);f=i.next;e=t.previous;h=i._.r;c=t._.r;do if(h<=c){if(ult(f._,r._)){i=f;t.next=i;i.previous=t;--u;continue n}h+=f._.r;f=f.next}else{if(ult(e._,r._)){t=e;t.next=i;i.previous=t;--u;continue n}c+=e._.r;e=e.previous}while(f!==e.next);for(r.previous=t,r.next=i,t.next=i.previous=i=r,s=flt(t);(r=r.next)!==i;)(l=flt(r))<s&&(t=r,s=l);i=t.next}for(t=[i._],r=i;(r=r.next)!==i;)t.push(r._);for(r=nlt(t),u=0;u<o;++u)t=n[u],t.x-=r.x,t.y-=r.y;return r.r}function rpi(n){return elt(n),n}function upi(n){return n==null?null:ey(n)}function ey(n){if(typeof n!="function")throw new Error;return n}function nf(){return 0}function he(n){return function(){return n}}function fpi(n){return Math.sqrt(n.value)}function epi(){function n(n){return n.x=t/2,n.y=i/2,r?n.eachBefore(olt(r)).eachAfter(kg(u,.5)).eachBefore(slt(1)):n.eachBefore(olt(fpi)).eachAfter(kg(nf,1)).eachAfter(kg(u,n.r/Math.min(t,i))).eachBefore(slt(Math.min(t,i)/(2*n.r))),n}var r=null,t=1,i=1,u=nf;return n.radius=function(t){return arguments.length?(r=upi(t),n):r},n.size=function(r){return arguments.length?(t=+r[0],i=+r[1],n):[t,i]},n.padding=function(t){return arguments.length?(u=typeof t=="function"?t:he(+t),n):u},n}function olt(n){return function(t){t.children||(t.r=Math.max(0,+n(t)||0))}}function kg(n,t){return function(i){if(u=i.children){var u,r,e=u.length,f=n(i)*t||0,o;if(f)for(r=0;r<e;++r)u[r].r+=f;if(o=elt(u),f)for(r=0;r<e;++r)u[r].r-=f;i.r=o+f}}}function slt(n){return function(t){var i=t.parent;t.r*=n;i&&(t.x=i.x+n*t.x,t.y=i.y+n*t.y)}}function hlt(n){n.x0=Math.round(n.x0);n.y0=Math.round(n.y0);n.x1=Math.round(n.x1);n.y1=Math.round(n.y1)}function ps(n,t,i,r,u){for(var e=n.children,f,o=-1,s=e.length,h=n.value&&(r-t)/n.value;++o<s;)f=e[o],f.y0=i,f.y1=u,f.x0=t,f.x1=t+=f.value*h}function opi(){function n(n){var e=n.height+1;return n.x0=n.y0=t,n.x1=r,n.y1=i/e,n.eachBefore(f(i,e)),u&&n.eachBefore(hlt),n}function f(n,i){return function(r){r.children&&ps(r,r.x0,n*(r.depth+1)/i,r.x1,n*(r.depth+2)/i);var u=r.x0,f=r.y0,e=r.x1-t,o=r.y1-t;e<u&&(u=e=(u+e)/2);o<f&&(f=o=(f+o)/2);r.x0=u;r.y0=f;r.x1=e;r.y1=o}}var r=1,i=1,t=0,u=!1;return n.round=function(t){return arguments.length?(u=!!t,n):u},n.size=function(t){return arguments.length?(r=+t[0],i=+t[1],n):[r,i]},n.padding=function(i){return arguments.length?(t=+i,n):t},n}function hpi(n){return n.id}function cpi(n){return n.parentId}function lpi(){function n(n){for(var h,s=n.length,e,o,f,a=new Array(s),u,c,l={},r=0;r<s;++r)h=n[r],f=a[r]=new se(h),(u=t(h,r,n))!=null&&(u+="")&&(c=clt+(f.id=u),l[c]=c in l?llt:f);for(r=0;r<s;++r)if(f=a[r],u=i(n[r],r,n),u!=null&&(u+="")){if(o=l[clt+u],!o)throw new Error("missing: "+u);if(o===llt)throw new Error("ambiguous: "+u);o.children?o.children.push(f):o.children=[f];f.parent=o}else{if(e)throw new Error("multiple roots");e=f}if(!e)throw new Error("no root");if(e.parent=spi,e.eachBefore(function(n){n.depth=n.parent.depth+1;--s}).eachBefore(dct),e.parent=null,s>0)throw new Error("cycle");return e}var t=hpi,i=cpi;return n.id=function(i){return arguments.length?(t=ey(i),n):t},n.parentId=function(t){return arguments.length?(i=ey(t),n):i},n}function api(n,t){return n.parent===t.parent?1:2}function dg(n){var t=n.children;return t?t[0]:n.t}function gg(n){var t=n.children;return t?t[t.length-1]:n.t}function vpi(n,t,i){var r=i/(t.i-n.i);t.c-=r;t.s+=i;n.c+=r;t.z+=i;t.m+=i}function ypi(n){for(var i=0,f=0,r=n.children,u=r.length,t;--u>=0;)t=r[u],t.z+=i,t.m+=i,i+=t.s+(f+=t.c)}function ppi(n,t,i){return n.a.parent===t.parent?n.a:i}function oy(n,t){this._=n;this.parent=null;this.children=null;this.A=null;this.a=this;this.z=0;this.m=0;this.c=0;this.s=0;this.t=null;this.i=t}function wpi(n){for(var r=new oy(n,0),i,f=[r],e,u,t,o;i=f.pop();)if(u=i._.children)for(i.children=new Array(o=u.length),t=o-1;t>=0;--t)f.push(e=i.children[t]=new oy(u[t],t)),e.parent=i;return(r.parent=new oy(null,0)).children=[r],r}function bpi(){function n(n){var c=wpi(n);if(c.eachAfter(f),c.parent.m=-c.z,c.eachBefore(e),u)n.eachBefore(s);else{var o=n,h=n,l=n;n.eachBefore(function(n){n.x<o.x&&(o=n);n.x>h.x&&(h=n);n.depth>l.depth&&(l=n)});var a=o===h?1:t(o,h)/2,v=a-o.x,y=i/(h.x+a+v),p=r/(l.depth||1);n.eachBefore(function(n){n.x=(n.x+v)*y;n.y=n.depth*p})}return n}function f(n){var r=n.children,f=n.parent.children,i=n.i?f[n.i-1]:null,u;r?(ypi(n),u=(r[0].z+r[r.length-1].z)/2,i?(n.z=i.z+t(n._,i._),n.m=n.z-u):n.z=u):i&&(n.z=i.z+t(n._,i._));n.parent.A=o(n,i,n.parent.A||f[0])}function e(n){n._.x=n.z+n.parent.m;n.m+=n.parent.m}function o(n,i,r){if(i){for(var u=n,e=n,f=i,o=u.parent.children[0],h=u.m,c=e.m,l=f.m,a=o.m,s;f=gg(f),u=dg(u),f&&u;)o=dg(o),e=gg(e),e.a=n,s=f.z+l-u.z-h+t(f._,u._),s>0&&(vpi(ppi(f,n,r),n,s),h+=s,c+=s),l+=f.m,h+=u.m,a+=o.m,c+=e.m;f&&!gg(e)&&(e.t=f,e.m+=l-c);u&&!dg(o)&&(o.t=u,o.m+=h-a,r=n)}return r}function s(n){n.x*=i;n.y=n.depth*r}var t=api,i=1,r=1,u=null;return n.separation=function(i){return arguments.length?(t=i,n):t},n.size=function(t){return arguments.length?(u=!1,i=+t[0],r=+t[1],n):u?null:[i,r]},n.nodeSize=function(t){return arguments.length?(u=!0,i=+t[0],r=+t[1],n):u?[i,r]:null},n}function sy(n,t,i,r,u){for(var e=n.children,f,o=-1,s=e.length,h=n.value&&(u-i)/n.value;++o<s;)f=e[o],f.x0=t,f.x1=r,f.y0=i,f.y1=i+=f.value*h}function alt(n,t,i,r,u,f){for(var tt=[],p=t.children,w,s,b=0,o=0,k=p.length,l,a,h=t.value,e,v,y,d,g,nt,c;b<k;){l=u-i;a=f-r;do e=p[o++].value;while(!e&&o<k);for(v=y=e,nt=Math.max(a/l,l/a)/(h*n),c=e*e*nt,g=Math.max(y/c,c/v);o<k;++o){if(e+=s=p[o].value,s<v&&(v=s),s>y&&(y=s),c=e*e*nt,d=Math.max(y/c,c/v),d>g){e-=s;break}g=d}tt.push(w={value:e,dice:l<a,children:p.slice(b,o)});w.dice?ps(w,i,r,u,h?r+=a*e/h:f):sy(w,i,r,h?i+=l*e/h:u,f);h-=e;b=o}return tt}function kpi(){function n(n){return n.x0=n.y0=0,n.x1=r,n.y1=u,n.eachBefore(l),f=[0],i&&n.eachBefore(hlt),n}function l(n){var i=f[n.depth],r=n.x0+i,u=n.y0+i,l=n.x1-i,a=n.y1-i;l<r&&(r=l=(r+l)/2);a<u&&(u=a=(u+a)/2);n.x0=r;n.y0=u;n.x1=l;n.y1=a;n.children&&(i=f[n.depth+1]=e(n)/2,r+=c(n)-i,u+=o(n)-i,l-=s(n)-i,a-=h(n)-i,l<r&&(r=l=(r+l)/2),a<u&&(u=a=(u+a)/2),t(n,r,u,l,a))}var t=tn,i=!1,r=1,u=1,f=[0],e=nf,o=nf,s=nf,h=nf,c=nf;return n.round=function(t){return arguments.length?(i=!!t,n):i},n.size=function(t){return arguments.length?(r=+t[0],u=+t[1],n):[r,u]},n.tile=function(i){return arguments.length?(t=ey(i),n):t},n.padding=function(t){return arguments.length?n.paddingInner(t).paddingOuter(t):n.paddingInner()},n.paddingInner=function(t){return arguments.length?(e=typeof t=="function"?t:he(+t),n):e},n.paddingOuter=function(t){return arguments.length?n.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):n.paddingTop()},n.paddingTop=function(t){return arguments.length?(o=typeof t=="function"?t:he(+t),n):o},n.paddingRight=function(t){return arguments.length?(s=typeof t=="function"?t:he(+t),n):s},n.paddingBottom=function(t){return arguments.length?(h=typeof t=="function"?t:he(+t),n):h},n.paddingLeft=function(t){return arguments.length?(c=typeof t=="function"?t:he(+t),n):c},n}function dpi(n,t,i,r,u){function o(n,t,i,r,u,e,h){var a,y,l,v,b,k;if(n>=t-1){a=s[n];a.x0=r;a.y0=u;a.x1=e;a.y1=h;return}for(var d=f[n],p=i/2+d,c=n+1,w=t-1;c<w;)y=c+w>>>1,f[y]<p?c=y+1:w=y;p-f[c-1]<f[c]-p&&n+1<c&&--c;l=f[c]-d;v=i-l;e-r>h-u?(b=(r*v+e*l)/i,o(n,c,l,r,u,b,h),o(c,t,v,b,u,e,h)):(k=(u*v+h*l)/i,o(n,c,l,r,u,e,k),o(c,t,v,r,k,e,h))}var s=n.children,e,h=s.length,c,f=new Array(h+1);for(f[0]=c=e=0;e<h;++e)f[e+1]=c+=s[e].value;o(0,h,n.value,t,i,r,u)}function gpi(n,t,i,r,u){(n.depth&1?sy:ps)(n,t,i,r,u)}function nwi(n){for(var r=-1,u=n.length,i,t=n[u-1],f=0;++r<u;)i=t,t=n[r],f+=i[1]*t[0]-i[0]*t[1];return f/2}function twi(n){for(var f=-1,e=n.length,o=0,s=0,i,t=n[e-1],u,r=0;++f<e;)i=t,t=n[f],r+=u=i[0]*t[1]-t[0]*i[1],o+=(i[0]+t[0])*u,s+=(i[1]+t[1])*u;return r*=3,[o/r,s/r]}function iwi(n,t,i){return(t[0]-n[0])*(i[1]-n[1])-(t[1]-n[1])*(i[0]-n[0])}function rwi(n,t){return n[0]-t[0]||n[1]-t[1]}function ylt(n){for(var u=n.length,i=[0,1],t=2,r=2;r<u;++r){while(t>1&&iwi(n[i[t-2]],n[i[t-1]],n[r])<=0)--t;i[t++]=r}return i.slice(0,t)}function uwi(n){var t,r,i,e;if((r=n.length)<3)return null;for(i=new Array(r),e=new Array(r),t=0;t<r;++t)i[t]=[+n[t][0],+n[t][1],t];for(i.sort(rwi),t=0;t<r;++t)e[t]=[i[t][0],-i[t][1]];var u=ylt(i),f=ylt(e),s=f[0]===u[0],h=f[f.length-1]===u[u.length-1],o=[];for(t=u.length-1;t>=0;--t)o.push(n[i[u[t]][2]]);for(t=+s;t<f.length-h;++t)o.push(n[i[f[t]][2]]);return o}function fwi(n,t){for(var h=n.length,i=n[h-1],l=t[0],f=t[1],c=i[0],e=i[1],u,r,o=!1,s=0;s<h;++s)i=n[s],u=i[0],r=i[1],r>f!=e>f&&l<(c-u)*(f-r)/(e-r)+u&&(o=!o),c=u,e=r;return o}function ewi(n){for(var e=-1,o=n.length,t=n[o-1],i,r,u=t[0],f=t[1],s=0;++e<o;)i=u,r=f,t=n[e],u=t[0],f=t[1],i-=u,r-=f,s+=Math.sqrt(i*i+r*r);return s}function ce(){return Math.random()}function fn(n){function t(t){var e=t+"",f=i.get(e);if(!f){if(u!==un)return u;i.set(e,f=r.push(t))}return n[(f-1)%n.length]}var i=nr(),r=[],u=un;return n=n==null?[]:br.call(n),t.domain=function(n){if(!arguments.length)return r.slice();r=[];i=nr();for(var u=-1,o=n.length,f,e;++u<o;)i.has(e=(f=n[u])+"")||i.set(e,r.push(f));return t},t.range=function(i){return arguments.length?(n=br.call(i),t):n.slice()},t.unknown=function(n){return arguments.length?(u=n,t):u},t.copy=function(){return fn().domain(r).range(n).unknown(u)},t}function en(){function t(){var t=o().length,l=i[1]<i[0],n=i[+l],v=i[1-l],a;return u=(v-n)/Math.max(1,t-r+e*2),f&&(u=Math.floor(u)),n+=(v-n-u*(t-r))*h,s=u*(1-r),f&&(n=Math.round(n),s=Math.round(s)),a=pt(t).map(function(t){return n+u*t}),c(l?a.reverse():a)}var n=fn().unknown(undefined),o=n.domain,c=n.range,i=[0,1],u,s,f=!1,r=0,e=0,h=.5;return delete n.unknown,n.domain=function(n){return arguments.length?(o(n),t()):o()},n.range=function(n){return arguments.length?(i=[+n[0],+n[1]],t()):i.slice()},n.rangeRound=function(n){return i=[+n[0],+n[1]],f=!0,t()},n.bandwidth=function(){return s},n.step=function(){return u},n.round=function(n){return arguments.length?(f=!!n,t()):f},n.padding=function(n){return arguments.length?(r=e=Math.max(0,Math.min(1,n)),t()):r},n.paddingInner=function(n){return arguments.length?(r=Math.max(0,Math.min(1,n)),t()):r},n.paddingOuter=function(n){return arguments.length?(e=Math.max(0,Math.min(1,n)),t()):e},n.align=function(n){return arguments.length?(h=Math.max(0,Math.min(1,n)),t()):h},n.copy=function(){return en().domain(o()).range(i).round(f).paddingInner(r).paddingOuter(e).align(h)},t()}function klt(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return klt(t())},n}function bwi(){return klt(en().paddingInner(1))}function on(n){return function(){return n}}function dlt(n){return+n}function hn(n,t){return(t-=n=+n)?function(i){return(i-n)/t}:on(t)}function kwi(n){return function(t,i){var r=n(t=+t,i=+i);return function(n){return n<=t?0:n>=i?1:r(n)}}}function dwi(n){return function(t,i){var r=n(t=+t,i=+i);return function(n){return n<=0?t:n>=1?i:r(n)}}}function gwi(n,t,i,r){var u=n[0],e=n[1],f=t[0],o=t[1];return e<u?(u=i(e,u),f=r(o,f)):(u=i(u,e),f=r(f,o)),function(n){return f(u(n))}}function nbi(n,t,i,r){var f=Math.min(n.length,t.length)-1,e=new Array(f),o=new Array(f),u=-1;for(n[f]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++u<f;)e[u]=i(n[u],n[u+1]),o[u]=r(t[u],t[u+1]);return function(t){var i=ru(n,t,1,f)-1;return o[i](e[i](t))}}function hy(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp())}function cy(n,t){function u(){return s=Math.min(f.length,r.length)>2?nbi:gwi,h=c=null,i}function i(t){return(h||(h=s(f,r,o?kwi(n):n,e)))(+t)}var f=sn,r=sn,e=eo,o=!1,s,h,c;return i.invert=function(n){return(c||(c=s(r,f,hn,o?dwi(t):t)))(+n)},i.domain=function(n){return arguments.length?(f=rn.call(n,dlt),u()):f.slice()},i.range=function(n){return arguments.length?(r=br.call(n),u()):r.slice()},i.rangeRound=function(n){return r=br.call(n),e=rut,u()},i.clamp=function(n){return arguments.length?(o=!!n,u()):o},i.interpolate=function(n){return arguments.length?(e=n,u()):e},u()}function tbi(t,i,r){var f=t[0],e=t[t.length-1],o=uu(f,e,i==null?10:i),u,s;r=ko(r==null?",f":r);switch(r.type){case"s":return s=Math.max(Math.abs(f),Math.abs(e)),r.precision!=null||isNaN(u=yot(o,s))||(r.precision=u),n.formatPrefix(r,s);case"":case"e":case"g":case"p":case"r":r.precision!=null||isNaN(u=pot(o,Math.max(Math.abs(f),Math.abs(e))))||(r.precision=u-(r.type==="e"));break;case"f":case"%":r.precision!=null||isNaN(u=vot(o))||(r.precision=u-(r.type==="%")*2)}return n.format(r)}function ws(n){var t=n.domain;return n.ticks=function(n){var i=t();return pp(i[0],i[i.length-1],n==null?10:n)},n.tickFormat=function(n,i){return tbi(t(),n,i)},n.nice=function(i){i==null&&(i=10);var e=t(),o=0,s=e.length-1,u=e[o],f=e[s],r;return f<u&&(r=u,u=f,f=r,r=o,o=s,s=r),r=de(u,f,i),r>0?(u=Math.floor(u/r)*r,f=Math.ceil(f/r)*r,r=de(u,f,i)):r<0&&(u=Math.ceil(u*r)/r,f=Math.floor(f*r)/r,r=de(u,f,i)),r>0?(e[o]=Math.floor(u/r)*r,e[s]=Math.ceil(f/r)*r,t(e)):r<0&&(e[o]=Math.ceil(u*r)/r,e[s]=Math.floor(f*r)/r,t(e)),n},n}function glt(){var n=cy(hn,wt);return n.copy=function(){return hy(n,glt())},ws(n)}function nat(){function n(n){return+n}var t=[0,1];return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=rn.call(i,dlt),n):t.slice()},n.copy=function(){return nat().domain(t)},ws(n)}function tat(n,t){n=n.slice();var i=0,r=n.length-1,u=n[i],f=n[r],e;return f<u&&(e=i,i=r,r=e,e=u,u=f,f=e),n[i]=t.floor(u),n[r]=t.ceil(f),n}function ibi(n,t){return(t=Math.log(t/n))?function(i){return Math.log(i/n)/t}:on(t)}function rbi(n,t){return n<0?function(i){return-Math.pow(-t,i)*Math.pow(-n,1-i)}:function(i){return Math.pow(t,i)*Math.pow(n,1-i)}}function ubi(n){return isFinite(n)?+("1e"+n):n<0?0:n}function iat(n){return n===10?ubi:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}function rat(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}function uat(n){return function(t){return-n(-t)}}function fat(){function e(){return u=rat(t),r=iat(t),f()[0]<0&&(u=uat(u),r=uat(r)),i}var i=cy(ibi,rbi).domain([1,10]),f=i.domain,t=10,u=rat(10),r=iat(10);return i.base=function(n){return arguments.length?(t=+n,e()):t},i.domain=function(n){return arguments.length?(f(n),e()):f()},i.ticks=function(n){var v=f(),s=v[0],c=v[v.length-1],y;(y=c<s)&&(i=s,s=c,c=i);var i=u(s),h=u(c),a,e,o,p=n==null?10:+n,l=[];if(!(t%1)&&h-i<p){if(i=Math.round(i)-1,h=Math.round(h)+1,s>0){for(;i<h;++i)for(e=1,a=r(i);e<t;++e)if(o=a*e,!(o<s)){if(o>c)break;l.push(o)}}else for(;i<h;++i)for(e=t-1,a=r(i);e>=1;--e)if(o=a*e,!(o<s)){if(o>c)break;l.push(o)}}else l=pp(i,h,Math.min(h-i,p)).map(r);return y?l.reverse():l},i.tickFormat=function(f,e){if(e==null&&(e=t===10?".0e":","),typeof e!="function"&&(e=n.format(e)),f===Infinity)return e;f==null&&(f=10);var o=Math.max(1,t*f/i.ticks().length);return function(n){var i=n/r(Math.round(u(n)));return i*t<t-.5&&(i*=t),i<=o?e(n):""}},i.nice=function(){return f(tat(f(),{floor:function(n){return r(Math.floor(u(n)))},ceil:function(n){return r(Math.ceil(u(n)))}}))},i.copy=function(){return hy(i,fat().base(t))},i}function le(n,t){return n<0?-Math.pow(-n,t):Math.pow(n,t)}function cn(){function r(t,i){return(i=le(i,n)-(t=le(t,n)))?function(r){return(le(r,n)-t)/i}:on(i)}function u(t,i){return i=le(i,n)-(t=le(t,n)),function(r){return le(t+i*r,1/n)}}var n=1,t=cy(r,u),i=t.domain;return t.exponent=function(t){return arguments.length?(n=+t,i(i())):n},t.copy=function(){return hy(t,cn().exponent(n))},ws(t)}function fbi(){return cn().exponent(.5)}function eat(){function u(){var u=0,f=Math.max(1,r.length);for(t=new Array(f-1);++u<f;)t[u-1]=ge(n,u/f);return i}function i(n){if(!isNaN(n=+n))return r[ru(t,n)]}var n=[],r=[],t=[];return i.invertExtent=function(i){var u=r.indexOf(i);return u<0?[NaN,NaN]:[u>0?t[u-1]:n[0],u<t.length?t[u]:n[n.length-1]]},i.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var r=0,f=t.length,i;r<f;++r)(i=t[r],i==null||isNaN(i=+i))||n.push(i);return n.sort(iu),u()},i.range=function(n){return arguments.length?(r=br.call(n),u()):r.slice()},i.quantiles=function(){return t.slice()},i.copy=function(){return eat().domain(n).range(r)},i}function oat(){function i(i){if(i<=i)return f[ru(t,i,0,n)]}function e(){var f=-1;for(t=new Array(n);++f<n;)t[f]=((f+1)*u-(f-n)*r)/(n+1);return i}var r=0,u=1,n=1,t=[.5],f=[0,1];return i.domain=function(n){return arguments.length?(r=+n[0],u=+n[1],e()):[r,u]},i.range=function(t){return arguments.length?(n=(f=br.call(t)).length-1,e()):f.slice()},i.invertExtent=function(i){var e=f.indexOf(i);return e<0?[NaN,NaN]:e<1?[r,t[0]]:e>=n?[t[n-1],u]:[t[e-1],t[e]]},i.copy=function(){return oat().domain([r,u]).range(f)},ws(i)}function sat(){function i(i){if(i<=i)return t[ru(n,i,0,r)]}var n=[.5],t=[0,1],r=1;return i.domain=function(u){return arguments.length?(n=br.call(u),r=Math.min(n.length,t.length-1),i):n.slice()},i.range=function(u){return arguments.length?(t=br.call(u),r=Math.min(n.length,t.length-1),i):t.slice()},i.invertExtent=function(i){var r=t.indexOf(i);return[n[r-1],n[r]]},i.copy=function(){return sat().domain(n).range(t)},i}function g(n,t,i,r){function u(t){return n(t=new Date(+t)),t}return u.floor=u,u.ceil=function(i){return n(i=new Date(i-1)),t(i,1),n(i),i},u.round=function(n){var t=u(n),i=u.ceil(n);return n-t<i-n?t:i},u.offset=function(n,i){return t(n=new Date(+n),i==null?1:Math.floor(i)),n},u.range=function(i,r,f){var e=[],o;if(i=u.ceil(i),f=f==null?1:Math.floor(f),!(i<r)||!(f>0))return e;do e.push(o=new Date(+i)),t(i,f),n(i);while(o<i&&i<r);return e},u.filter=function(i){return g(function(t){if(t>=t)while(n(t),!i(t))t.setTime(t-1)},function(n,r){if(n>=n)if(r<0)while(++r<=0)while(t(n,-1),!i(n));else while(--r>=0)while(t(n,1),!i(n));})},i&&(u.count=function(t,r){return ly.setTime(+t),ay.setTime(+r),n(ly),n(ay),Math.floor(i(ly,ay))},u.every=function(n){return n=Math.floor(n),!isFinite(n)||!(n>0)?null:(n>1)?u.filter(r?function(t){return r(t)%n==0}:function(t){return u.count(0,t)%n==0}):u}),u}function tf(n){return g(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7);t.setHours(0,0,0,0)},function(n,t){n.setDate(n.getDate()+t*7)},function(n,t){return(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*ur)/lat})}function rf(n){return g(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7);t.setUTCHours(0,0,0,0)},function(n,t){n.setUTCDate(n.getUTCDate()+t*7)},function(n,t){return(t-n)/lat})}function eki(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function yy(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function fh(n){return{y:n,m:0,d:1,H:0,M:0,S:0,L:0}}function rvt(n){function t(n,t){return function(i){var f=[],r=-1,e=0,h=n.length,u,o,s;for(i instanceof Date||(i=new Date(+i));++r<h;)n.charCodeAt(r)===37&&(f.push(n.slice(e,r)),(o=uvt[u=n.charAt(++r)])!=null?u=n.charAt(++r):o=u==="e"?" ":"0",(s=t[u])&&(u=s(i,o)),f.push(u),e=r+1);return f.push(n.slice(e,r)),f.join("")}}function v(n,t){return function(i){var r=fh(1900),e=h(r,n,i+="",0),u,f;if(e!=i.length)return null;if("Q"in r)return new Date(r.Q);if("p"in r&&(r.H=r.H%12+r.p*12),"V"in r){if(r.V<1||r.V>53)return null;"w"in r||(r.w=1);"Z"in r?(u=yy(fh(r.y)),f=u.getUTCDay(),u=f>4||f===0?rh.ceil(u):rh(u),u=th.offset(u,(r.V-1)*7),r.y=u.getUTCFullYear(),r.m=u.getUTCMonth(),r.d=u.getUTCDate()+(r.w+6)%7):(u=t(fh(r.y)),f=u.getDay(),u=f>4||f===0?gs.ceil(u):gs(u),u=ks.offset(u,(r.V-1)*7),r.y=u.getFullYear(),r.m=u.getMonth(),r.d=u.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),f="Z"in r?yy(fh(r.y)).getUTCDay():t(fh(r.y)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+r.W*7-(f+5)%7:r.w+r.U*7-(f+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,yy(r)):t(r)}}function h(n,t,i,r){for(var f=0,o=t.length,s=i.length,u,e;f<o;){if(r>=s)return-1;if(u=t.charCodeAt(f++),u===37){if(u=t.charAt(f++),e=rt[u in uvt?t.charAt(f++):u],!e||(r=e(n,i,r))<0)return-1}else if(u!=i.charCodeAt(r++))return-1}return r}function ut(n,t,i){var r=y.exec(t.slice(i));return r?(n.p=p[r[0].toLowerCase()],i+r[0].length):-1}function ft(n,t,i){var r=k.exec(t.slice(i));return r?(n.w=d[r[0].toLowerCase()],i+r[0].length):-1}function et(n,t,i){var r=w.exec(t.slice(i));return r?(n.w=b[r[0].toLowerCase()],i+r[0].length):-1}function ot(n,t,i){var r=tt.exec(t.slice(i));return r?(n.m=it[r[0].toLowerCase()],i+r[0].length):-1}function st(n,t,i){var r=g.exec(t.slice(i));return r?(n.m=nt[r[0].toLowerCase()],i+r[0].length):-1}function ht(n,t,i){return h(n,c,t,i)}function ct(n,t,i){return h(n,l,t,i)}function lt(n,t,i){return h(n,a,t,i)}function at(n){return e[n.getDay()]}function vt(n){return f[n.getDay()]}function yt(n){return s[n.getMonth()]}function pt(n){return o[n.getMonth()]}function wt(n){return u[+(n.getHours()>=12)]}function bt(n){return e[n.getUTCDay()]}function kt(n){return f[n.getUTCDay()]}function dt(n){return s[n.getUTCMonth()]}function gt(n){return o[n.getUTCMonth()]}function ni(n){return u[+(n.getUTCHours()>=12)]}var c=n.dateTime,l=n.date,a=n.time,u=n.periods,f=n.days,e=n.shortDays,o=n.months,s=n.shortMonths,y=eh(u),p=oh(u),w=eh(f),b=oh(f),k=eh(e),d=oh(e),g=eh(o),nt=oh(o),tt=eh(s),it=oh(s),i={a:at,A:vt,b:yt,B:pt,c:null,d:ovt,e:ovt,f:hdi,H:edi,I:odi,j:sdi,L:svt,m:cdi,M:ldi,p:wt,Q:avt,s:vvt,S:adi,u:vdi,U:ydi,V:pdi,w:wdi,W:bdi,x:null,X:null,y:kdi,Y:ddi,Z:gdi,"%":lvt},r={a:bt,A:kt,b:dt,B:gt,c:null,d:hvt,e:hvt,f:rgi,H:ngi,I:tgi,j:igi,L:cvt,m:ugi,M:fgi,p:ni,Q:avt,s:vvt,S:egi,u:ogi,U:sgi,V:hgi,w:cgi,W:lgi,x:null,X:null,y:agi,Y:vgi,Z:ygi,"%":lvt},rt={a:ft,A:et,b:ot,B:st,c:ht,d:fvt,e:fvt,f:idi,H:evt,I:evt,j:dki,L:tdi,m:kki,M:gki,p:ut,Q:udi,s:fdi,S:ndi,u:lki,U:aki,V:vki,w:cki,W:yki,x:ct,X:lt,y:wki,Y:pki,Z:bki,"%":rdi};return i.x=t(l,i),i.X=t(a,i),i.c=t(c,i),r.x=t(l,r),r.X=t(a,r),r.c=t(c,r),{format:function(n){var r=t(n+="",i);return r.toString=function(){return n},r},parse:function(n){var t=v(n+="",eki);return t.toString=function(){return n},t},utcFormat:function(n){var i=t(n+="",r);return i.toString=function(){return n},i},utcParse:function(n){var t=v(n,yy);return t.toString=function(){return n},t}}}function c(n,t,i){var u=n<0?"-":"",r=(u?-n:n)+"",f=r.length;return u+(f<i?new Array(i-f+1).join(t)+r:r)}function hki(n){return n.replace(ski,"\\$&")}function eh(n){return new RegExp("^(?:"+n.map(hki).join("|")+")","i")}function oh(n){for(var i={},t=-1,r=n.length;++t<r;)i[n[t].toLowerCase()]=t;return i}function cki(n,t,i){var r=it.exec(t.slice(i,i+1));return r?(n.w=+r[0],i+r[0].length):-1}function lki(n,t,i){var r=it.exec(t.slice(i,i+1));return r?(n.u=+r[0],i+r[0].length):-1}function aki(n,t,i){var r=it.exec(t.slice(i,i+2));return r?(n.U=+r[0],i+r[0].length):-1}function vki(n,t,i){var r=it.exec(t.slice(i,i+2));return r?(n.V=+r[0],i+r[0].length):-1}function yki(n,t,i){var r=it.exec(t.slice(i,i+2));return r?(n.W=+r[0],i+r[0].length):-1}function pki(n,t,i){var r=it.exec(t.slice(i,i+4));return r?(n.y=+r[0],i+r[0].length):-1}function wki(n,t,i){var r=it.exec(t.slice(i,i+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function bki(n,t,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function kki(n,t,i){var r=it.exec(t.slice(i,i+2));return r?(n.m=r[0]-1,i+r[0].length):-1}function fvt(n,t,i){var r=it.exec(t.slice(i,i+2));return r?(n.d=+r[0],i+r[0].length):-1}function dki(n,t,i){var r=it.exec(t.slice(i,i+3));return r?(n.m=0,n.d=+r[0],i+r[0].length):-1}function evt(n,t,i){var r=it.exec(t.slice(i,i+2));return r?(n.H=+r[0],i+r[0].length):-1}function gki(n,t,i){var r=it.exec(t.slice(i,i+2));return r?(n.M=+r[0],i+r[0].length):-1}function ndi(n,t,i){var r=it.exec(t.slice(i,i+2));return r?(n.S=+r[0],i+r[0].length):-1}function tdi(n,t,i){var r=it.exec(t.slice(i,i+3));return r?(n.L=+r[0],i+r[0].length):-1}function idi(n,t,i){var r=it.exec(t.slice(i,i+6));return r?(n.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function rdi(n,t,i){var r=oki.exec(t.slice(i,i+1));return r?i+r[0].length:-1}function udi(n,t,i){var r=it.exec(t.slice(i));return r?(n.Q=+r[0],i+r[0].length):-1}function fdi(n,t,i){var r=it.exec(t.slice(i));return r?(n.Q=+r[0]*1e3,i+r[0].length):-1}function ovt(n,t){return c(n.getDate(),t,2)}function edi(n,t){return c(n.getHours(),t,2)}function odi(n,t){return c(n.getHours()%12||12,t,2)}function sdi(n,t){return c(1+ks.count(fr(n),n),t,3)}function svt(n,t){return c(n.getMilliseconds(),t,3)}function hdi(n,t){return svt(n,t)+"000"}function cdi(n,t){return c(n.getMonth()+1,t,2)}function ldi(n,t){return c(n.getMinutes(),t,2)}function adi(n,t){return c(n.getSeconds(),t,2)}function vdi(n){var t=n.getDay();return t===0?7:t}function ydi(n,t){return c(ds.count(fr(n),n),t,2)}function pdi(n,t){var i=n.getDay();return n=i>=4||i===0?nh(n):nh.ceil(n),c(nh.count(fr(n),n)+(fr(n).getDay()===4),t,2)}function wdi(n){return n.getDay()}function bdi(n,t){return c(gs.count(fr(n),n),t,2)}function kdi(n,t){return c(n.getFullYear()%100,t,2)}function ddi(n,t){return c(n.getFullYear()%1e4,t,4)}function gdi(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+c(t/60|0,"0",2)+c(t%60,"0",2)}function hvt(n,t){return c(n.getUTCDate(),t,2)}function ngi(n,t){return c(n.getUTCHours(),t,2)}function tgi(n,t){return c(n.getUTCHours()%12||12,t,2)}function igi(n,t){return c(1+th.count(er(n),n),t,3)}function cvt(n,t){return c(n.getUTCMilliseconds(),t,3)}function rgi(n,t){return cvt(n,t)+"000"}function ugi(n,t){return c(n.getUTCMonth()+1,t,2)}function fgi(n,t){return c(n.getUTCMinutes(),t,2)}function egi(n,t){return c(n.getUTCSeconds(),t,2)}function ogi(n){var t=n.getUTCDay();return t===0?7:t}function sgi(n,t){return c(ih.count(er(n),n),t,2)}function hgi(n,t){var i=n.getUTCDay();return n=i>=4||i===0?uh(n):uh.ceil(n),c(uh.count(er(n),n)+(er(n).getUTCDay()===4),t,2)}function cgi(n){return n.getUTCDay()}function lgi(n,t){return c(rh.count(er(n),n),t,2)}function agi(n,t){return c(n.getUTCFullYear()%100,t,2)}function vgi(n,t){return c(n.getUTCFullYear()%1e4,t,4)}function ygi(){return"+0000"}function lvt(){return"%"}function avt(n){return+n}function vvt(n){return Math.floor(+n/1e3)}function yvt(t){return ae=rvt(t),n.timeFormat=ae.format,n.timeParse=ae.parse,n.utcFormat=ae.utcFormat,n.utcParse=ae.utcParse,ae}function pgi(n){return n.toISOString()}function wgi(n){var t=new Date(n);return isNaN(t)?null:t}function dgi(n){return new Date(n)}function ggi(n){return n instanceof Date?+n:+new Date(+n)}function dn(n,t,i,r,u,f,e,o,s){function tt(o){return(e(o)<o?y:f(o)<o?p:u(o)<o?w:r(o)<o?b:t(o)<o?i(o)<o?k:d:n(o)<o?g:nt)(o)}function a(t,i,r,u){if(t==null&&(t=10),typeof t=="number"){var e=Math.abs(r-i)/t,f=cp(function(n){return n[2]}).right(l,e);f===l.length?(u=uu(i/kn,r/kn,t),t=n):f?(f=l[e/l[f-1][2]<l[f][2]/e?f-1:f],u=f[1],t=f[0]):(u=Math.max(uu(i,r,t),1),t=o)}return u==null?t:t.every(u)}var h=cy(hn,wt),v=h.invert,c=h.domain,y=s(".%L"),p=s(":%S"),w=s("%I:%M"),b=s("%I %p"),k=s("%a %d"),d=s("%b %d"),g=s("%B"),nt=s("%Y"),l=[[e,1,sh],[e,5,5*sh],[e,15,15*sh],[e,30,30*sh],[f,1,hh],[f,5,5*hh],[f,15,15*hh],[f,30,30*hh],[u,1,ch],[u,3,3*ch],[u,6,6*ch],[u,12,12*ch],[r,1,lh],[r,2,2*lh],[i,1,kgi],[t,1,wvt],[t,3,3*wvt],[n,1,kn]];return h.invert=function(n){return new Date(v(n))},h.domain=function(n){return arguments.length?c(rn.call(n,ggi)):c().map(dgi)},h.ticks=function(n,t){var f=c(),r=f[0],u=f[f.length-1],e=u<r,i;return e&&(i=r,r=u,u=i),i=a(n,r,u,t),i=i?i.range(r,u+1):[],e?i.reverse():i},h.tickFormat=function(n,t){return t==null?tt:s(t)},h.nice=function(n,t){var i=c();return(n=a(n,i[0],i[i.length-1],t))?c(tat(i,n)):h},h.copy=function(){return hy(h,dn(n,t,i,r,u,f,e,o,s))},h}function nni(){return dn(fr,vn,ds,ks,an,ln,bs,kr,n.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function tni(){return dn(er,wn,ih,th,pn,yn,bs,kr,n.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function bvt(n){function t(t){var f=(t-i)/(r-i);return n(u?Math.max(0,Math.min(1,f)):f)}var i=0,r=1,u=!1;return t.domain=function(n){return arguments.length?(i=+n[0],r=+n[1],t):[i,r]},t.clamp=function(n){return arguments.length?(u=!!n,t):u},t.interpolator=function(i){return arguments.length?(n=i,t):n},t.copy=function(){return bvt(n).domain([i,r]).clamp(u)},ws(t)}function f(n){for(var i=n.length/6|0,r=new Array(i),t=0;t<i;)r[t]="#"+n.slice(t*6,++t*6);return r}function l(n){return gw(n[n.length-1])}function gtr(n){(n<0||n>1)&&(n-=Math.floor(n));var t=Math.abs(n-.5);return py.h=360*n-100,py.s=1.5-1.5*t,py.l=.8-.9*t,py+""}function iir(n){var t;return n=(.5-n)*Math.PI,wy.r=255*(t=Math.sin(n))*t,wy.g=255*(t=Math.sin(n+nir))*t,wy.b=255*(t=Math.sin(n+tir))*t,wy+""}function by(n){var t=n.length;return function(i){return n[Math.max(0,Math.min(t-1,Math.floor(i*t)))]}}function e(n){return function(){return n}}function sir(n){return n>1?0:n<-1?gr:Math.acos(n)}function upt(n){return n>=1?ky:n<=-1?-ky:Math.asin(n)}function hir(n){return n.innerRadius}function cir(n){return n.outerRadius}function lir(n){return n.startAngle}function air(n){return n.endAngle}function vir(n){return n&&n.padAngle}function yir(n,t,i,r,u,f,e,o){var s=i-n,h=r-t,c=e-u,l=o-f,a=(c*(t-f)-l*(n-u))/(l*s-c*h);return[n+a*s,t+a*h]}function dy(n,t,i,r,u,f,e){var p=n-i,w=t-r,it=(e?f:-f)/ve(p*p+w*w),b=it*w,k=-it*p,d=n+b,g=t+k,nt=i+b,tt=r+k,rt=(d+nt)/2,ut=(g+tt)/2,s=nt-d,o=tt-g,c=s*s+o*o,l=u-f,h=d*tt-nt*g,a=(o<0?-1:1)*ve(oir(0,l*l*c-h*h)),v=(h*o-s*a)/c,y=(-h*s-o*a)/c,ft=(h*o+s*a)/c,et=(-h*s+o*a)/c,ot=v-rt,st=y-ut,ht=ft-rt,ct=et-ut;return ot*ot+st*st>ht*ht+ct*ct&&(v=ft,y=et),{cx:v,cy:y,x01:-b,y01:-k,x11:v*(u/l-1),y11:y*(u/l-1)}}function pir(){function t(){var yt,ri,c=+i.apply(this,arguments),l=+r.apply(this,arguments),v=f.apply(this,arguments)-ky,y=o.apply(this,arguments)-ky,ct=rpt(y-v),a=y>v,et,ot;if(n||(n=yt=ar()),l<c&&(ri=l,l=c,c=ri),l>ft)if(ct>nu-ft)n.moveTo(l*uf(v),l*di(v)),n.arc(0,0,l,v,y,!a),c>ft&&(n.moveTo(c*uf(y),c*di(y)),n.arc(0,0,c,y,v,a));else{var nt=v,tt=y,it=v,rt=y,lt=ct,pt=ct,wt=h.apply(this,arguments)/2,bt=wt>ft&&(u?+u.apply(this,arguments):ve(c*c+l*l)),k=gn(rpt(l-c)/2,+s.apply(this,arguments)),p=k,w=k,t,e;bt>ft&&(et=upt(bt/c*di(wt)),ot=upt(bt/l*di(wt)),(lt-=et*2)>ft?(et*=a?1:-1,it+=et,rt-=et):(lt=0,it=rt=(v+y)/2),(pt-=ot*2)>ft?(ot*=a?1:-1,nt+=ot,tt-=ot):(pt=0,nt=tt=(v+y)/2));var d=l*uf(nt),g=l*di(nt),st=c*uf(rt),ht=c*di(rt);if(k>ft){var at=l*uf(tt),vt=l*di(tt),kt=c*uf(it),dt=c*di(it);if(ct<gr){var b=lt>ft?yir(d,g,kt,dt,at,vt,st,ht):[st,ht],gt=d-b[0],ni=g-b[1],ti=at-b[0],ii=vt-b[1],ui=1/di(sir((gt*ti+ni*ii)/(ve(gt*gt+ni*ni)*ve(ti*ti+ii*ii)))/2),fi=ve(b[0]*b[0]+b[1]*b[1]);p=gn(k,(c-fi)/(ui-1));w=gn(k,(l-fi)/(ui+1))}}pt>ft?w>ft?(t=dy(kt,dt,d,g,l,w,a),e=dy(at,vt,st,ht,l,w,a),n.moveTo(t.cx+t.x01,t.cy+t.y01),w<k?n.arc(t.cx,t.cy,w,ut(t.y01,t.x01),ut(e.y01,e.x01),!a):(n.arc(t.cx,t.cy,w,ut(t.y01,t.x01),ut(t.y11,t.x11),!a),n.arc(0,0,l,ut(t.cy+t.y11,t.cx+t.x11),ut(e.cy+e.y11,e.cx+e.x11),!a),n.arc(e.cx,e.cy,w,ut(e.y11,e.x11),ut(e.y01,e.x01),!a))):(n.moveTo(d,g),n.arc(0,0,l,nt,tt,!a)):n.moveTo(d,g);c>ft&&lt>ft?p>ft?(t=dy(st,ht,at,vt,c,-p,a),e=dy(d,g,kt,dt,c,-p,a),n.lineTo(t.cx+t.x01,t.cy+t.y01),p<k?n.arc(t.cx,t.cy,p,ut(t.y01,t.x01),ut(e.y01,e.x01),!a):(n.arc(t.cx,t.cy,p,ut(t.y01,t.x01),ut(t.y11,t.x11),!a),n.arc(0,0,c,ut(t.cy+t.y11,t.cx+t.x11),ut(e.cy+e.y11,e.cx+e.x11),a),n.arc(e.cx,e.cy,p,ut(e.y11,e.x11),ut(e.y01,e.x01),!a))):n.arc(0,0,c,rt,it,a):n.lineTo(st,ht)}else n.moveTo(0,0);return n.closePath(),yt?(n=null,yt+""||null):void 0}var i=hir,r=cir,s=e(0),u=null,f=lir,o=air,h=vir,n=null;return t.centroid=function(){var n=(+i.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+f.apply(this,arguments)+ +o.apply(this,arguments))/2-gr/2;return[uf(t)*n,di(t)*n]},t.innerRadius=function(n){return arguments.length?(i=typeof n=="function"?n:e(+n),t):i},t.outerRadius=function(n){return arguments.length?(r=typeof n=="function"?n:e(+n),t):r},t.cornerRadius=function(n){return arguments.length?(s=typeof n=="function"?n:e(+n),t):s},t.padRadius=function(n){return arguments.length?(u=n==null?null:typeof n=="function"?n:e(+n),t):u},t.startAngle=function(n){return arguments.length?(f=typeof n=="function"?n:e(+n),t):f},t.endAngle=function(n){return arguments.length?(o=typeof n=="function"?n:e(+n),t):o},t.padAngle=function(n){return arguments.length?(h=typeof n=="function"?n:e(+n),t):h},t.context=function(i){return arguments.length?(n=i==null?null:i,t):n},t}function fpt(n){this._context=n}function gy(n){return new fpt(n)}function ntt(n){return n[0]}function ttt(n){return n[1]}function itt(){function n(n){var e,l=n.length,h,s=!1,c;for(i==null&&(t=r(c=ar())),e=0;e<=l;++e)!(e<l&&o(h=n[e],e,n))===s&&((s=!s)?t.lineStart():t.lineEnd()),s&&t.point(+u(h,e,n),+f(h,e,n));if(c)return t=null,c+""||null}var u=ntt,f=ttt,o=e(!0),i=null,r=gy,t=null;return n.x=function(t){return arguments.length?(u=typeof t=="function"?t:e(+t),n):u},n.y=function(t){return arguments.length?(f=typeof t=="function"?t:e(+t),n):f},n.defined=function(t){return arguments.length?(o=typeof t=="function"?t:e(!!t),n):o},n.curve=function(u){return arguments.length?(r=u,i!=null&&(t=r(i)),n):r},n.context=function(u){return arguments.length?(u==null?i=t=null:t=r(i=u),n):i},n}function ept(){function n(n){var e,b,c,a=n.length,l,v=!1,y,p=new Array(a),w=new Array(a);for(u==null&&(t=s(y=ar())),e=0;e<=a;++e){if(!(e<a&&h(l=n[e],e,n))===v)if(v=!v)b=e,t.areaStart(),t.lineStart();else{for(t.lineEnd(),t.lineStart(),c=e-1;c>=b;--c)t.point(p[c],w[c]);t.lineEnd();t.areaEnd()}v&&(p[e]=+i(l,e,n),w[e]=+r(l,e,n),t.point(f?+f(l,e,n):p[e],o?+o(l,e,n):w[e]))}if(y)return t=null,y+""||null}function c(){return itt().defined(h).curve(s).context(u)}var i=ntt,f=null,r=e(0),o=ttt,h=e(!0),u=null,s=gy,t=null;return n.x=function(t){return arguments.length?(i=typeof t=="function"?t:e(+t),f=null,n):i},n.x0=function(t){return arguments.length?(i=typeof t=="function"?t:e(+t),n):i},n.x1=function(t){return arguments.length?(f=t==null?null:typeof t=="function"?t:e(+t),n):f},n.y=function(t){return arguments.length?(r=typeof t=="function"?t:e(+t),o=null,n):r},n.y0=function(t){return arguments.length?(r=typeof t=="function"?t:e(+t),n):r},n.y1=function(t){return arguments.length?(o=t==null?null:typeof t=="function"?t:e(+t),n):o},n.lineX0=n.lineY0=function(){return c().x(i).y(r)},n.lineY1=function(){return c().x(i).y(o)},n.lineX1=function(){return c().x(f).y(r)},n.defined=function(t){return arguments.length?(h=typeof t=="function"?t:e(!!t),n):h},n.curve=function(i){return arguments.length?(s=i,u!=null&&(t=s(u)),n):s},n.context=function(i){return arguments.length?(i==null?u=t=null:t=s(u=i),n):u},n}function wir(n,t){return t<n?-1:t>n?1:t>=n?0:NaN}function bir(n){return n}function kir(){function n(n){for(var s=n.length,l,b,y=0,a=new Array(s),h=new Array(s),v=+u.apply(this,arguments),p=Math.min(nu,Math.max(-nu,f.apply(this,arguments)-v)),w,k=Math.min(Math.abs(p)/s,o.apply(this,arguments)),d=k*(p<0?-1:1),c,e=0;e<s;++e)(c=h[a[e]=e]=+r(n[e],e,n))>0&&(y+=c);for(t!=null?a.sort(function(n,i){return t(h[n],h[i])}):i!=null&&a.sort(function(t,r){return i(n[t],n[r])}),e=0,b=y?(p-s*d)/y:0;e<s;++e,v=w)l=a[e],c=h[l],w=v+(c>0?c*b:0)+d,h[l]={data:n[l],index:e,value:c,startAngle:v,endAngle:w,padAngle:k};return h}var r=bir,t=wir,i=null,u=e(0),f=e(nu),o=e(0);return n.value=function(t){return arguments.length?(r=typeof t=="function"?t:e(+t),n):r},n.sortValues=function(r){return arguments.length?(t=r,i=null,n):t},n.sort=function(r){return arguments.length?(i=r,t=null,n):i},n.startAngle=function(t){return arguments.length?(u=typeof t=="function"?t:e(+t),n):u},n.endAngle=function(t){return arguments.length?(f=typeof t=="function"?t:e(+t),n):f},n.padAngle=function(t){return arguments.length?(o=typeof t=="function"?t:e(+t),n):o},n}function opt(n){this._curve=n}function utt(n){function t(t){return new opt(n(t))}return t._curve=n,t}function ah(n){var t=n.curve;return n.angle=n.x,delete n.x,n.radius=n.y,delete n.y,n.curve=function(n){return arguments.length?t(utt(n)):t()._curve},n}function spt(){return ah(itt().curve(rtt))}function hpt(){var n=ept().curve(rtt),t=n.curve,i=n.lineX0,r=n.lineX1,u=n.lineY0,f=n.lineY1;return n.angle=n.x,delete n.x,n.startAngle=n.x0,delete n.x0,n.endAngle=n.x1,delete n.x1,n.radius=n.y,delete n.y,n.innerRadius=n.y0,delete n.y0,n.outerRadius=n.y1,delete n.y1,n.lineStartAngle=function(){return ah(i())},delete n.lineX0,n.lineEndAngle=function(){return ah(r())},delete n.lineX1,n.lineInnerRadius=function(){return ah(u())},delete n.lineY0,n.lineOuterRadius=function(){return ah(f())},delete n.lineY1,n.curve=function(n){return arguments.length?t(utt(n)):t()._curve},n}function vh(n,t){return[(t=+t)*Math.cos(n-=Math.PI/2),t*Math.sin(n)]}function dir(n){return n.source}function gir(n){return n.target}function ftt(n){function t(){var e,t=np.call(arguments),s=f.apply(this,t),h=o.apply(this,t);return i||(i=e=ar()),n(i,+r.apply(this,(t[0]=s,t)),+u.apply(this,t),+r.apply(this,(t[0]=h,t)),+u.apply(this,t)),e?(i=null,e+""||null):void 0}var f=dir,o=gir,r=ntt,u=ttt,i=null;return t.source=function(n){return arguments.length?(f=n,t):f},t.target=function(n){return arguments.length?(o=n,t):o},t.x=function(n){return arguments.length?(r=typeof n=="function"?n:e(+n),t):r},t.y=function(n){return arguments.length?(u=typeof n=="function"?n:e(+n),t):u},t.context=function(n){return arguments.length?(i=n==null?null:n,t):i},t}function nrr(n,t,i,r,u){n.moveTo(t,i);n.bezierCurveTo(t=(t+r)/2,i,t,u,r,u)}function trr(n,t,i,r,u){n.moveTo(t,i);n.bezierCurveTo(t,i=(i+u)/2,r,i,r,u)}function irr(n,t,i,r,u){var f=vh(t,i),e=vh(t,i=(i+u)/2),o=vh(r,i),s=vh(r,u);n.moveTo(f[0],f[1]);n.bezierCurveTo(e[0],e[1],o[0],o[1],s[0],s[1])}function rrr(){return ftt(nrr)}function urr(){return ftt(trr)}function frr(){var n=ftt(irr);return n.angle=n.x,delete n.x,n.radius=n.y,delete n.y,n}function arr(){function n(){var n;return t||(t=n=ar()),i.apply(this,arguments).draw(t,+r.apply(this,arguments)),n?(t=null,n+""||null):void 0}var i=e(ett),r=e(64),t=null;return n.type=function(t){return arguments.length?(i=typeof t=="function"?t:e(t),n):i},n.size=function(t){return arguments.length?(r=typeof t=="function"?t:e(+t),n):r},n.context=function(i){return arguments.length?(t=i==null?null:i,n):t},n}function tu(){}function tp(n,t,i){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+t)/6,(n._y0+4*n._y1+i)/6)}function ip(n){this._context=n}function vrr(n){return new ip(n)}function kpt(n){this._context=n}function yrr(n){return new kpt(n)}function dpt(n){this._context=n}function prr(n){return new dpt(n)}function gpt(n,t){this._basis=new ip(n);this._beta=t}function rp(n,t,i){n._context.bezierCurveTo(n._x1+n._k*(n._x2-n._x0),n._y1+n._k*(n._y2-n._y0),n._x2+n._k*(n._x1-t),n._y2+n._k*(n._y1-i),n._x2,n._y2)}function htt(n,t){this._context=n;this._k=(1-t)/6}function ctt(n,t){this._context=n;this._k=(1-t)/6}function ltt(n,t){this._context=n;this._k=(1-t)/6}function att(n,t,i){var r=n._x1,u=n._y1,f=n._x2,e=n._y2,o,s,h,c;n._l01_a>ft&&(o=2*n._l01_2a+3*n._l01_a*n._l12_a+n._l12_2a,s=3*n._l01_a*(n._l01_a+n._l12_a),r=(r*o-n._x0*n._l12_2a+n._x2*n._l01_2a)/s,u=(u*o-n._y0*n._l12_2a+n._y2*n._l01_2a)/s);n._l23_a>ft&&(h=2*n._l23_2a+3*n._l23_a*n._l12_a+n._l12_2a,c=3*n._l23_a*(n._l23_a+n._l12_a),f=(f*h+n._x1*n._l23_2a-t*n._l12_2a)/c,e=(e*h+n._y1*n._l23_2a-i*n._l12_2a)/c);n._context.bezierCurveTo(r,u,f,e,n._x2,n._y2)}function uwt(n,t){this._context=n;this._alpha=t}function ewt(n,t){this._context=n;this._alpha=t}function swt(n,t){this._context=n;this._alpha=t}function cwt(n){this._context=n}function wrr(n){return new cwt(n)}function lwt(n){return n<0?-1:1}function awt(n,t,i){var r=n._x1-n._x0,u=t-n._x1,f=(n._y1-n._y0)/(r||u<0&&-0),e=(i-n._y1)/(u||r<0&&-0),o=(f*u+e*r)/(r+u);return(lwt(f)+lwt(e))*Math.min(Math.abs(f),Math.abs(e),.5*Math.abs(o))||0}function vwt(n,t){var i=n._x1-n._x0;return i?(3*(n._y1-n._y0)/i-t)/2:t}function vtt(n,t,i){var f=n._x0,o=n._y0,u=n._x1,e=n._y1,r=(u-f)/3;n._context.bezierCurveTo(f+r,o+r*t,u-r,e-r*i,u,e)}function up(n){this._context=n}function ywt(n){this._context=new pwt(n)}function pwt(n){this._context=n}function brr(n){return new up(n)}function krr(n){return new ywt(n)}function wwt(n){this._context=n}function bwt(n){var t,i=n.length-1,e,r=new Array(i),u=new Array(i),f=new Array(i);for(r[0]=0,u[0]=2,f[0]=n[0]+2*n[1],t=1;t<i-1;++t)r[t]=1,u[t]=4,f[t]=4*n[t]+2*n[t+1];for(r[i-1]=2,u[i-1]=7,f[i-1]=8*n[i-1]+n[i],t=1;t<i;++t)e=r[t]/u[t-1],u[t]-=e,f[t]-=e*f[t-1];for(r[i-1]=f[i-1]/u[i-1],t=i-2;t>=0;--t)r[t]=(f[t]-r[t+1])/u[t];for(u[i-1]=(n[i]+r[i-1])/2,t=0;t<i-1;++t)u[t]=2*n[t+1]-r[t+1];return[r,u]}function drr(n){return new wwt(n)}function fp(n,t){this._context=n;this._t=t}function grr(n){return new fp(n,.5)}function nur(n){return new fp(n,0)}function tur(n){return new fp(n,1)}function ye(n,t){if((e=n.length)>1)for(var f=1,i,u,r=n[t[0]],e,o=r.length;f<e;++f)for(u=r,r=n[t[f]],i=0;i<o;++i)r[i][1]+=r[i][0]=isNaN(u[i][1])?u[i][0]:u[i][1]}function pe(n){for(var t=n.length,i=new Array(t);--t>=0;)i[t]=t;return i}function iur(n,t){return n[t]}function rur(){function n(n){for(var c=t.apply(this,arguments),l=n.length,s=c.length,o=new Array(s),h,f=0;f<s;++f){for(var a=c[f],v=o[f]=new Array(l),e=0,y;e<l;++e)v[e]=y=[0,+u(n[e],a,e,n)],y.data=n[e];v.key=a}for(f=0,h=i(o);f<s;++f)o[h[f]].index=f;return r(o,h),o}var t=e([]),i=pe,r=ye,u=iur;return n.keys=function(i){return arguments.length?(t=typeof i=="function"?i:e(np.call(i)),n):t},n.value=function(t){return arguments.length?(u=typeof t=="function"?t:e(+t),n):u},n.order=function(t){return arguments.length?(i=t==null?pe:typeof t=="function"?t:e(np.call(t)),n):i},n.offset=function(t){return arguments.length?(r=t==null?ye:t,n):r},n}function uur(n,t){if((f=n.length)>0){for(var i,f,r=0,e=n[0].length,u;r<e;++r){for(u=i=0;i<f;++i)u+=n[i][r][1]||0;if(u)for(i=0;i<f;++i)n[i][r][1]/=u}ye(n,t)}}function fur(n,t){if((s=n.length)>1)for(var r,e=0,i,u,f,o,s,h=n[t[0]].length;e<h;++e)for(f=o=0,r=0;r<s;++r)(u=(i=n[t[r]][e])[1]-i[0])>=0?(i[0]=f,i[1]=f+=u):u<0?(i[1]=o,i[0]=o+=u):i[0]=f}function eur(n,t){var r,f;if((e=n.length)>0){for(var i=0,u=n[t[0]],e,o=u.length;i<o;++i){for(r=0,f=0;r<e;++r)f+=n[r][i][1]||0;u[i][1]+=u[i][0]=-f/2}ye(n,t)}}function our(n,t){var u,i,r,h,c,e;if((c=n.length)>0&&(h=(r=n[t[0]]).length)>0){for(u=0,i=1;i<h;++i){for(var f=0,o=0,l=0;f<c;++f){var a=n[t[f]],s=a[i][1]||0,p=a[i-1][1]||0,v=(s-p)/2;for(e=0;e<f;++e){var y=n[t[e]],w=y[i][1]||0,b=y[i-1][1]||0;v+=w-b}o+=s;l+=v*s}r[i-1][1]+=r[i-1][0]=u;o&&(u-=l/o)}r[i-1][1]+=r[i-1][0]=u;ye(n,t)}}function kwt(n){var t=n.map(dwt);return pe(n).sort(function(n,i){return t[n]-t[i]})}function dwt(n){for(var t=0,i=-1,u=n.length,r;++i<u;)(r=+n[i][1])&&(t+=r);return t}function sur(n){return kwt(n).reverse()}function hur(n){for(var s=n.length,t,r=n.map(dwt),h=pe(n).sort(function(n,t){return r[t]-r[n]}),u=0,f=0,e=[],o=[],i=0;i<s;++i)t=h[i],u<f?(u+=r[t],e.push(t)):(f+=r[t],o.push(t));return o.reverse().concat(e)}function cur(n){return pe(n).reverse()}function gwt(n){return function(){return n}}function lur(n){return n[0]}function aur(n){return n[1]}function ep(){this._=null}function op(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function yh(n,t){var i=t,r=t.R,u=i.U;u?u.L===i?u.L=r:u.R=r:n._=r;r.U=u;i.U=r;i.R=r.L;i.R&&(i.R.U=i);r.L=i}function ph(n,t){var i=t,r=t.L,u=i.U;u?u.L===i?u.L=r:u.R=r:n._=r;r.U=u;i.U=r;i.L=r.R;i.L&&(i.L.U=i);r.R=i}function nbt(n){while(n.L)n=n.L;return n}function wh(n,t,i,r){var u=[null,null],f=et.push(u)-1;return u.left=n,u.right=t,i&&sp(u,n,t,i),r&&sp(u,t,n,r),ni[n.index].halfedges.push(f),ni[t.index].halfedges.push(f),u}function bh(n,t,i){var r=[t,i];return r.left=n,r}function sp(n,t,i,r){n[0]||n[1]?n.left===i?n[1]=r:n[0]=r:(n[0]=r,n.left=t,n.right=i)}function vur(n,t,i,r,u){var a=n[0],v=n[1],c=a[0],l=a[1],y=v[0],p=v[1],e=0,o=1,s=y-c,h=p-l,f;if(f=t-c,s||!(f>0)){if(f/=s,s<0){if(f<e)return;f<o&&(o=f)}else if(s>0){if(f>o)return;f>e&&(e=f)}if(f=r-c,s||!(f<0)){if(f/=s,s<0){if(f>o)return;f>e&&(e=f)}else if(s>0){if(f<e)return;f<o&&(o=f)}if(f=i-l,h||!(f>0)){if(f/=h,h<0){if(f<e)return;f<o&&(o=f)}else if(h>0){if(f>o)return;f>e&&(e=f)}if(f=u-l,h||!(f<0)){if(f/=h,h<0){if(f>o)return;f>e&&(e=f)}else if(h>0){if(f<e)return;f<o&&(o=f)}return!(e>0)&&!(o<1)?!0:(e>0&&(n[0]=[c+e*s,l+e*h]),o<1&&(n[1]=[c+o*s,l+o*h]),!0)}}}}}function yur(n,t,i,r,u){var s=n[1];if(s)return!0;var f=n[0],y=n.left,p=n.right,c=y[0],l=y[1],a=p[0],v=p[1],h=(c+a)/2,w=(l+v)/2,e,o;if(v===l){if(h<t||h>=r)return;if(c>a){if(f){if(f[1]>=u)return}else f=[h,i];s=[h,u]}else{if(f){if(f[1]<i)return}else f=[h,u];s=[h,i]}}else if(e=(c-a)/(v-l),o=w-e*h,e<-1||e>1)if(c>a){if(f){if(f[1]>=u)return}else f=[(i-o)/e,i];s=[(u-o)/e,u]}else{if(f){if(f[1]<i)return}else f=[(u-o)/e,u];s=[(i-o)/e,i]}else if(l<v){if(f){if(f[0]>=r)return}else f=[t,e*t+o];s=[r,e*r+o]}else{if(f){if(f[0]<t)return}else f=[r,e*r+o];s=[t,e*t+o]}return n[0]=f,n[1]=s,!0}function pur(n,t,i,r){for(var f=et.length,u;f--;)yur(u=et[f],n,t,i,r)&&vur(u,n,t,i,r)&&(Math.abs(u[0][0]-u[1][0])>h||Math.abs(u[0][1]-u[1][1])>h)||delete et[f]}function wur(n){return ni[n.index]={site:n,halfedges:[]}}function bur(n,t){var u=n.site,i=t.left,r=t.right;return(u===r&&(r=i,i=u),r)?Math.atan2(r[1]-i[1],r[0]-i[0]):(u===i?(i=t[1],r=t[0]):(i=t[0],r=t[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function tbt(n,t){return t[+(t.left!==n.site)]}function kur(n,t){return t[+(t.left===n.site)]}function dur(){for(var e,u,n,t,f,i,r=0,o=ni.length;r<o;++r)if((e=ni[r])&&(t=(u=e.halfedges).length)){for(f=new Array(t),i=new Array(t),n=0;n<t;++n)f[n]=n,i[n]=bur(e,et[u[n]]);for(f.sort(function(n,t){return i[t]-i[n]}),n=0;n<t;++n)i[n]=u[f[n]];for(n=0;n<t;++n)u[n]=i[n]}}function gur(n,t,i,r){for(var b=ni.length,f,e,o,s,p,k,l,a,w,v,y,c=!0,d,g,nt,tt,u=0;u<b;++u)if(f=ni[u]){for(e=f.site,s=f.halfedges,o=s.length;o--;)et[s[o]]||s.splice(o,1);for(o=0,p=s.length;o<p;)w=kur(f,et[s[o]]),v=w[0],y=w[1],k=tbt(f,et[s[++o%p]]),l=k[0],a=k[1],(Math.abs(v-l)>h||Math.abs(y-a)>h)&&(s.splice(o,0,et.push(bh(e,w,Math.abs(v-n)<h&&r-y>h?[n,Math.abs(l-n)<h?a:r]:Math.abs(y-r)<h&&i-v>h?[Math.abs(a-r)<h?l:i,r]:Math.abs(v-i)<h&&y-t>h?[i,Math.abs(l-i)<h?a:t]:Math.abs(y-t)<h&&v-n>h?[Math.abs(a-t)<h?l:n,t]:null))-1),++p);p&&(c=!1)}if(c){for(tt=Infinity,u=0,c=null;u<b;++u)(f=ni[u])&&(e=f.site,d=e[0]-n,g=e[1]-t,nt=d*d+g*g,nt<tt&&(tt=nt,c=f));if(c){var it=[n,t],rt=[n,r],ut=[i,r],ft=[i,t];c.halfedges.push(et.push(bh(e=c.site,it,rt))-1,et.push(bh(e,rt,ut))-1,et.push(bh(e,ut,ft))-1,et.push(bh(e,ft,it))-1)}}for(u=0;u<b;++u)(f=ni[u])&&(f.halfedges.length||delete ni[u])}function nfr(){op(this);this.x=this.y=this.arc=this.site=this.cy=null}function we(n){var w=n.P,b=n.N,r,t;if(w&&b){var s=w.site,h=n.site,c=b.site;if(s!==c){var l=h[0],a=h[1],u=s[0]-l,f=s[1]-a,e=c[0]-l,o=c[1]-a,v=2*(u*o-f*e);if(!(v>=-ubt)){var k=u*u+f*f,d=e*e+o*o,y=(o*k-f*d)/v,p=(u*d-e*k)/v,i=ytt.pop()||new nfr;for(i.arc=n,i.site=h,i.x=y+l,i.y=(i.cy=p+a)+Math.sqrt(y*y+p*p),n.circle=i,r=null,t=kh._;t;)if(i.y<t.y||i.y===t.y&&i.x<=t.x)if(t.L)t=t.L;else{r=t.P;break}else if(t.R)t=t.R;else{r=t;break}kh.insert(r,i);r||(ptt=i)}}}}function be(n){var t=n.circle;t&&(t.P||(ptt=t.N),kh.remove(t),ytt.push(t),op(t),n.circle=null)}function tfr(){op(this);this.edge=this.site=this.circle=null}function ibt(n){var t=wtt.pop()||new tfr;return t.site=n,t}function btt(n){be(n);ke.remove(n);wtt.push(n);op(n)}function ifr(n){var l=n.circle,f=l.x,e=l.cy,a=[f,e],o=n.P,s=n.N,r=[n],i,t,c,u;for(btt(n),i=o;i.circle&&Math.abs(f-i.circle.x)<h&&Math.abs(e-i.circle.cy)<h;)o=i.P,r.unshift(i),btt(i),i=o;for(r.unshift(i),be(i),t=s;t.circle&&Math.abs(f-t.circle.x)<h&&Math.abs(e-t.circle.cy)<h;)s=t.N,r.push(t),btt(t),t=s;for(r.push(t),be(t),c=r.length,u=1;u<c;++u)t=r[u],i=r[u-1],sp(t.edge,i.site,t.site,a);i=r[0];t=r[c-1];t.edge=wh(i.site,t.site,null,a);we(i);we(t)}function rfr(n){for(var b=n[0],k=n[1],t,i,a,v,r=ke._,u;r;)if(a=rbt(r,k)-b,a>h)r=r.L;else if(v=b-ufr(r,k),v>h){if(!r.R){t=r;break}r=r.R}else{a>-h?(t=r.P,i=r):v>-h?(t=r,i=r.N):t=i=r;break}if(wur(n),u=ibt(n),ke.insert(t,u),t||i){if(t===i){be(t);i=ibt(t.site);ke.insert(u,i);u.edge=i.edge=wh(t.site,u.site);we(t);we(i);return}if(!i){u.edge=wh(t.site,u.site);return}be(t);be(i);var f=t.site,y=f[0],p=f[1],e=n[0]-y,o=n[1]-p,s=i.site,c=s[0]-y,l=s[1]-p,d=2*(e*l-o*c),g=e*e+o*o,nt=c*c+l*l,w=[(l*g-o*nt)/d+y,(e*nt-c*g)/d+p];sp(i.edge,f,s,w);u.edge=wh(f,n,null,w);i.edge=wh(n,s,null,w);we(t);we(i)}}function rbt(n,t){var i=n.site,u=i[0],l=i[1],f=l-t,e;if(!f)return u;if(e=n.P,!e)return-Infinity;i=e.site;var o=i[0],a=i[1],r=a-t;if(!r)return o;var s=o-u,h=1/f-1/r,c=s/r;return h?(-c+Math.sqrt(c*c-2*h*(s*s/(-2*r)-a+r/2+l-f/2)))/h+u:(u+o)/2}function ufr(n,t){var r=n.N,i;return r?rbt(r,t):(i=n.site,i[1]===t?i[0]:Infinity)}function ffr(n,t,i){return(n[0]-i[0])*(t[1]-n[1])-(n[0]-t[0])*(i[1]-n[1])}function efr(n,t){return t[1]-n[1]||t[0]-n[0]}function ktt(n,t){var i=n.sort(efr).pop(),u,f,r;for(et=[],ni=new Array(n.length),ke=new ep,kh=new ep;;)if(r=ptt,i&&(!r||i[1]<r.y||i[1]===r.y&&i[0]<r.x))(i[0]!==u||i[1]!==f)&&(rfr(i),u=i[0],f=i[1]),i=n.pop();else if(r)ifr(r.arc);else break;if(dur(),t){var e=+t[0][0],o=+t[0][1],s=+t[1][0],h=+t[1][1];pur(e,o,s,h);gur(e,o,s,h)}this.edges=et;this.cells=ni;ke=kh=et=ni=null}function ofr(){function n(n){return new ktt(n.map(function(t,u){var f=[Math.round(i(t,u,n)/h)*h,Math.round(r(t,u,n)/h)*h];return f.index=u,f.data=t,f}),t)}var i=lur,r=aur,t=null;return n.polygons=function(t){return n(t).polygons()},n.links=function(t){return n(t).links()},n.triangles=function(t){return n(t).triangles()},n.x=function(t){return arguments.length?(i=typeof t=="function"?t:gwt(+t),n):i},n.y=function(t){return arguments.length?(r=typeof t=="function"?t:gwt(+t),n):r},n.extent=function(i){return arguments.length?(t=i==null?null:[[+i[0][0],+i[0][1]],[+i[1][0],+i[1][1]]],n):t&&[[t[0][0],t[0][1]],[t[1][0],t[1][1]]]},n.size=function(i){return arguments.length?(t=i==null?null:[[0,0],[+i[0],+i[1]]],n):t&&[t[1][0]-t[0][0],t[1][1]-t[0][1]]},n}function hp(n){return function(){return n}}function sfr(n,t,i){this.target=n;this.type=t;this.transform=i}function or(n,t,i){this.k=n;this.x=t;this.y=i}function fbt(n){return n.__zoom||dh}function dtt(){n.event.stopImmediatePropagation()}function gh(){n.event.preventDefault();n.event.stopImmediatePropagation()}function hfr(){return!n.event.button}function cfr(){var n=this,t,i;return n instanceof SVGElement?(n=n.ownerSVGElement||n,t=n.width.baseVal.value,i=n.height.baseVal.value):(t=n.clientWidth,i=n.clientHeight),[[0,0],[t,i]]}function ebt(){return this.__zoom||dh}function lfr(){return-n.event.deltaY*(n.event.deltaMode?120:1)/500}function afr(){return"ontouchstart"in this}function vfr(n,t,i){var r=n.invertX(t[0][0])-i[0][0],u=n.invertX(t[1][0])-i[1][0],f=n.invertY(t[0][1])-i[0][1],e=n.invertY(t[1][1])-i[1][1];return n.translate(u>r?(r+u)/2:Math.min(0,r)||Math.max(0,u),e>f?(f+e)/2:Math.min(0,f)||Math.max(0,e))}function yfr(){function t(n){n.property("__zoom",ebt).on("wheel.zoom",rt).on("mousedown.zoom",ut).on("dblclick.zoom",ft).filter(w).on("touchstart.zoom",et).on("touchmove.zoom",ot).on("touchend.zoom touchcancel.zoom",st).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(n,t){return t=Math.max(e[0],Math.min(e[1],t)),t===n.k?n:new or(t,n.x,n.y)}function l(n,t,i){var r=t[0]-i[0]*n.k,u=t[1]-i[1]*n.k;return r===n.x&&u===n.y?n:new or(n.k,r,u)}function d(n){return[(+n[0][0]+ +n[1][0])/2,(+n[0][1]+ +n[1][1])/2]}function nt(n,t,i){n.on("start.zoom",function(){u(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){u(this,arguments).end()}).tween("zoom",function(){var r=this,o=arguments,l=u(r,o),n=f.apply(r,o),e=i||d(n),s=Math.max(n[1][0]-n[0][0],n[1][1]-n[0][1]),c=r.__zoom,h=typeof t=="function"?t.apply(r,o):t,a=b(c.invert(e).concat(s/c.k),h.invert(e).concat(s/h.k));return function(n){if(n===1)n=h;else{var t=a(n),i=s/t[2];n=new or(i,e[0]-t[0]*i,e[1]-t[1]*i)}l.zoom(null,n)}})}function u(n,t){for(var i=0,u=v.length,r;i<u;++i)if((r=v[i]).that===n)return r;return new tt(n,t)}function tt(n,t){this.that=n;this.args=t;this.index=-1;this.active=0;this.extent=f.apply(n,t)}function rt(){function h(){n.wheel=null;n.end()}if(s.apply(this,arguments)){var n=u(this,arguments),t=this.__zoom,o=Math.max(e[0],Math.min(e[1],t.k*Math.pow(2,p.apply(this,arguments)))),f=hr(this);if(n.wheel)(n.mouse[0][0]!==f[0]||n.mouse[0][1]!==f[1])&&(n.mouse[1]=t.invert(n.mouse[0]=f)),clearTimeout(n.wheel);else{if(t.k===o)return;n.mouse=[f,t.invert(f)];au(this);n.start()}gh();n.wheel=setTimeout(h,it);n.zoom("mouse",r(l(y(t,o),n.mouse[0],n.mouse[1]),n.extent,i))}}function ut(){function a(){if(gh(),!t.moved){var u=n.event.clientX-o,f=n.event.clientY-h;t.moved=u*u+f*f>k}t.zoom("mouse",r(l(t.that.__zoom,t.mouse[0]=hr(t.that),t.mouse[1]),t.extent,i))}function v(){e.on("mousemove.zoom mouseup.zoom",null);pc(n.event.view,t.moved);gh();t.end()}if(!c&&s.apply(this,arguments)){var t=u(this,arguments),e=vt(n.event.view).on("mousemove.zoom",a,!0).on("mouseup.zoom",v,!0),f=hr(this),o=n.event.clientX,h=n.event.clientY;yc(n.event.view);dtt();t.mouse=[f,this.__zoom.invert(f)];au(this);t.start()}}function ft(){if(s.apply(this,arguments)){var u=this.__zoom,e=hr(this),h=u.invert(e),c=u.k*(n.event.shiftKey?.5:2),o=r(l(y(u,c),e,h),f.apply(this,arguments),i);gh();a>0?vt(this).transition().duration(a).call(nt,o,e):vt(this).call(t.transform,o)}}function et(){if(s.apply(this,arguments)){var i=u(this,arguments),f=n.event.changedTouches,h,c=f.length,r,e,t;for(dtt(),r=0;r<c;++r)e=f[r],t=vc(this,f,e.identifier),t=[t,this.__zoom.invert(t),e.identifier],i.touch0?i.touch1||(i.touch1=t):(i.touch0=t,h=!0);if(o&&(o=clearTimeout(o),!i.touch1)){i.end();t=vt(this).on("dblclick.zoom");t&&t.apply(this,arguments);return}h&&(o=setTimeout(function(){o=null},g),au(this),i.start())}}function ot(){var t=u(this,arguments),b=n.event.changedTouches,d=b.length,c,f,e,k;for(gh(),o&&(o=clearTimeout(o)),c=0;c<d;++c)f=b[c],e=vc(this,b,f.identifier),t.touch0&&t.touch0[2]===f.identifier?t.touch0[0]=e:t.touch1&&t.touch1[2]===f.identifier&&(t.touch1[0]=e);if(f=t.that.__zoom,t.touch1){var a=t.touch0[0],v=t.touch0[1],p=t.touch1[0],w=t.touch1[1],s=(s=p[0]-a[0])*s+(s=p[1]-a[1])*s,h=(h=w[0]-v[0])*h+(h=w[1]-v[1])*h;f=y(f,Math.sqrt(s/h));e=[(a[0]+p[0])/2,(a[1]+p[1])/2];k=[(v[0]+w[0])/2,(v[1]+w[1])/2]}else if(t.touch0)e=t.touch0[0],k=t.touch0[1];else return;t.zoom("touch",r(l(f,e,k),t.extent,i))}function st(){var t=u(this,arguments),f=n.event.changedTouches,e=f.length,i,r;for(dtt(),c&&clearTimeout(c),c=setTimeout(function(){c=null},g),i=0;i<e;++i)r=f[i],t.touch0&&t.touch0[2]===r.identifier?delete t.touch0:t.touch1&&t.touch1[2]===r.identifier&&delete t.touch1;t.touch1&&!t.touch0&&(t.touch0=t.touch1,delete t.touch1);t.touch0?t.touch0[1]=this.__zoom.invert(t.touch0[0]):t.end()}var s=hfr,f=cfr,r=vfr,p=lfr,w=afr,e=[0,Infinity],i=[[-Infinity,-Infinity],[Infinity,Infinity]],a=250,b=lut,v=[],h=fu("start","zoom","end"),o,c,g=500,it=150,k=0;return t.transform=function(n,t){var i=n.selection?n.selection():n;i.property("__zoom",ebt);n!==i?nt(n,t):i.interrupt().each(function(){u(this,arguments).start().zoom(null,typeof t=="function"?t.apply(this,arguments):t).end()})},t.scaleBy=function(n,i){t.scaleTo(n,function(){var n=this.__zoom.k,t=typeof i=="function"?i.apply(this,arguments):i;return n*t})},t.scaleTo=function(n,u){t.transform(n,function(){var n=f.apply(this,arguments),t=this.__zoom,e=d(n),o=t.invert(e),s=typeof u=="function"?u.apply(this,arguments):u;return r(l(y(t,s),e,o),n,i)})},t.translateBy=function(n,u,e){t.transform(n,function(){return r(this.__zoom.translate(typeof u=="function"?u.apply(this,arguments):u,typeof e=="function"?e.apply(this,arguments):e),f.apply(this,arguments),i)})},t.translateTo=function(n,u,e){t.transform(n,function(){var n=f.apply(this,arguments),o=this.__zoom,t=d(n);return r(dh.translate(t[0],t[1]).scale(o.k).translate(typeof u=="function"?-u.apply(this,arguments):-u,typeof e=="function"?-e.apply(this,arguments):-e),n,i)})},tt.prototype={start:function(){return++this.active==1&&(this.index=v.push(this)-1,this.emit("start")),this},zoom:function(n,t){return this.mouse&&n!=="mouse"&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&n!=="touch"&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&n!=="touch"&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return--this.active==0&&(v.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(n){io(new sfr(t,n,this.that.__zoom),h.apply,h,[n,this.that,this.args])}},t.wheelDelta=function(n){return arguments.length?(p=typeof n=="function"?n:hp(+n),t):p},t.filter=function(n){return arguments.length?(s=typeof n=="function"?n:hp(!!n),t):s},t.touchable=function(n){return arguments.length?(w=typeof n=="function"?n:hp(!!n),t):w},t.extent=function(n){return arguments.length?(f=typeof n=="function"?n:hp([[+n[0][0],+n[0][1]],[+n[1][0],+n[1][1]]]),t):f},t.scaleExtent=function(n){return arguments.length?(e[0]=+n[0],e[1]=+n[1],t):[e[0],e[1]]},t.translateExtent=function(n){return arguments.length?(i[0][0]=+n[0][0],i[1][0]=+n[1][0],i[0][1]=+n[0][1],i[1][1]=+n[1][1],t):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},t.constrain=function(n){return arguments.length?(r=n,t):r},t.duration=function(n){return arguments.length?(a=+n,t):a},t.interpolate=function(n){return arguments.length?(b=n,t):b},t.on=function(){var n=h.on.apply(h,arguments);return n===h?t:n},t.clickDistance=function(n){return arguments.length?(k=(n=+n)*n,t):Math.sqrt(k)},t}var gtt=cp(iu),ru=gtt.right,sbt=gtt.left,rit=Array.prototype,abt=rit.slice,vbt=rit.map,ap=Math.sqrt(50),vp=Math.sqrt(10),yp=Math.sqrt(2),kp=Array.prototype.slice,tc=1,ic=2,dp=3,no=4,oit=1e-6,pkt={value:function(){}},fc,ec,nw,ff,hit,hc,tw,uw,pit,lc,kit,vf,gw,grt,il,rl,tb,ul,oo,ib,fut,fl,vut,yut,wut,but,dut,ho,eft,oft,vu,dft,het,bt,vr,yet,fk,yi,not,tot,rt,fot,eot,oot,sot,yk,pk,fa,go,kk,dk,p,dt,b,ti,bu,ust,fst,te,ie,wr,tr,wi,ts,ba,ka,da,ga,nv,tv,iv,fd,ed,od,lst,ast,ct,lt,at,ii,fv,ev,ue,rs,sv,ad,hv,cv,ku,lv,sht,vd,yd,kv,ig,uct,fct,ss,hs,oe,sg,hct,lct,ny,ty,gct,nn,tn,vlt,sn,ly,ay,kr,ivt,ae,bn,pvt,rtt,np,nwt,twt,iwt,rwt,fwt,owt,hwt,ytt,ptt,wtt,h,ubt,ke,ni,kh,et,dh;uc.prototype=fu.prototype={constructor:uc,on:function(n,t){var r=this._,f=wkt(n+"",r),i,u=-1,e=f.length;if(arguments.length<2){while(++u<e)if((i=(n=f[u]).type)&&(i=bkt(r[i],n.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);while(++u<e)if(i=(n=f[u]).type)r[i]=sit(r[i],n.name,t);else if(t==null)for(i in r)r[i]=sit(r[i],n.name,null);return this},copy:function(){var n={},t=this._;for(var i in t)n[i]=t[i].slice();return new uc(n)},call:function(n,t){if((r=arguments.length-2)>0)for(var f=new Array(r),i=0,r,u;i<r;++i)f[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(u=this._[n],i=0,r=u.length;i<r;++i)u[i].value.apply(t,f)},apply:function(n,t,i){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var u=this._[n],r=0,f=u.length;r<f;++r)u[r].value.apply(t,i)}};fc="http://www.w3.org/1999/xhtml";ec={svg:"http://www.w3.org/2000/svg",xhtml:fc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};nw=function(n){return function(){return this.matches(n)}};typeof document!="undefined"&&(ff=document.documentElement,ff.matches||(hit=ff.webkitMatchesSelector||ff.msMatchesSelector||ff.mozMatchesSelector||ff.oMatchesSelector,nw=function(n){return function(){return hit.call(this,n)}}));hc=nw;cc.prototype={constructor:cc,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};tw="$";ait.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};uw={};n.event=null;typeof document!="undefined"&&(pit=document.documentElement,"onmouseenter"in pit||(uw={mouseenter:"mouseover",mouseleave:"mouseout"}));lc=[null];ot.prototype=ou.prototype={constructor:ot,select:ndt,selectAll:idt,filter:rdt,data:sdt,enter:udt,exit:hdt,merge:cdt,order:ldt,sort:adt,call:ydt,nodes:pdt,node:wdt,size:bdt,empty:kdt,each:ddt,attr:fgt,style:hgt,property:vgt,classed:bgt,text:nnt,html:unt,raise:ent,lower:snt,append:hnt,insert:lnt,remove:vnt,clone:wnt,datum:bnt,on:tti,dispatch:uti};kit=0;fw.prototype=dit.prototype={constructor:fw,get:function(n){for(var t=this._;!(t in n);)if(!(n=n.parentNode))return;return n[t]},set:function(n,t){return n[this._]=t},remove:function(n){return this._ in n&&delete n[this._]},toString:function(){return this._}};sw.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};var su=.7,hf=1/su,cf="\\s*([+-]?\\d+)\\s*",uo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ci="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vti=/^#([0-9a-f]{3})$/,yti=/^#([0-9a-f]{6})$/,pti=new RegExp("^rgb\\("+[cf,cf,cf]+"\\)$"),wti=new RegExp("^rgb\\("+[ci,ci,ci]+"\\)$"),bti=new RegExp("^rgba\\("+[cf,cf,cf,uo]+"\\)$"),kti=new RegExp("^rgba\\("+[ci,ci,ci,uo]+"\\)$"),dti=new RegExp("^hsl\\("+[uo,ci,ci]+"\\)$"),gti=new RegExp("^hsla\\("+[uo,ci,ci,uo]+"\\)$"),git={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sf(cr,lr,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});sf(tt,lf,ro(cr,{brighter:function(n){return n=n==null?hf:Math.pow(hf,n),new tt(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=n==null?su:Math.pow(su,n),new tt(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+cw(this.r)+cw(this.g)+cw(this.b)},toString:function(){var n=this.opacity;return n=isNaN(n)?1:Math.max(0,Math.min(1,n)),(n===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(n===1?")":", "+n+")")}}));sf(li,bc,ro(cr,{brighter:function(n){return n=n==null?hf:Math.pow(hf,n),new li(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=n==null?su:Math.pow(su,n),new li(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+(this.h<0)*360,u=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*u,r=2*t-i;return new tt(lw(n>=240?n-240:n+120,r,i),lw(n,r,i),lw(n<120?n+240:n-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var rrt=Math.PI/180,urt=180/Math.PI,kc=18,frt=.96422,ert=1,ort=.82521,srt=4/29,af=6/29,hrt=3*af*af,tii=af*af*af;sf(ei,dc,ro(cr,{brighter:function(n){return new ei(this.l+kc*(n==null?1:n),this.a,this.b,this.opacity)},darker:function(n){return new ei(this.l-kc*(n==null?1:n),this.a,this.b,this.opacity)},rgb:function(){var n=(this.l+16)/116,t=isNaN(this.a)?n:n+this.a/500,i=isNaN(this.b)?n:n-this.b/200;return t=frt*yw(t),n=ert*yw(n),i=ort*yw(i),new tt(pw(3.1338561*t-1.6168667*n-.4906146*i),pw(-.9787684*t+1.9161415*n+.033454*i),pw(.0719453*t-.2289914*n+1.4052427*i),this.opacity)}}));sf(ai,gc,ro(cr,{brighter:function(n){return new ai(this.h,this.c,this.l+kc*(n==null?1:n),this.opacity)},darker:function(n){return new ai(this.h,this.c,this.l-kc*(n==null?1:n),this.opacity)},rgb:function(){return aw(this).rgb()}}));var lrt=-.14861,bw=1.78277,kw=-.29227,nl=-.90649,fo=1.97294,art=fo*nl,vrt=fo*bw,yrt=bw*kw-nl*lrt;sf(hu,oi,ro(cr,{brighter:function(n){return n=n==null?hf:Math.pow(hf,n),new hu(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=n==null?su:Math.pow(su,n),new hu(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var r=isNaN(this.h)?0:(this.h+120)*rrt,n=+this.l,t=isNaN(this.s)?0:this.s*n*(1-n),i=Math.cos(r),u=Math.sin(r);return new tt(255*(n+t*(lrt*i+bw*u)),255*(n+t*(kw*i+nl*u)),255*(n+t*fo*i),this.opacity)}}));vf=function oii(n){function i(n,i){var r=t((n=lf(n)).r,(i=lf(i)).r),u=t(n.g,i.g),f=t(n.b,i.b),e=nt(n.opacity,i.opacity);return function(t){return n.r=r(t),n.g=u(t),n.b=f(t),n.opacity=e(t),n+""}}var t=eii(n);return i.gamma=oii,i}(1);gw=drt(wrt);grt=drt(brt);il=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;rl=new RegExp(il.source,"g");tb=180/Math.PI;ul={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};var out=eut(cii,"px, ","px)","deg)"),sut=eut(lii,", ",")",")"),so=Math.SQRT2,rb=2,hut=4,aii=1e-12;vut=aut(dw);yut=aut(nt);wut=put(dw);but=put(nt);dut=kut(dw);ho=kut(nt);var yf=0,co=0,lo=0,gut=1e3,el,ao,ol=0,cu=0,sl=0,vo=typeof performance=="object"&&performance.now?performance:Date,nft=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};yo.prototype=hl.prototype={constructor:yo,restart:function(n,t,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?pf():+i)+(t==null?0:+t);this._next||ao===this||(ao?ao._next=this:el=this,ao=this);this._call=n;this._time=i;ub()},stop:function(){this._call&&(this._call=null,this._time=Infinity,ub())}};var tri=fu("start","end","interrupt"),iri=[],rft=0,eb=1,cl=2,ob=3,uft=4,sb=5,ll=6;eft=ou.prototype.constructor;oft=0;vu=ou.prototype;vi.prototype=sft.prototype={constructor:vi,select:aui,selectAll:vui,filter:fui,merge:eui,selection:yui,transition:ufi,call:vu.call,nodes:vu.nodes,node:vu.node,size:vu.size,empty:vu.empty,each:vu.each,on:hui,attr:yri,attrTween:bri,style:dui,styleTween:nfi,text:rfi,remove:lui,tween:ori,delay:gri,duration:iui,ease:uui};var ab=3,cfi=function w(n){function t(t){return Math.pow(t,n)}return n=+n,t.exponent=w,t}(ab),lfi=function w(n){function t(t){return 1-Math.pow(1-t,n)}return n=+n,t.exponent=w,t}(ab),lft=function w(n){function t(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,t.exponent=w,t}(ab),aft=Math.PI,vft=aft/2;var vb=4/11,kfi=6/11,dfi=8/11,gfi=3/4,nei=9/11,tei=10/11,iei=15/16,rei=21/22,uei=63/64,vl=1/vb/vb;var yb=1.70158,oei=function w(n){function t(t){return t*t*((n+1)*t-n)}return n=+n,t.overshoot=w,t}(yb),sei=function w(n){function t(t){return--t*t*((n+1)*t+n)+1}return n=+n,t.overshoot=w,t}(yb),bft=function w(n){function t(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,t.overshoot=w,t}(yb),wf=2*Math.PI,pb=1,wb=.3,hei=function w(n,t){function i(i){return n*Math.pow(2,10*--i)*Math.sin((r-i)/t)}var r=Math.asin(1/(n=Math.max(1,n)))*(t/=wf);return i.amplitude=function(n){return w(n,t*wf)},i.period=function(t){return w(n,t)},i}(pb,wb),kft=function w(n,t){function i(i){return 1-n*Math.pow(2,-10*(i=+i))*Math.sin((i+r)/t)}var r=Math.asin(1/(n=Math.max(1,n)))*(t/=wf);return i.amplitude=function(n){return w(n,t*wf)},i.period=function(t){return w(n,t)},i}(pb,wb),cei=function w(n,t){function i(i){return((i=i*2-1)<0?n*Math.pow(2,10*i)*Math.sin((r-i)/t):2-n*Math.pow(2,-10*i)*Math.sin((r+i)/t))/2}var r=Math.asin(1/(n=Math.max(1,n)))*(t/=wf);return i.amplitude=function(n){return w(n,t*wf)},i.period=function(t){return w(n,t)},i}(pb,wb),bb={time:null,delay:0,duration:250,ease:lb};ou.prototype.interrupt=uri;ou.prototype.transition=aei;dft=[null];var tet={name:"drag"},kb={name:"space"},bf={name:"handle"},kf={name:"center"},pl={name:"x",handles:["e","w"].map(wo),input:function(n,t){return n&&[[n[0],t[0][1]],[n[1],t[1][1]]]},output:function(n){return n&&[n[0][0],n[1][0]]}},wl={name:"y",handles:["n","s"].map(wo),input:function(n,t){return n&&[[t[0][0],n[0]],[t[1][0],n[1]]]},output:function(n){return n&&[n[0][1],n[1][1]]}},pei={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(wo),input:function(n){return n},output:function(n){return n}},gi={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},iet={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ret={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},wei={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},bei={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};var uet=Math.cos,fet=Math.sin,eet=Math.PI,bl=eet/2,oet=eet*2,set=Math.max;het=Array.prototype.slice;var ik=Math.PI,rk=2*ik,yu=1e-6,foi=rk-yu;uk.prototype=ar.prototype={constructor:uk,moveTo:function(n,t){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,t){this._+="L"+(this._x1=+n)+","+(this._y1=+t)},quadraticCurveTo:function(n,t,i,r){this._+="Q"+ +n+","+ +t+","+(this._x1=+i)+","+(this._y1=+r)},bezierCurveTo:function(n,t,i,r,u,f){this._+="C"+ +n+","+ +t+","+ +i+","+ +r+","+(this._x1=+u)+","+(this._y1=+f)},arcTo:function(n,t,i,r,u){n=+n;t=+t;i=+i;r=+r;u=+u;var v=this._x1,y=this._y1,o=i-n,s=r-t,f=v-n,e=y-t,h=f*f+e*e;if(u<0)throw new Error("negative radius: "+u);if(this._x1===null)this._+="M"+(this._x1=n)+","+(this._y1=t);else if(h>yu)if(Math.abs(e*o-s*f)>yu&&u){var c=i-v,l=r-y,p=o*o+s*s,g=c*c+l*l,w=Math.sqrt(p),b=Math.sqrt(h),k=u*Math.tan((ik-Math.acos((p+h-g)/(2*w*b)))/2),a=k/b,d=k/w;Math.abs(a-1)>yu&&(this._+="L"+(n+a*f)+","+(t+a*e));this._+="A"+u+","+u+",0,0,"+ +(e*c>f*l)+","+(this._x1=n+d*o)+","+(this._y1=t+d*s)}else this._+="L"+(this._x1=n)+","+(this._y1=t)},arc:function(n,t,i,r,u,f){n=+n;t=+t;i=+i;var c=i*Math.cos(r),l=i*Math.sin(r),o=n+c,s=t+l,h=1^f,e=f?r-u:u-r;if(i<0)throw new Error("negative radius: "+i);(this._x1===null?this._+="M"+o+","+s:(Math.abs(this._x1-o)>yu||Math.abs(this._y1-s)>yu)&&(this._+="L"+o+","+s),i)&&(e<0&&(e=e%rk+rk),e>foi?this._+="A"+i+","+i+",0,1,"+h+","+(n-c)+","+(t-l)+"A"+i+","+i+",0,1,"+h+","+(this._x1=o)+","+(this._y1=s):e>yu&&(this._+="A"+i+","+i+",0,"+ +(e>=ik)+","+h+","+(this._x1=n+i*Math.cos(u))+","+(this._y1=t+i*Math.sin(u))))},rect:function(n,t,i,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+t)+"h"+ +i+"v"+ +r+"h"+-i+"Z"},toString:function(){return this._}};bt="$";kl.prototype=nr.prototype={constructor:kl,has:function(n){return bt+n in this},get:function(n){return this[bt+n]},set:function(n,t){return this[bt+n]=t,this},remove:function(n){var t=bt+n;return t in this&&delete this[t]},clear:function(){for(var n in this)n[0]===bt&&delete this[n]},keys:function(){var n=[];for(var t in this)t[0]===bt&&n.push(t.slice(1));return n},values:function(){var n=[];for(var t in this)t[0]===bt&&n.push(this[t]);return n},entries:function(){var t=[];for(var n in this)n[0]===bt&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var n=0;for(var t in this)t[0]===bt&&++n;return n},empty:function(){for(var n in this)if(n[0]===bt)return!1;return!0},each:function(n){for(var t in this)t[0]===bt&&n(this[t],t.slice(1),this)}};vr=nr.prototype;dl.prototype=vet.prototype={constructor:dl,has:vr.has,add:function(n){return n+="",this[bt+n]=n,this},remove:vr.remove,clear:vr.clear,values:vr.keys,size:vr.size,empty:vr.empty,each:vr.each};yet=Array.prototype;fk=yet.slice;yi=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];var wet={},sk={},hk=34,bo=10,ck=13;var na=gl(","),ket=na.parse,csi=na.parseRows,lsi=na.format,asi=na.formatRows,ta=gl("\t"),det=ta.parse,vsi=ta.parseRows,ysi=ta.format,psi=ta.formatRows;not=get(ket);tot=get(det);var uhi=lk("application/xml"),fhi=lk("text/html"),ehi=lk("image/svg+xml");rt=ra.prototype=ak.prototype;rt.copy=function(){var i=new ak(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,u,r,t;if(!n)return i;if(!n.length)return i._root=rot(n),i;for(u=[{source:n,target:i._root=new Array(4)}];n=u.pop();)for(t=0;t<4;++t)(r=n.source[t])&&(r.length?u.push({source:r,target:n.target[t]=new Array(4)}):n.target[t]=rot(r));return i};rt.add=shi;rt.addAll=hhi;rt.cover=chi;rt.data=lhi;rt.extent=ahi;rt.find=vhi;rt.remove=yhi;rt.removeAll=phi;rt.root=whi;rt.size=bhi;rt.visit=khi;rt.visitAfter=dhi;rt.x=nci;rt.y=ici;fot=10;eot=Math.PI*(3-Math.sqrt(5));oot=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;ko.prototype=vk.prototype;vk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};yk={"%":function(n,t){return(n*100).toFixed(t)},b:function(n){return Math.round(n).toString(2)},c:function(n){return n+""},d:function(n){return Math.round(n).toString(10)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},g:function(n,t){return n.toPrecision(t)},o:function(n){return Math.round(n).toString(8)},p:function(n,t){return hot(n*100,t)},r:hot,s:kci,X:function(n){return Math.round(n).toString(16).toUpperCase()},x:function(n){return Math.round(n).toString(16)}};pk=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];aot({decimal:".",thousands:",",grouping:[3],currency:["$",""]});ea.prototype={constructor:ea,reset:function(){this.s=this.t=0},add:function(n){wot(go,n,this.t);wot(this,go.s,this.s);this.s?this.t+=go.t:this.s=go.t},valueOf:function(){return this.s}};go=new ea;var i=1e-6,bot=1e-12,o=Math.PI,y=o/2,oa=o/4,yt=o*2,a=180/o,u=o/180,s=Math.abs,gf=Math.atan,ht=Math.atan2,r=Math.cos,sa=Math.ceil,kot=Math.exp,ha=Math.log,wk=Math.pow,t=Math.sin,ns=Math.sign||function(n){return n>0?1:n<0?-1:0},d=Math.sqrt,bk=Math.tan;kk={Feature:function(n,t){ca(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,r=-1,u=i.length;++r<u;)ca(i[r].geometry,t)}};dk={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates;t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)n=i[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){gk(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)gk(i[r],t,0)},Polygon:function(n,t){nst(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)nst(i[r],t)},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,u=i.length;++r<u;)ca(i[r],t)}};var la=pr(),aa=pr(),tst,ist,nd,td,id,pi={point:v,lineStart:v,lineEnd:v,polygonStart:function(){la.reset();pi.lineStart=dci;pi.lineEnd=gci},polygonEnd:function(){var n=+la;aa.add(n<0?yt+n:n);this.lineStart=this.lineEnd=this.point=v},sphere:function(){aa.add(yt)}};ie=pr();wi={point:ud,lineStart:ost,lineEnd:sst,polygonStart:function(){wi.point=hst;wi.lineStart=ili;wi.lineEnd=rli;ie.reset();pi.polygonStart()},polygonEnd:function(){pi.polygonEnd();wi.point=ud;wi.lineStart=ost;wi.lineEnd=sst;la<0?(p=-(b=180),dt=-(ti=90)):ie>i?ti=90:ie<-i&&(dt=-90);tr[0]=p;tr[1]=b}};ii={sphere:v,point:sd,lineStart:vst,lineEnd:yst,polygonStart:function(){ii.lineStart=sli;ii.lineEnd=hli},polygonEnd:function(){ii.lineStart=vst;ii.lineEnd=yst}};cd.invert=cd;fv=pr();ev=fht(function(){return!0},pli,bli,[-o,-y]);ue=1e9;rs=-ue;sv=pr();ku={sphere:v,point:v,lineStart:gli,lineEnd:v,polygonStart:v,polygonEnd:v};lv=[null,null];sht={type:"LineString",coordinates:lv};vd={Feature:function(n,t){return av(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,r=-1,u=i.length;++r<u;)if(av(i[r].geometry,t))return!0;return!1}};yd={Sphere:function(){return!0},Point:function(n,t){return hht(n.coordinates,t)},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)if(hht(i[r],t))return!0;return!1},LineString:function(n,t){return cht(n.coordinates,t)},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)if(cht(i[r],t))return!0;return!1},Polygon:function(n,t){return lht(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)if(lht(i[r],t))return!0;return!1},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,u=i.length;++r<u;)if(av(i[r],t))return!0;return!1}};var pd=pr(),wd=pr(),wht,bht,bd,kd,ir={point:v,lineStart:v,lineEnd:v,polygonStart:function(){ir.lineStart=oai;ir.lineEnd=hai},polygonEnd:function(){ir.lineStart=ir.lineEnd=ir.point=v;pd.add(s(wd));wd.reset()},result:function(){var n=pd/2;return pd.reset(),n}};var fe=Infinity,vv=fe,fs=-fe,yv=fs,pv={point:cai,lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v,result:function(){var n=[[fe,vv],[fs,yv]];return fs=yv=-(vv=fe=Infinity),n}};var dd=0,gd=0,es=0,wv=0,bv=0,ee=0,ng=0,tg=0,os=0,dht,ght,bi,ki,ri={point:gu,lineStart:nct,lineEnd:tct,polygonStart:function(){ri.lineStart=vai;ri.lineEnd=yai},polygonEnd:function(){ri.point=gu;ri.lineStart=nct;ri.lineEnd=tct},result:function(){var n=os?[ng/os,tg/os]:ee?[wv/ee,bv/ee]:es?[dd/es,gd/es]:[NaN,NaN];return dd=gd=es=wv=bv=ee=ng=tg=os=0,n}};rct.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath();this._point=NaN},point:function(n,t){switch(this._point){case 0:this._context.moveTo(n,t);this._point=1;break;case 1:this._context.lineTo(n,t);break;default:this._context.moveTo(n+this._radius,t);this._context.arc(n,t,this._radius,0,yt)}},result:v};kv=pr();oe={point:v,lineStart:function(){oe.point=wai},lineEnd:function(){ig&&ect(uct,fct);oe.point=v},polygonStart:function(){ig=!0},polygonEnd:function(){ig=null},result:function(){var n=+kv;return kv.reset(),n}};oct.prototype={_radius:4.5,_circle:sct(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z");this._point=NaN},point:function(n,t){switch(this._point){case 0:this._string.push("M",n,",",t);this._point=1;break;case 1:this._string.push("L",n,",",t);break;default:this._circle==null&&(this._circle=sct(this._radius));this._string.push("M",n,",",t,this._circle)}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}return null}};rg.prototype={constructor:rg,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};sg=16;hct=r(30*u);lct=cs({point:function(n,t){this.stream.point(n*u,t*u)}});ny=pct(function(n){return d(2/(1+n))});ny.invert=ls(function(n){return 2*kt(n/2)});ty=pct(function(n){return(n=dot(n))&&n/t(n)});ty.invert=ls(function(n){return n});as.invert=function(n,t){return[n,2*gf(kot(t))-y]};vs.invert=vs;lg.invert=ls(gf);ag.invert=function(n,t){var u=t,o=25,e,r,f;do r=u*u,f=r*r,u-=e=(u*(1.007226+r*(.015085+f*(-.044475+.028874*r-.005916*f)))-t)/(1.007226+r*(.015085*3+f*(-.044475*7+.028874*9*r-.005916*11*f)));while(s(e)>i&&--o>0);return[n/(.8707+(r=u*u)*(-.131979+r*(-.013791+r*r*r*(.003971-.001529*r)))),u]};vg.invert=ls(kt);yg.invert=ls(function(n){return 2*gf(n)});pg.invert=function(n,t){return[-t,2*gf(kot(n))-y]};se.prototype=wg.prototype={constructor:se,count:fyi,each:eyi,eachAfter:syi,eachBefore:oyi,sum:hyi,sort:cyi,path:lyi,ancestors:vyi,descendants:yyi,leaves:pyi,links:wyi,copy:byi};gct=Array.prototype.slice;var clt="$",spi={depth:-1},llt={};oy.prototype=Object.create(se.prototype);nn=(1+Math.sqrt(5))/2;tn=function w(n){function t(t,i,r,u,f){alt(n,t,i,r,u,f)}return t.ratio=function(n){return w((n=+n)>1?n:1)},t}(nn);vlt=function w(n){function t(t,i,r,u,f){if((o=t._squarify)&&o.ratio===n)for(var o,e,h,s,l=-1,a,v=o.length,c=t.value;++l<v;){for(e=o[l],h=e.children,s=e.value=0,a=h.length;s<a;++s)e.value+=h[s].value;e.dice?ps(e,i,r,u,r+=(f-r)*e.value/c):sy(e,i,r,i+=(u-i)*e.value/c,f);c-=e.value}else t._squarify=o=alt(n,t,i,r,u,f),o.ratio=n}return t.ratio=function(n){return w((n=+n)>1?n:1)},t}(nn);var owi=function swi(n){function t(t,i){return t=t==null?0:+t,i=i==null?1:+i,arguments.length===1?(i=t,t=0):i-=t,function(){return n()*i+t}}return t.source=swi,t}(ce),plt=function hwi(n){function t(t,i){var r,u;return t=t==null?0:+t,i=i==null?1:+i,function(){var f;if(r!=null)f=r,r=null;else do r=n()*2-1,f=n()*2-1,u=r*r+f*f;while(!u||u>1);return t+i*f*Math.sqrt(-2*Math.log(u)/u)}}return t.source=hwi,t}(ce),cwi=function lwi(n){function t(){var t=plt.source(n).apply(this,arguments);return function(){return Math.exp(t())}}return t.source=lwi,t}(ce),wlt=function awi(n){function t(t){return function(){for(var i=0,r=0;r<t;++r)i+=n();return i}}return t.source=awi,t}(ce),vwi=function ywi(n){function t(t){var i=wlt.source(n)(t);return function(){return i()/t}}return t.source=ywi,t}(ce),pwi=function wwi(n){function t(t){return function(){return-Math.log(1-n())/t}}return t.source=wwi,t}(ce),blt=Array.prototype,rn=blt.map,br=blt.slice,un={name:"implicit"};sn=[0,1];ly=new Date;ay=new Date;kr=g(function(){},function(n,t){n.setTime(+n+t)},function(n,t){return t-n});kr.every=function(n){return(n=Math.floor(n),!isFinite(n)||!(n>0))?null:(n>1)?g(function(t){t.setTime(Math.floor(t/n)*n)},function(t,i){t.setTime(+t+i*n)},function(t,i){return(i-t)/n}):kr};var hat=kr.range,vy=1e3,ur=6e4,dr=36e5,cat=864e5,lat=6048e5,bs=g(function(n){n.setTime(Math.floor(n/vy)*vy)},function(n,t){n.setTime(+n+t*vy)},function(n,t){return(t-n)/vy},function(n){return n.getUTCSeconds()}),aat=bs.range,ln=g(function(n){n.setTime(Math.floor(n/ur)*ur)},function(n,t){n.setTime(+n+t*ur)},function(n,t){return(t-n)/ur},function(n){return n.getMinutes()}),ebi=ln.range,an=g(function(n){var t=n.getTimezoneOffset()*ur%dr;t<0&&(t+=dr);n.setTime(Math.floor((+n-t)/dr)*dr+t)},function(n,t){n.setTime(+n+t*dr)},function(n,t){return(t-n)/dr},function(n){return n.getHours()}),obi=an.range,ks=g(function(n){n.setHours(0,0,0,0)},function(n,t){n.setDate(n.getDate()+t)},function(n,t){return(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*ur)/cat},function(n){return n.getDate()-1}),sbi=ks.range;var ds=tf(0),gs=tf(1),vat=tf(2),yat=tf(3),nh=tf(4),pat=tf(5),wat=tf(6),bat=ds.range,hbi=gs.range,cbi=vat.range,lbi=yat.range,abi=nh.range,vbi=pat.range,ybi=wat.range,vn=g(function(n){n.setDate(1);n.setHours(0,0,0,0)},function(n,t){n.setMonth(n.getMonth()+t)},function(n,t){return t.getMonth()-n.getMonth()+(t.getFullYear()-n.getFullYear())*12},function(n){return n.getMonth()}),pbi=vn.range,fr=g(function(n){n.setMonth(0,1);n.setHours(0,0,0,0)},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n,t){return t.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});fr.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:g(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n);t.setMonth(0,1);t.setHours(0,0,0,0)},function(t,i){t.setFullYear(t.getFullYear()+i*n)})};var wbi=fr.range,yn=g(function(n){n.setUTCSeconds(0,0)},function(n,t){n.setTime(+n+t*ur)},function(n,t){return(t-n)/ur},function(n){return n.getUTCMinutes()}),bbi=yn.range,pn=g(function(n){n.setUTCMinutes(0,0,0)},function(n,t){n.setTime(+n+t*dr)},function(n,t){return(t-n)/dr},function(n){return n.getUTCHours()}),kbi=pn.range,th=g(function(n){n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCDate(n.getUTCDate()+t)},function(n,t){return(t-n)/cat},function(n){return n.getUTCDate()-1}),dbi=th.range;var ih=rf(0),rh=rf(1),kat=rf(2),dat=rf(3),uh=rf(4),gat=rf(5),nvt=rf(6),tvt=ih.range,gbi=rh.range,nki=kat.range,tki=dat.range,iki=uh.range,rki=gat.range,uki=nvt.range,wn=g(function(n){n.setUTCDate(1);n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCMonth(n.getUTCMonth()+t)},function(n,t){return t.getUTCMonth()-n.getUTCMonth()+(t.getUTCFullYear()-n.getUTCFullYear())*12},function(n){return n.getUTCMonth()}),fki=wn.range,er=g(function(n){n.setUTCMonth(0,1);n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t)},function(n,t){return t.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});er.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:g(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n);t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i*n)})};ivt=er.range;var uvt={"-":"",_:" ","0":"0"},it=/^\s*\d+/,oki=/^%/,ski=/[\\^$*+?|[\]().{}]/g;yvt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});bn="%Y-%m-%dT%H:%M:%S.%LZ";pvt=Date.prototype.toISOString?pgi:n.utcFormat(bn);var bgi=+new Date("2000-01-01T00:00:00.000Z")?wgi:n.utcParse(bn),sh=1e3,hh=sh*60,ch=hh*60,lh=ch*24,kgi=lh*7,wvt=lh*30,kn=lh*365;var ini=f("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),rni=f("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),uni=f("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),fni=f("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),eni=f("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),oni=f("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),sni=f("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),hni=f("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),cni=f("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");var kvt=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(f),lni=l(kvt),dvt=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(f),ani=l(dvt),gvt=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(f),vni=l(gvt),nyt=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(f),yni=l(nyt),tyt=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(f),pni=l(tyt),iyt=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(f),wni=l(iyt),ryt=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(f),bni=l(ryt),uyt=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(f),kni=l(uyt),fyt=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(f),dni=l(fyt),eyt=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(f),gni=l(eyt),oyt=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(f),ntr=l(oyt),syt=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(f),ttr=l(syt),hyt=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(f),itr=l(hyt),cyt=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(f),rtr=l(cyt),lyt=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(f),utr=l(lyt),ayt=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(f),ftr=l(ayt),vyt=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(f),etr=l(vyt),yyt=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(f),otr=l(yyt),pyt=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(f),str=l(pyt),wyt=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(f),htr=l(wyt),byt=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(f),ctr=l(byt),kyt=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(f),ltr=l(kyt),dyt=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(f),atr=l(dyt),gyt=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(f),vtr=l(gyt),npt=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(f),ytr=l(npt),tpt=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(f),ptr=l(tpt),ipt=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(f),wtr=l(ipt),btr=ho(oi(300,.5,0),oi(-240,.5,1)),ktr=ho(oi(-100,.75,.35),oi(80,1.5,.8)),dtr=ho(oi(260,.75,.35),oi(80,1.5,.8)),py=oi();var wy=lf(),nir=Math.PI/3,tir=Math.PI*2/3;var rir=by(f("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),uir=by(f("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),fir=by(f("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),eir=by(f("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var rpt=Math.abs,ut=Math.atan2,uf=Math.cos,oir=Math.max,gn=Math.min,di=Math.sin,ve=Math.sqrt,ft=1e-12,gr=Math.PI,ky=gr/2,nu=2*gr;fpt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath();this._line=1-this._line},point:function(n,t){n=+n;t=+t;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;default:this._context.lineTo(n,t)}}};rtt=utt(gy);opt.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(n,t){this._curve.point(t*Math.sin(n),t*-Math.cos(n))}};np=Array.prototype.slice;var ett={draw:function(n,t){var i=Math.sqrt(t/gr);n.moveTo(i,0);n.arc(0,0,i,0,nu)}},cpt={draw:function(n,t){var i=Math.sqrt(t/5)/2;n.moveTo(-3*i,-i);n.lineTo(-i,-i);n.lineTo(-i,-3*i);n.lineTo(i,-3*i);n.lineTo(i,-i);n.lineTo(3*i,-i);n.lineTo(3*i,i);n.lineTo(i,i);n.lineTo(i,3*i);n.lineTo(-i,3*i);n.lineTo(-i,i);n.lineTo(-3*i,i);n.closePath()}},lpt=Math.sqrt(1/3),err=lpt*2,apt={draw:function(n,t){var i=Math.sqrt(t/err),r=i*lpt;n.moveTo(0,-i);n.lineTo(r,0);n.lineTo(0,i);n.lineTo(-r,0);n.closePath()}},orr=.89081309152928523,vpt=Math.sin(gr/10)/Math.sin(7*gr/10),srr=Math.sin(nu/10)*vpt,hrr=-Math.cos(nu/10)*vpt,ypt={draw:function(n,t){var i=Math.sqrt(t*orr),u=srr*i,f=hrr*i,r;for(n.moveTo(0,-i),n.lineTo(u,f),r=1;r<5;++r){var s=nu*r/5,e=Math.cos(s),o=Math.sin(s);n.lineTo(o*i,-e*i);n.lineTo(e*u-o*f,o*u+e*f)}n.closePath()}},ppt={draw:function(n,t){var i=Math.sqrt(t),r=-i/2;n.rect(r,r,i,i)}},ott=Math.sqrt(3),wpt={draw:function(n,t){var i=-Math.sqrt(t/(ott*3));n.moveTo(0,i*2);n.lineTo(-ott*i,-i);n.lineTo(ott*i,-i);n.closePath()}},ui=-.5,fi=Math.sqrt(3)/2,stt=1/Math.sqrt(12),crr=(stt/2+1)*3,bpt={draw:function(n,t){var s=Math.sqrt(t/crr),i=s/2,f=s*stt,r=i,u=s*stt+s,e=-r,o=u;n.moveTo(i,f);n.lineTo(r,u);n.lineTo(e,o);n.lineTo(ui*i-fi*f,fi*i+ui*f);n.lineTo(ui*r-fi*u,fi*r+ui*u);n.lineTo(ui*e-fi*o,fi*e+ui*o);n.lineTo(ui*i+fi*f,ui*f-fi*i);n.lineTo(ui*r+fi*u,ui*u-fi*r);n.lineTo(ui*e+fi*o,ui*o-fi*e);n.closePath()}},lrr=[ett,cpt,apt,ppt,ypt,wpt,bpt];ip.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:tp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath();this._line=1-this._line},point:function(n,t){n=+n;t=+t;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;break;case 2:this._point=3;this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tp(this,n,t)}this._x0=this._x1;this._x1=n;this._y0=this._y1;this._y1=t}};kpt.prototype={areaStart:tu,areaEnd:tu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2);this.point(this._x3,this._y3);this.point(this._x4,this._y4)}},point:function(n,t){n=+n;t=+t;switch(this._point){case 0:this._point=1;this._x2=n;this._y2=t;break;case 1:this._point=2;this._x3=n;this._y3=t;break;case 2:this._point=3;this._x4=n;this._y4=t;this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+t)/6);break;default:tp(this,n,t)}this._x0=this._x1;this._x1=n;this._y0=this._y1;this._y1=t}};dpt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath();this._line=1-this._line},point:function(n,t){n=+n;t=+t;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,r):this._context.moveTo(i,r);break;case 3:this._point=4;default:tp(this,n,t)}this._x0=this._x1;this._x1=n;this._y0=this._y1;this._y1=t}};gpt.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var t=this._x,r=this._y,n=t.length-1;if(n>0)for(var f=t[0],e=r[0],o=t[n]-f,s=r[n]-e,i=-1,u;++i<=n;)u=i/n,this._basis.point(this._beta*t[i]+(1-this._beta)*(f+u*o),this._beta*r[i]+(1-this._beta)*(e+u*s));this._x=this._y=null;this._basis.lineEnd()},point:function(n,t){this._x.push(+n);this._y.push(+t)}};nwt=function w(n){function t(t){return n===1?new ip(t):new gpt(t,n)}return t.beta=function(n){return w(+n)},t}(.85);htt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:rp(this,this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath();this._line=1-this._line},point:function(n,t){n=+n;t=+t;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;this._x1=n;this._y1=t;break;case 2:this._point=3;default:rp(this,n,t)}this._x0=this._x1;this._x1=this._x2;this._x2=n;this._y0=this._y1;this._y1=this._y2;this._y2=t}};twt=function w(n){function t(t){return new htt(t,n)}return t.tension=function(n){return w(+n)},t}(0);ctt.prototype={areaStart:tu,areaEnd:tu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5)}},point:function(n,t){n=+n;t=+t;switch(this._point){case 0:this._point=1;this._x3=n;this._y3=t;break;case 1:this._point=2;this._context.moveTo(this._x4=n,this._y4=t);break;case 2:this._point=3;this._x5=n;this._y5=t;break;default:rp(this,n,t)}this._x0=this._x1;this._x1=this._x2;this._x2=n;this._y0=this._y1;this._y1=this._y2;this._y2=t}};iwt=function w(n){function t(t){return new ctt(t,n)}return t.tension=function(n){return w(+n)},t}(0);ltt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath();this._line=1-this._line},point:function(n,t){n=+n;t=+t;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rp(this,n,t)}this._x0=this._x1;this._x1=this._x2;this._x2=n;this._y0=this._y1;this._y1=this._y2;this._y2=t}};rwt=function w(n){function t(t){return new ltt(t,n)}return t.tension=function(n){return w(+n)},t}(0);uwt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath();this._line=1-this._line},point:function(n,t){if(n=+n,t=+t,this._point){var i=this._x2-n,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+r*r,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;break;case 2:this._point=3;default:att(this,n,t)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=n;this._y0=this._y1;this._y1=this._y2;this._y2=t}};fwt=function w(n){function t(t){return n?new uwt(t,n):new htt(t,0)}return t.alpha=function(n){return w(+n)},t}(.5);ewt.prototype={areaStart:tu,areaEnd:tu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5)}},point:function(n,t){if(n=+n,t=+t,this._point){var i=this._x2-n,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+r*r,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=n;this._y3=t;break;case 1:this._point=2;this._context.moveTo(this._x4=n,this._y4=t);break;case 2:this._point=3;this._x5=n;this._y5=t;break;default:att(this,n,t)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=n;this._y0=this._y1;this._y1=this._y2;this._y2=t}};owt=function w(n){function t(t){return n?new ewt(t,n):new ctt(t,0)}return t.alpha=function(n){return w(+n)},t}(.5);swt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath();this._line=1-this._line},point:function(n,t){if(n=+n,t=+t,this._point){var i=this._x2-n,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:att(this,n,t)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=n;this._y0=this._y1;this._y1=this._y2;this._y2=t}};hwt=function w(n){function t(t){return n?new swt(t,n):new ltt(t,0)}return t.alpha=function(n){return w(+n)},t}(.5);cwt.prototype={areaStart:tu,areaEnd:tu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,t){n=+n;t=+t;this._point?this._context.lineTo(n,t):(this._point=1,this._context.moveTo(n,t))}};up.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vtt(this,this._t0,vwt(this,this._t0))}(this._line||this._line!==0&&this._point===1)&&this._context.closePath();this._line=1-this._line},point:function(n,t){var i=NaN;if(n=+n,t=+t,n!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;break;case 2:this._point=3;vtt(this,vwt(this,i=awt(this,n,t)),i);break;default:vtt(this,this._t0,i=awt(this,n,t))}this._x0=this._x1;this._x1=n;this._y0=this._y1;this._y1=t;this._t0=i}}};(ywt.prototype=Object.create(up.prototype)).point=function(n,t){up.prototype.point.call(this,t,n)};pwt.prototype={moveTo:function(n,t){this._context.moveTo(t,n)},closePath:function(){this._context.closePath()},lineTo:function(n,t){this._context.lineTo(t,n)},bezierCurveTo:function(n,t,i,r,u,f){this._context.bezierCurveTo(t,n,r,i,f,u)}};wwt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var n=this._x,i=this._y,u=n.length,f,e,t,r;if(u)if(this._line?this._context.lineTo(n[0],i[0]):this._context.moveTo(n[0],i[0]),u===2)this._context.lineTo(n[1],i[1]);else for(f=bwt(n),e=bwt(i),t=0,r=1;r<u;++t,++r)this._context.bezierCurveTo(f[0][t],e[0][t],f[1][t],e[1][t],n[r],i[r]);(this._line||this._line!==0&&u===1)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(n,t){this._x.push(+n);this._y.push(+t)}};fp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y);(this._line||this._line!==0&&this._point===1)&&this._context.closePath();this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,t){n=+n;t=+t;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(n,t);else{var i=this._x*(1-this._t)+n*this._t;this._context.lineTo(i,this._y);this._context.lineTo(i,t)}}this._x=n;this._y=t}};ep.prototype={constructor:ep,insert:function(n,t){var i,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;i=n}else this._?(n=nbt(this._),t.P=null,t.N=n,n.P=n.L=t,i=n):(t.P=t.N=null,this._=t,i=null);for(t.L=t.R=null,t.U=i,t.C=!0,n=t;i&&i.C;)r=i.U,i===r.L?(u=r.R,u&&u.C?(i.C=u.C=!1,r.C=!0,n=r):(n===i.R&&(yh(this,i),n=i,i=n.U),i.C=!1,r.C=!0,ph(this,r))):(u=r.L,u&&u.C?(i.C=u.C=!1,r.C=!0,n=r):(n===i.L&&(ph(this,i),n=i,i=n.U),i.C=!1,r.C=!0,yh(this,r))),i=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P);n.P&&(n.P.N=n.N);n.N=n.P=null;var i=n.U,t,f=n.L,u=n.R,r,e;if(r=f?u?nbt(u):f:u,i?i.L===n?i.L=r:i.R=r:this._=r,f&&u?(e=r.C,r.C=n.C,r.L=f,f.U=r,r!==u?(i=r.U,r.U=n.U,n=r.R,i.L=n,r.R=u,u.U=r):(r.U=i,i=r,n=r.R)):(e=n.C,n=r),n&&(n.U=i),!e){if(n&&n.C){n.C=!1;return}do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,yh(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ph(this,t),t=i.R);t.C=i.C;i.C=t.R.C=!1;yh(this,i);n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ph(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,yh(this,t),t=i.L);t.C=i.C;i.C=t.L.C=!1;ph(this,i);n=this._;break}t.C=!0;n=i;i=i.U}while(!n.C);n&&(n.C=!1)}}};ytt=[];wtt=[];h=1e-6;ubt=1e-12;ktt.prototype={constructor:ktt,polygons:function(){var n=this.edges;return this.cells.map(function(t){var i=t.halfedges.map(function(i){return tbt(t,n[i])});return i.data=t.site.data,i})},triangles:function(){var n=[],t=this.edges;return this.cells.forEach(function(i,r){if(h=(s=i.halfedges).length)for(var o=i.site,s,c=-1,h,e,u=t[s[h-1]],f=u.left===o?u.right:u.left;++c<h;)e=f,u=t[s[c]],f=u.left===o?u.right:u.left,e&&f&&r<e.index&&r<f.index&&ffr(o,e,f)<0&&n.push([o.data,e.data,f.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,t,i){for(var u=this,o,f=u._found||0,c=u.cells.length,r;!(r=u.cells[f]);)if(++f>=c)return null;var s=n-r.site[0],h=t-r.site[1],e=s*s+h*h;do r=u.cells[o=f],f=null,r.halfedges.forEach(function(i){var s=u.edges[i],o=s.left;if(o!==r.site&&o||(o=s.right)){var h=n-o[0],c=t-o[1],l=h*h+c*c;l<e&&(e=l,f=o.index)}});while(f!==null);return u._found=o,i==null||e<=i*i?r.site:null}};or.prototype={constructor:or,scale:function(n){return n===1?this:new or(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new or(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};dh=new or(1,0,0);fbt.prototype=or.prototype;n.version="5.4.0";n.bisect=ru;n.bisectRight=ru;n.bisectLeft=sbt;n.ascending=iu;n.bisector=cp;n.cross=cbt;n.descending=lbt;n.deviation=iit;n.extent=lp;n.histogram=pbt;n.thresholdFreedmanDiaconis=wbt;n.thresholdScott=bbt;n.thresholdSturges=wp;n.max=uit;n.mean=kbt;n.median=dbt;n.merge=bp;n.min=fit;n.pairs=hbt;n.permute=gbt;n.quantile=ge;n.range=pt;n.scan=nkt;n.shuffle=tkt;n.sum=ikt;n.ticks=pp;n.tickIncrement=de;n.tickStep=uu;n.transpose=eit;n.variance=tit;n.zip=ukt;n.axisTop=lkt;n.axisRight=akt;n.axisBottom=vkt;n.axisLeft=ykt;n.brush=ioi;n.brushX=noi;n.brushY=toi;n.brushSelection=gei;n.chord=uoi;n.ribbon=loi;n.nest=aoi;n.set=vet;n.map=nr;n.keys=poi;n.values=woi;n.entries=boi;n.color=lr;n.rgb=lf;n.hsl=bc;n.lab=dc;n.hcl=gc;n.lch=rii;n.gray=iii;n.cubehelix=oi;n.contours=pet;n.contourDensity=osi;n.dispatch=fu;n.drag=ati;n.dragDisable=yc;n.dragEnable=pc;n.dsvFormat=gl;n.csvParse=ket;n.csvParseRows=csi;n.csvFormat=lsi;n.csvFormatRows=asi;n.tsvParse=det;n.tsvParseRows=vsi;n.tsvFormat=ysi;n.tsvFormatRows=psi;n.easeLinear=ffi;n.easeQuad=cft;n.easeQuadIn=efi;n.easeQuadOut=ofi;n.easeQuadInOut=cft;n.easeCubic=lb;n.easeCubicIn=sfi;n.easeCubicOut=hfi;n.easeCubicInOut=lb;n.easePoly=lft;n.easePolyIn=cfi;n.easePolyOut=lfi;n.easePolyInOut=lft;n.easeSin=yft;n.easeSinIn=afi;n.easeSinOut=vfi;n.easeSinInOut=yft;n.easeExp=pft;n.easeExpIn=yfi;n.easeExpOut=pfi;n.easeExpInOut=pft;n.easeCircle=wft;n.easeCircleIn=wfi;n.easeCircleOut=bfi;n.easeCircleInOut=wft;n.easeBounce=po;n.easeBounceIn=fei;n.easeBounceOut=po;n.easeBounceInOut=eei;n.easeBack=bft;n.easeBackIn=oei;n.easeBackOut=sei;n.easeBackInOut=bft;n.easeElastic=kft;n.easeElasticIn=hei;n.easeElasticOut=kft;n.easeElasticInOut=cei;n.blob=bsi;n.buffer=dsi;n.dsv=nhi;n.csv=not;n.tsv=tot;n.image=thi;n.json=rhi;n.text=ia;n.xml=uhi;n.html=fhi;n.svg=ehi;n.forceCenter=ohi;n.forceCollide=fci;n.forceLink=oci;n.forceManyBody=lci;n.forceRadial=aci;n.forceSimulation=cci;n.forceX=vci;n.forceY=yci;n.formatDefaultLocale=aot;n.formatLocale=lot;n.formatSpecifier=ko;n.precisionFixed=vot;n.precisionPrefix=yot;n.precisionRound=pot;n.geoArea=tli;n.geoBounds=fli;n.geoCentroid=lli;n.geoCircle=ali;n.geoClipAntimeridian=ev;n.geoClipCircle=eht;n.geoClipExtent=dli;n.geoClipRectangle=ov;n.geoContains=uai;n.geoDistance=us;n.geoGraticule=pht;n.geoGraticule10=fai;n.geoInterpolate=eai;n.geoLength=oht;n.geoPath=bai;n.geoAlbers=yct;n.geoAlbersUsa=uvi;n.geoAzimuthalEqualArea=fvi;n.geoAzimuthalEqualAreaRaw=ny;n.geoAzimuthalEquidistant=evi;n.geoAzimuthalEquidistantRaw=ty;n.geoConicConformal=svi;n.geoConicConformalRaw=bct;n.geoConicEqualArea=gv;n.geoConicEqualAreaRaw=vct;n.geoConicEquidistant=cvi;n.geoConicEquidistantRaw=kct;n.geoEquirectangular=hvi;n.geoEquirectangularRaw=vs;n.geoGnomonic=lvi;n.geoGnomonicRaw=lg;n.geoIdentity=avi;n.geoProjection=rr;n.geoProjectionMutator=hg;n.geoMercator=ovi;n.geoMercatorRaw=as;n.geoNaturalEarth1=vvi;n.geoNaturalEarth1Raw=ag;n.geoOrthographic=yvi;n.geoOrthographicRaw=vg;n.geoStereographic=pvi;n.geoStereographicRaw=yg;n.geoTransverseMercator=wvi;n.geoTransverseMercatorRaw=pg;n.geoRotation=dst;n.geoStream=hi;n.geoTransform=kai;n.cluster=ryi;n.hierarchy=wg;n.pack=epi;n.packSiblings=rpi;n.packEnclose=nlt;n.partition=opi;n.stratify=lpi;n.tree=bpi;n.treemap=kpi;n.treemapBinary=dpi;n.treemapDice=ps;n.treemapSlice=sy;n.treemapSliceDice=gpi;n.treemapSquarify=tn;n.treemapResquarify=vlt;n.interpolate=eo;n.interpolateArray=nut;n.interpolateBasis=wrt;n.interpolateBasisClosed=brt;n.interpolateDate=tut;n.interpolateNumber=wt;n.interpolateObject=iut;n.interpolateRound=rut;n.interpolateString=nb;n.interpolateTransformCss=out;n.interpolateTransformSvg=sut;n.interpolateZoom=lut;n.interpolateRgb=vf;n.interpolateRgbBasis=gw;n.interpolateRgbBasisClosed=grt;n.interpolateHsl=vut;n.interpolateHslLong=yut;n.interpolateLab=pii;n.interpolateHcl=wut;n.interpolateHclLong=but;n.interpolateCubehelix=dut;n.interpolateCubehelixLong=ho;n.piecewise=wii;n.quantize=bii;n.path=ar;n.polygonArea=nwi;n.polygonCentroid=twi;n.polygonHull=uwi;n.polygonContains=fwi;n.polygonLength=ewi;n.quadtree=ra;n.randomUniform=owi;n.randomNormal=plt;n.randomLogNormal=cwi;n.randomBates=vwi;n.randomIrwinHall=wlt;n.randomExponential=pwi;n.scaleBand=en;n.scalePoint=bwi;n.scaleIdentity=nat;n.scaleLinear=glt;n.scaleLog=fat;n.scaleOrdinal=fn;n.scaleImplicit=un;n.scalePow=cn;n.scaleSqrt=fbi;n.scaleQuantile=eat;n.scaleQuantize=oat;n.scaleThreshold=sat;n.scaleTime=nni;n.scaleUtc=tni;n.scaleSequential=bvt;n.schemeCategory10=ini;n.schemeAccent=rni;n.schemeDark2=uni;n.schemePaired=fni;n.schemePastel1=eni;n.schemePastel2=oni;n.schemeSet1=sni;n.schemeSet2=hni;n.schemeSet3=cni;n.interpolateBrBG=lni;n.schemeBrBG=kvt;n.interpolatePRGn=ani;n.schemePRGn=dvt;n.interpolatePiYG=vni;n.schemePiYG=gvt;n.interpolatePuOr=yni;n.schemePuOr=nyt;n.interpolateRdBu=pni;n.schemeRdBu=tyt;n.interpolateRdGy=wni;n.schemeRdGy=iyt;n.interpolateRdYlBu=bni;n.schemeRdYlBu=ryt;n.interpolateRdYlGn=kni;n.schemeRdYlGn=uyt;n.interpolateSpectral=dni;n.schemeSpectral=fyt;n.interpolateBuGn=gni;n.schemeBuGn=eyt;n.interpolateBuPu=ntr;n.schemeBuPu=oyt;n.interpolateGnBu=ttr;n.schemeGnBu=syt;n.interpolateOrRd=itr;n.schemeOrRd=hyt;n.interpolatePuBuGn=rtr;n.schemePuBuGn=cyt;n.interpolatePuBu=utr;n.schemePuBu=lyt;n.interpolatePuRd=ftr;n.schemePuRd=ayt;n.interpolateRdPu=etr;n.schemeRdPu=vyt;n.interpolateYlGnBu=otr;n.schemeYlGnBu=yyt;n.interpolateYlGn=str;n.schemeYlGn=pyt;n.interpolateYlOrBr=htr;n.schemeYlOrBr=wyt;n.interpolateYlOrRd=ctr;n.schemeYlOrRd=byt;n.interpolateBlues=ltr;n.schemeBlues=kyt;n.interpolateGreens=atr;n.schemeGreens=dyt;n.interpolateGreys=vtr;n.schemeGreys=gyt;n.interpolatePurples=ytr;n.schemePurples=npt;n.interpolateReds=ptr;n.schemeReds=tpt;n.interpolateOranges=wtr;n.schemeOranges=ipt;n.interpolateCubehelixDefault=btr;n.interpolateRainbow=gtr;n.interpolateWarm=ktr;n.interpolateCool=dtr;n.interpolateSinebow=iir;n.interpolateViridis=rir;n.interpolateMagma=uir;n.interpolateInferno=fir;n.interpolatePlasma=eir;n.create=fti;n.creator=oc;n.local=dit;n.matcher=hc;n.mouse=hr;n.namespace=to;n.namespaces=ec;n.clientPoint=ac;n.select=vt;n.selectAll=eti;n.selection=ou;n.selector=sc;n.selectorAll=gp;n.style=eu;n.touch=vc;n.touches=oti;n.window=iw;n.customEvent=io;n.arc=pir;n.area=ept;n.line=itt;n.pie=kir;n.areaRadial=hpt;n.radialArea=hpt;n.lineRadial=spt;n.radialLine=spt;n.pointRadial=vh;n.linkHorizontal=rrr;n.linkVertical=urr;n.linkRadial=frr;n.symbol=arr;n.symbols=lrr;n.symbolCircle=ett;n.symbolCross=cpt;n.symbolDiamond=apt;n.symbolSquare=ppt;n.symbolStar=ypt;n.symbolTriangle=wpt;n.symbolWye=bpt;n.curveBasisClosed=yrr;n.curveBasisOpen=prr;n.curveBasis=vrr;n.curveBundle=nwt;n.curveCardinalClosed=iwt;n.curveCardinalOpen=rwt;n.curveCardinal=twt;n.curveCatmullRomClosed=owt;n.curveCatmullRomOpen=hwt;n.curveCatmullRom=fwt;n.curveLinearClosed=wrr;n.curveLinear=gy;n.curveMonotoneX=brr;n.curveMonotoneY=krr;n.curveNatural=drr;n.curveStep=grr;n.curveStepAfter=tur;n.curveStepBefore=nur;n.stack=rur;n.stackOffsetExpand=uur;n.stackOffsetDiverging=fur;n.stackOffsetNone=ye;n.stackOffsetSilhouette=eur;n.stackOffsetWiggle=our;n.stackOrderAscending=kwt;n.stackOrderDescending=sur;n.stackOrderInsideOut=hur;n.stackOrderNone=pe;n.stackOrderReverse=cur;n.timeInterval=g;n.timeMillisecond=kr;n.timeMilliseconds=hat;n.utcMillisecond=kr;n.utcMilliseconds=hat;n.timeSecond=bs;n.timeSeconds=aat;n.utcSecond=bs;n.utcSeconds=aat;n.timeMinute=ln;n.timeMinutes=ebi;n.timeHour=an;n.timeHours=obi;n.timeDay=ks;n.timeDays=sbi;n.timeWeek=ds;n.timeWeeks=bat;n.timeSunday=ds;n.timeSundays=bat;n.timeMonday=gs;n.timeMondays=hbi;n.timeTuesday=vat;n.timeTuesdays=cbi;n.timeWednesday=yat;n.timeWednesdays=lbi;n.timeThursday=nh;n.timeThursdays=abi;n.timeFriday=pat;n.timeFridays=vbi;n.timeSaturday=wat;n.timeSaturdays=ybi;n.timeMonth=vn;n.timeMonths=pbi;n.timeYear=fr;n.timeYears=wbi;n.utcMinute=yn;n.utcMinutes=bbi;n.utcHour=pn;n.utcHours=kbi;n.utcDay=th;n.utcDays=dbi;n.utcWeek=ih;n.utcWeeks=tvt;n.utcSunday=ih;n.utcSundays=tvt;n.utcMonday=rh;n.utcMondays=gbi;n.utcTuesday=kat;n.utcTuesdays=nki;n.utcWednesday=dat;n.utcWednesdays=tki;n.utcThursday=uh;n.utcThursdays=iki;n.utcFriday=gat;n.utcFridays=rki;n.utcSaturday=nvt;n.utcSaturdays=uki;n.utcMonth=wn;n.utcMonths=fki;n.utcYear=er;n.utcYears=ivt;n.timeFormatDefaultLocale=yvt;n.timeFormatLocale=rvt;n.isoFormat=pvt;n.isoParse=bgi;n.now=pf;n.timer=hl;n.timerFlush=tft;n.timeout=fb;n.interval=nri;n.transition=sft;n.active=vei;n.interrupt=au;n.voronoi=ofr;n.zoom=yfr;n.zoomTransform=fbt;n.zoomIdentity=dh;Object.defineProperty(n,"__esModule",{value:!0})}),function(n){if(typeof exports=="object"&&typeof module!="undefined")module.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var t;t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;t.crossfilter=n()}}(function(){return function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i?i:n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(n,t){t.exports=n("./src/crossfilter").crossfilter},{"./src/crossfilter":6}],2:[function(n,t){(function(n){function kt(n,t){return n==null?undefined:n[t]}function dt(n){var t=!1;if(n!=null&&typeof n.toString!="function")try{t=!!(n+"")}catch(i){}return t}function i(n){var i=-1,r=n?n.length:0,t;for(this.clear();++i<r;)t=n[i],this.set(t[0],t[1])}function ui(){this.__data__=f?f(null):{}}function fi(n){return this.has(n)&&delete this.__data__[n]}function ei(n){var t=this.__data__,i;return f?(i=t[n],i===y?undefined:i):c.call(t,n)?t[n]:undefined}function oi(n){var t=this.__data__;return f?t[n]!==undefined:c.call(t,n)}function si(n,t){var i=this.__data__;return i[n]=f&&t===undefined?y:t,this}function u(n){var i=-1,r=n?n.length:0,t;for(this.clear();++i<r;)t=n[i],this.set(t[0],t[1])}function hi(){this.__data__=[]}function ci(n){var t=this.__data__,i=e(t,n),r;return i<0?!1:(r=t.length-1,i==r?t.pop():ii.call(t,i,1),!0)}function li(n){var t=this.__data__,i=e(t,n);return i<0?undefined:t[i][1]}function ai(n){return e(this.__data__,n)>-1}function vi(n,t){var i=this.__data__,r=e(i,n);return r<0?i.push([n,t]):i[r][1]=t,this}function r(n){var i=-1,r=n?n.length:0,t;for(this.clear();++i<r;)t=n[i],this.set(t[0],t[1])}function yi(){this.__data__={hash:new i,map:new(ri||u),string:new i}}function pi(n){return o(this,n)["delete"](n)}function wi(n){return o(this,n).get(n)}function bi(n){return o(this,n).has(n)}function ki(n,t){return o(this,n).set(n,t),this}function e(n,t){for(var i=n.length;i--;)if(er(n[i][0],t))return i;return-1}function di(n){if(!ft(n)||rr(n))return!1;var t=ut(n)||dt(n)?ti:pt;return t.test(fr(n))}function gi(n){if(typeof n=="string")return n;if(v(n))return tt?tt.call(n):"";var t=n+"";return t=="0"&&1/n==-p?"-0":t}function nr(n){return a(n)?n:rt(n)}function o(n,t){var i=n.__data__;return ir(t)?i[typeof t=="string"?"string":"hash"]:i.map}function it(n,t){var i=kt(n,t);return di(i)?i:undefined}function tr(n,t){if(a(n))return!1;var i=typeof n;return i=="number"||i=="symbol"||i=="boolean"||n==null||v(n)?!0:lt.test(n)||!ct.test(n)||t!=null&&n in Object(t)}function ir(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function rr(n){return!!b&&b in n}function ur(n){if(typeof n=="string"||v(n))return n;var t=n+"";return t=="0"&&1/n==-p?"-0":t}function fr(n){if(n!=null){try{return k.call(n)}catch(t){}try{return n+""}catch(t){}}return""}function l(n,t){if(typeof n!="function"||t&&typeof t!="function")throw new TypeError(et);var i=function(){var r=arguments,u=t?t.apply(this,r):r[0],f=i.cache,e;return f.has(u)?f.get(u):(e=n.apply(this,r),i.cache=f.set(u,e),e)};return i.cache=new(l.Cache||r),i}function er(n,t){return n===t||n!==n&&t!==t}function ut(n){var t=ft(n)?d.call(n):"";return t==ot||t==st}function ft(n){var t=typeof n;return!!n&&(t=="object"||t=="function")}function or(n){return!!n&&typeof n=="object"}function v(n){return typeof n=="symbol"||or(n)&&d.call(n)==ht}function sr(n){return n==null?"":gi(n)}function hr(n,t,i){var f,u,r;for(t=tr(t,n)?[t]:nr(t),f=-1,u=t.length,u||(n=undefined,u=1);++f<u;)r=n==null?undefined:n[ur(t[f])],r===undefined&&(f=u,r=i),n=ut(r)?r.call(n):r;return n}var et="Expected a function",y="__lodash_hash_undefined__",p=1/0,ot="[object Function]",st="[object GeneratorFunction]",ht="[object Symbol]",ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lt=/^\w*$/,at=/^\./,vt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yt=/\\(\\)?/g,pt=/^\[object .+?Constructor\]$/,wt=typeof n=="object"&&n&&n.Object===Object&&n,bt=typeof self=="object"&&self&&self.Object===Object&&self,s=wt||bt||Function("return this")(),gt=Array.prototype,ni=Function.prototype,w=Object.prototype,h=s["__core-js_shared__"],b=function(){var n=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),k=ni.toString,c=w.hasOwnProperty,d=w.toString,ti=RegExp("^"+k.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=s.Symbol,ii=gt.splice,ri=it(s,"Map"),f=it(Object,"create"),nt=g?g.prototype:undefined,tt=nt?nt.toString:undefined,rt,a;i.prototype.clear=ui;i.prototype["delete"]=fi;i.prototype.get=ei;i.prototype.has=oi;i.prototype.set=si;u.prototype.clear=hi;u.prototype["delete"]=ci;u.prototype.get=li;u.prototype.has=ai;u.prototype.set=vi;r.prototype.clear=yi;r.prototype["delete"]=pi;r.prototype.get=wi;r.prototype.has=bi;r.prototype.set=ki;rt=l(function(n){n=sr(n);var t=[];return at.test(n)&&t.push(""),n.replace(vt,function(n,i,r,u){t.push(r?u.replace(yt,"$1"):i||n)}),t});l.Cache=r;a=Array.isArray;t.exports=hr}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],3:[function(n,t){t.exports={version:"1.4.5"}},{}],4:[function(n,t){function r(n){for(var t=new Array(n),i=-1;++i<n;)t[i]=0;return t}function h(n,t){for(var i=n.length;i<t;)n[i++]=0;return n}function c(n,t){if(t>32)throw new Error("invalid array width!");return n}function i(n){this.length=n;this.subarrays=1;this.width=8;this.masks={0:0};this[0]=u(n)}if(typeof Uint8Array!="undefined")var u=function(n){return new Uint8Array(n)},f=function(n){return new Uint16Array(n)},e=function(n){return new Uint32Array(n)},o=function(n,t){if(n.length>=t)return n;var i=new n.constructor(t);return i.set(n),i},s=function(n,t){var i;switch(t){case 16:i=f(n.length);break;case 32:i=e(n.length);break;default:throw new Error("invalid array width!");}return i.set(n),i};i.prototype.lengthen=function(n){for(var t=0,i=this.subarrays;t<i;++t)this[t]=o(this[t],n);this.length=n};i.prototype.add=function(){for(var r,t,i,n=0,f=this.subarrays;n<f;++n)if(r=this.masks[n],t=this.width-32*n,i=~r&-~r,!(t>=32)||i)return t<32&&i&1<<t&&(this[n]=s(this[n],t<<=1),this.width=32*n+t),this.masks[n]|=i,{offset:n,one:i};return this[this.subarrays]=u(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}};i.prototype.copy=function(n,t){for(var i=0,r=this.subarrays;i<r;++i)this[i][n]=this[i][t]};i.prototype.truncate=function(n){for(var i,t=0,r=this.subarrays;t<r;++t){for(i=this.length-1;i>=n;i--)this[t][i]=0;this[t].length=n}this.length=n};i.prototype.zero=function(n){for(var t=0,i=this.subarrays;t<i;++t)if(this[t][n])return!1;return!0};i.prototype.zeroExcept=function(n,t,i){for(var r=0,u=this.subarrays;r<u;++r)if(r===t?this[r][n]&i:this[r][n])return!1;return!0};i.prototype.zeroExceptMask=function(n,t){for(var i=0,r=this.subarrays;i<r;++i)if(this[i][n]&t[i])return!1;return!0};i.prototype.only=function(n,t,i){for(var r=0,u=this.subarrays;r<u;++r)if(this[r][n]!=(r===t?i:0))return!1;return!0};i.prototype.onlyExcept=function(n,t,i,r,u){for(var e,f=0,o=this.subarrays;f<o;++f)if(e=this[f][n],f===t&&(e&=i),e!=(f===r?u:0))return!1;return!0};t.exports={array8:r,array16:r,array32:r,arrayLengthen:h,arrayWiden:c,bitarray:i}},{}],5:[function(n,t){"use strict";function i(n){function i(t,i,r,u){while(r<u){var f=r+u>>>1;n(t[f])<i?r=f+1:u=f}return r}function t(t,i,r,u){while(r<u){var f=r+u>>>1;i<n(t[f])?u=f:r=f+1}return r}return t.right=t,t.left=i,t}var r=n("./identity");t.exports=i(r);t.exports.by=i},{"./identity":10}],6:[function(n,t,i){"use strict";function nt(){function ut(r){var f=i,u=r.length;return u&&(t=t.concat(r),n.lengthen(i+=u),d.forEach(function(n){n(r,f,u)}),it("dataAdded")),rt}function ft(r){for(var u,f,h=o(i,i),c=[],l=typeof r=="function",a=function(i){return l?r(t[i],i):n.zero(i)},s=0,v=0;s<i;++s)a(s)?(c.push(s),h[s]=e):h[s]=v++;for(k.forEach(function(n){n(-1,-1,[],c,!0)}),nt.forEach(function(n){n(h)}),u=0,f=0;u<i;++u)h[u]!==e&&(u!==f&&(n.copy(f,u),t[f]=t[u]),++f);t.length=i=f;n.truncate(f);it("dataRemoved")}function et(t,i){for(var u,f,o,e=Array(n.subarrays),r=0;r<n.subarrays;r++)e[r]=-1;if(i)for(u=0,o=i.length;u<o;u++)f=i[u].id(),e[f>>7]&=~(1<<(f&63));return n.zeroExceptMask(t,e)}function ot(tt,rt){function oi(t,r,f){var s,d,g,v,nt,y,w,b,at,h,e;if(rt){for(bt=0,h=0,kt=[],s=0;s<t.length;s++)for(h=0,kt=tt(t[s]);h<kt.length;h++)bt++;for(ht=[],gt=l(t.length),dt=o(bt,1),d=l(bt),g=0,v=0;v<t.length;v++){if(kt=tt(t[v]),!kt.length){gt[v]=0;st.push(v+r);continue}for(gt[v]=kt.length,h=0;h<kt.length;h++)ht.push(kt[h]),d[g]=v,g++}nt=vi(l(bt),0,bt);ht=c(ht,nt);pt=c(d,nt)}else ht=t.map(tt),pt=vi(l(f),0,f),ht=c(ht,pt);rt&&(f=bt);var p=wt(ht),ti=p[0],ii=p[1];if(ni)for(y=0;y<f;++y)ni(ht[y],y)||(n[ut][pt[y]+r]|=ft,rt&&(dt[y]=1));else{for(w=0;w<ti;++w)n[ut][pt[w]+r]|=ft,rt&&(dt[w]=1);for(b=ii;b<f;++b)n[ut][pt[b]+r]|=ft,rt&&(dt[b]=1)}if(!r){et=ht;ot=pt;ct=gt;lt=dt;vt=ti;yt=ii;return}var k=et,ri=ot,ui=lt,it,a=0;if(s=0,rt&&(it=r,r=k.length,f=bt),et=rt?new Array(r+f):new Array(i),ot=rt?new Array(r+f):o(i,i),rt&&(lt=o(r+f,1)),rt)for(at=ct.length,ct=u.arrayLengthen(ct,i),h=0;h+at<i;h++)ct[h+at]=gt[h];for(e=0;s<r&&a<f;++e)k[s]<ht[a]?(et[e]=k[s],rt&&(lt[e]=ui[s]),ot[e]=ri[s++]):(et[e]=ht[a],rt&&(lt[e]=dt[a]),ot[e]=pt[a++]+(rt?it:r));for(;s<r;++s,++e)et[e]=k[s],rt&&(lt[e]=ui[s]),ot[e]=ri[s];for(;a<f;++a,++e)et[e]=ht[a],rt&&(lt[e]=dt[a]),ot[e]=pt[a]+(rt?it:r);p=wt(et);vt=p[0];yt=p[1]}function si(n,t,i){ui.forEach(function(n){n(ht,pt,t,i)});ht=pt=null}function yi(n){var t,u,o,f,r,s,h;if(rt){for(t=0,u=0;t<st.length;t++)n[st[t]]!==e&&(st[u]=n[st[t]],u++);for(st.length=u,t=0,u=0;t<i;t++)n[t]!==e&&(u!==t&&(ct[u]=ct[t]),u++);ct.length=u}for(o=et.length,f=0,r=0;f<o;++f)s=ot[f],n[s]!==e&&(f!==r&&(et[r]=et[f]),ot[r]=n[s],rt&&(lt[r]=lt[f]),++r);for(et.length=r,rt&&(lt.length=r);r<o;)ot[r++]=0;h=wt(et);vt=h[0];yt=h[1]}function hi(t){var f=t[0],e=t[1],l,a;if(ni)return ni=null,ki(function(n,t){return f<=t&&t<e},t[0]===0&&t[1]===et.length),vt=f,yt=e,ri;var i,o,s,r=[],u=[],h=[],c=[];if(f<vt)for(i=f,o=Math.min(vt,e);i<o;++i)r.push(ot[i]),h.push(i);else if(f>vt)for(i=vt,o=Math.min(f,yt);i<o;++i)u.push(ot[i]),c.push(i);if(e>yt)for(i=Math.max(f,yt),o=e;i<o;++i)r.push(ot[i]),h.push(i);else if(e<yt)for(i=Math.max(vt,e),o=yt;i<o;++i)u.push(ot[i]),c.push(i);if(rt){for(l=[],a=[],i=0;i<r.length;i++)ct[r[i]]++,lt[h[i]]=0,ct[r[i]]===1&&(n[ut][r[i]]^=ft,l.push(r[i]));for(i=0;i<u.length;i++)ct[u[i]]--,lt[c[i]]=1,ct[u[i]]===0&&(n[ut][u[i]]^=ft,a.push(u[i]));if(r=l,u=a,t[0]===0&&t[1]===et.length)for(i=0;i<st.length;i++)n[ut][s=st[i]]&ft&&(n[ut][s]^=ft,r.push(s));else for(i=0;i<st.length;i++)n[ut][s=st[i]]&ft||(n[ut][s]^=ft,u.push(s))}else{for(i=0;i<r.length;i++)n[ut][r[i]]^=ft;for(i=0;i<u.length;i++)n[ut][u[i]]^=ft}return vt=f,yt=e,k.forEach(function(n){n(ft,ut,r,u)}),it("filtered"),ri}function nr(n){return n==null?ci():Array.isArray(n)?wi(n):typeof n=="function"?bi(n):pi(n)}function pi(n){return ti=n,ii=!0,hi((wt=s.filterExact(a,n))(et))}function wi(n){return ti=n,ii=!0,hi((wt=s.filterRange(a,n))(et))}function ci(){return ti=undefined,ii=!1,hi((wt=s.filterAll)(et))}function bi(n){ti=n;ii=!0;ni=n;wt=s.filterAll;ki(n,!1);var t=wt(et);return vt=t[0],yt=t[1],ri}function ki(t,i){var r,e,l,u=[],f=[],o=[],s=[],a=et.length,h,c;if(!rt)for(r=0;r<a;++r)!(n[ut][e=ot[r]]&ft)^!!(l=t(et[r],r))&&(l?u.push(e):f.push(e));if(rt)for(r=0;r<a;++r)t(et[r],r)?(u.push(ot[r]),o.push(r)):(f.push(ot[r]),s.push(r));if(rt){for(h=[],c=[],r=0;r<u.length;r++)lt[o[r]]===1&&(ct[u[r]]++,lt[o[r]]=0,ct[u[r]]===1&&(n[ut][u[r]]^=ft,h.push(u[r])));for(r=0;r<f.length;r++)lt[s[r]]===0&&(ct[f[r]]--,lt[s[r]]=1,ct[f[r]]===0&&(n[ut][f[r]]^=ft,c.push(f[r])));if(u=h,f=c,i)for(r=0;r<st.length;r++)n[ut][e=st[r]]&ft&&(n[ut][e]^=ft,u.push(e));else for(r=0;r<st.length;r++)n[ut][e=st[r]]&ft||(n[ut][e]^=ft,f.push(e))}else{for(r=0;r<u.length;r++)n[ut][u[r]]&ft&&(n[ut][u[r]]&=at);for(r=0;r<f.length;r++)n[ut][f[r]]&ft||(n[ut][f[r]]|=ft)}k.forEach(function(n){n(ft,ut,u,f)});it("filtered")}function tr(){return ti}function ir(){return ii}function rr(i,r){var o=[],u=yt,e,f=0;for(r&&r>0&&(f=r);--u>=vt&&i>0;)n.zero(e=ot[u])&&(f>0?--f:(o.push(t[e]),--i));if(rt)for(u=0;u<st.length&&i>0;u++)n.zero(e=st[u])&&(f>0?--f:(o.push(t[e]),--i));return o}function ur(i,r){var o=[],u,e,f=0;if(r&&r>0&&(f=r),rt)for(u=0;u<st.length&&i>0;u++)n.zero(e=st[u])&&(f>0?--f:(o.push(t[e]),--i));for(u=vt;u<yt&&i>0;)n.zero(e=ot[u])&&(f>0?--f:(o.push(t[e]),--i)),u++;return o}function di(s){function yt(f,e,h,v){function oi(){if(rt){l++;return}++l===ct&&(yt=u.arrayWiden(yt,ht<<=1),c=u.arrayWiden(c,ht),ct=b(ht))}var nt;rt&&(vt=h,h=et.length-f.length,v=f.length);var ri=a,yt=rt?[]:o(l,ct),fi=d,ei=g,wt=lt,bt=l,y=0,ft=0,p,pt,dt,ot,st,ui;for(it&&(fi=wt=r),it&&(ei=wt=r),a=new Array(l),l=0,c=rt?bt?c:[]:bt>1?u.arrayLengthen(c,i):o(i,ct),bt&&(dt=(pt=ri[0]).key);ft<v&&!((ot=s(f[ft]))>=ot);)++ft;while(ft<v){for(pt&&dt<=ot?(st=pt,ui=dt,yt[y]=l,pt=ri[++y],pt&&(dt=pt.key)):(st={key:ot,value:wt()},ui=ot),a[l]=st;ot<=ui;){if(p=e[ft]+(rt?vt:h),rt?c[p]?c[p].push(l):c[p]=[l]:c[p]=l,st.value=fi(st.value,t[p],!0),n.zeroExcept(p,ut,at)||(st.value=ei(st.value,t[p],!1)),++ft>=v)break;ot=s(f[ft])}oi()}while(y<bt)a[yt[y]=l]=ri[y++],oi();if(rt)for(nt=0;nt<i;nt++)c[nt]||(c[nt]=[]);if(l>y)if(rt)for(y=0;y<vt;++y)for(nt=0;nt<c[y].length;nt++)c[y][nt]=yt[c[y][nt]];else for(y=0;y<h;++y)c[y]=yt[c[y]];p=k.indexOf(w);l>1||rt?(w=gt,tt=ti):(!l&&kt&&(l=1,a=[{key:null,value:wt()}]),l===1?(w=ni,tt=ii):(w=r,tt=r),c=null);k[p]=w}function dt(n){var h;if(l>1||rt){var v=l,y=a,s=o(v,v),t,f,u;if(rt){for(t=0,u=0;t<i;++t)if(n[t]!==e){for(c[u]=c[t],f=0;f<c[u].length;f++)s[c[u][f]]=1;++u}}else for(t=0,u=0;t<i;++t)n[t]!==e&&(s[c[u]=c[t]]=1,++u);for(a=[],l=0,t=0;t<v;++t)s[t]&&(s[t]=l++,a.push(y[t]));if(l>1||rt)if(rt)for(t=0;t<u;++t)for(f=0;f<c[t].length;++f)c[t][f]=s[c[t][f]];else for(t=0;t<u;++t)c[t]=s[c[t]];else c=null;k[k.indexOf(w)]=l>1||rt?(tt=ti,w=gt):l===1?(tt=ii,w=ni):tt=w=r}else if(l===1){if(kt)return;for(h=0;h<i;++h)if(n[h]!==e)return;a=[];l=0;k[k.indexOf(w)]=w=tt=r}}function gt(i,r,u,f,e){if((i!==ft||r!==ut)&&!it){var o,l,s,v,h;if(rt){for(o=0,v=u.length;o<v;++o)if(n.zeroExcept(s=u[o],ut,at))for(l=0;l<c[s].length;l++)h=a[c[s][l]],h.value=d(h.value,t[s],!1,l);for(o=0,v=f.length;o<v;++o)if(n.onlyExcept(s=f[o],ut,at,r,i))for(l=0;l<c[s].length;l++)h=a[c[s][l]],h.value=g(h.value,t[s],e,l);return}for(o=0,v=u.length;o<v;++o)n.zeroExcept(s=u[o],ut,at)&&(h=a[c[s]],h.value=d(h.value,t[s],!1));for(o=0,v=f.length;o<v;++o)n.onlyExcept(s=f[o],ut,at,r,i)&&(h=a[c[s]],h.value=g(h.value,t[s],e))}}function ni(i,r,u,f,e){if((i!==ft||r!==ut)&&!it){for(var s,c=a[0],o=0,h=u.length;o<h;++o)n.zeroExcept(s=u[o],ut,at)&&(c.value=d(c.value,t[s],!1));for(o=0,h=f.length;o<h;++o)n.onlyExcept(s=f[o],ut,at,r,i)&&(c.value=g(c.value,t[s],e))}}function ti(){for(var f,u,r=0;r<l;++r)a[r].value=lt();if(rt){for(r=0;r<i;++r)for(f=0;f<c[r].length;f++)u=a[c[r][f]],u.value=d(u.value,t[r],!0,f);for(r=0;r<i;++r)if(!n.zeroExcept(r,ut,at))for(f=0;f<c[r].length;f++)u=a[c[r][f]],u.value=g(u.value,t[r],!1,f);return}for(r=0;r<i;++r)u=a[c[r]],u.value=d(u.value,t[r],!0);for(r=0;r<i;++r)n.zeroExcept(r,ut,at)||(u=a[c[r]],u.value=g(u.value,t[r],!1))}function ii(){var r,u=a[0];for(u.value=lt(),r=0;r<i;++r)u.value=d(u.value,t[r],!0);for(r=0;r<i;++r)n.zeroExcept(r,ut,at)||(u.value=g(u.value,t[r],!1))}function ri(){return it&&(tt(),it=!1),a}function hi(n){var t=wt(ri(),0,a.length,n);return bt.sort(t,0,t.length)}function pt(n,t,i){return d=n,g=t,lt=i,it=!0,st}function ei(){return pt(f.reduceIncrement,f.reduceDecrement,h)}function ci(n){return pt(f.reduceAdd(n),f.reduceSubtract(n),h)}function oi(n){function t(t){return n(t.value)}return wt=y.by(t),bt=p.by(t),st}function li(){return oi(v)}function ai(){return l}function si(){var n=k.indexOf(w);return n>=0&&k.splice(n,1),n=ui.indexOf(yt),n>=0&&ui.splice(n,1),n=nt.indexOf(dt),n>=0&&nt.splice(n,1),n=fi.indexOf(st),n>=0&&fi.splice(n,1),st}var st={top:hi,all:ri,reduce:pt,reduceCount:ei,reduceSum:ci,order:oi,orderNatural:li,size:ai,dispose:si,remove:si};fi.push(st);var a,c,ht=8,ct=b(ht),l=0,wt,bt,d,g,lt,w=r,tt=r,it=!0,kt=s===r,vt;return arguments.length<1&&(s=v),k.push(w),ui.push(yt),nt.push(dt),yt(et,ot,0,i),ei().orderNatural()}function fr(){var n=di(r),t=n.all;return delete n.all,delete n.top,delete n.order,delete n.orderNatural,delete n.size,n.value=function(){return t()[0].value},n}function gi(){fi.forEach(function(n){n.dispose()});var t=d.indexOf(oi);return t>=0&&d.splice(t,1),t=d.indexOf(si),t>=0&&d.splice(t,1),t=nt.indexOf(yi),t>=0&&nt.splice(t,1),n.masks[ut]&=at,ci()}var li,ei;typeof tt=="string"&&(li=tt,tt=function(n){return g(n,li)});var ri={filter:nr,filterExact:pi,filterRange:wi,filterFunction:bi,filterAll:ci,currentFilter:tr,hasCurrentFilter:ir,top:rr,bottom:ur,group:di,groupAll:fr,dispose:gi,remove:gi,accessor:tt,id:function(){return ai}},ft,at,ut,ai,et,ot,ht,pt,ct,gt,lt,dt,st=[],vi=w.by(function(n){return ht[n]}),wt=s.filterAll,ni,ti,ii,ui=[],fi=[],vt=0,yt=0,bt=0,kt;return d.unshift(oi),d.push(si),nt.push(yi),ei=n.add(),ut=ei.offset,ft=ei.one,at=~ft,ai=ut<<7|Math.log(ft)/Math.log(2),oi(t,0,i),si(t,0,i),ri}function st(){function s(f,s){var h;if(!u)for(h=s;h<i;++h)r=e(r,t[h],!0),n.zero(h)||(r=o(r,t[h],!1))}function v(i,f,s,h,c){var l,a,v;if(!u){for(l=0,v=s.length;l<v;++l)n.zero(a=s[l])&&(r=e(r,t[a],c));for(l=0,v=h.length;l<v;++l)n.only(a=h[l],f,i)&&(r=o(r,t[a],c))}}function w(){var u;for(r=a(),u=0;u<i;++u)r=e(r,t[u],!0),n.zero(u)||(r=o(r,t[u],!1))}function c(n,t,i){return e=n,o=t,a=i,u=!0,l}function y(){return c(f.reduceIncrement,f.reduceDecrement,h)}function b(n){return c(f.reduceAdd(n),f.reduceSubtract(n),h)}function g(){return u&&(w(),u=!1),r}function p(){var n=k.indexOf(v);return n>=0&&k.splice(n,1),n=d.indexOf(s),n>=0&&d.splice(n,1),l}var l={reduce:c,reduceCount:y,reduceSum:b,value:g,dispose:p,remove:p},r,e,o,a,u=!0;return k.push(v),d.push(s),s(t,0,i),y()}function ht(){return i}function ct(){return t}function lt(){for(var u=[],r=0,r=0;r<i;r++)n.zero(r)&&u.push(t[r]);return u}function at(n){if(typeof n!="function"){console.warn("onChange callback parameter must be a function!");return}return tt.push(n),function(){tt.splice(tt.indexOf(n),1)}}function it(n){for(var t=0;t<tt.length;t++)tt[t](n)}var rt={add:ut,remove:ft,dimension:ot,groupAll:st,size:ht,all:ct,allFiltered:lt,onChange:at,isElementFiltered:et},t=[],i=0,n,k=[],d=[],nt=[],tt=[];return n=new u.bitarray(0),arguments.length?ut(arguments[0]):rt}function o(n,t){return(t<257?u.array8:t<65537?u.array16:u.array32)(n)}function l(n){for(var i=o(n,n),t=-1;++t<n;)i[t]=t;return i}function b(n){return n===8?256:n===16?65536:4294967296}var u=n("./array"),s=n("./filter"),v=n("./identity"),r=n("./null"),h=n("./zero"),y=n("./heapselect"),p=n("./heap"),a=n("./bisect"),k=n("./insertionsort"),c=n("./permute"),w=n("./quicksort"),f=n("./reduce"),d=n("./../package.json"),g=n("lodash.result"),e=-1;i.crossfilter=nt;i.crossfilter.heap=p;i.crossfilter.heapselect=y;i.crossfilter.bisect=a;i.crossfilter.insertionsort=k;i.crossfilter.permute=c;i.crossfilter.quicksort=w;i.crossfilter.version=d.version},{"./../package.json":3,"./array":4,"./bisect":5,"./filter":7,"./heap":8,"./heapselect":9,"./identity":10,"./insertionsort":11,"./null":12,"./permute":13,"./quicksort":14,"./reduce":15,"./zero":16,"lodash.result":2}],7:[function(n,t){"use strict";function i(n,t){return function(i){var r=i.length;return[n.left(i,t,0,r),n.right(i,t,0,r)]}}function r(n,t){var i=t[0],r=t[1];return function(t){var u=t.length;return[n.left(t,i,0,u),n.left(t,r,0,u)]}}function u(n){return[0,n.length]}t.exports={filterExact:i,filterRange:r,filterAll:u}},{}],8:[function(n,t){"use strict";function i(n){function t(n,t,r){for(var u=r-t,f=(u>>>1)+1;--f>0;)i(n,f,u,t);return n}function r(n,t,r){for(var u=r-t,f;--u>0;)f=n[t],n[t]=n[t+u],n[t+u]=f,i(n,1,u,t);return n}function i(t,i,r,u){for(var e=t[--u+i],o=n(e),f;(f=i<<1)<=r;){if(f<r&&n(t[u+f])>n(t[u+f+1])&&f++,o<=n(t[u+f]))break;t[u+i]=t[u+f];i=f}t[u+i]=e}return t.sort=r,t}var r=n("./identity");t.exports=i(r);t.exports.by=i},{"./identity":10}],9:[function(n,t){"use strict";function i(n){function i(i,r,u,f){for(var e=new Array(f=Math.min(u-r,f)),s,h,o=0;o<f;++o)e[o]=i[r++];if(t(e,0,f),r<u){s=n(e[0]);do n(h=i[r])>s&&(e[0]=h,s=n(t(e,0,f)[0]));while(++r<u)}return e}var t=u.by(n);return i}var r=n("./identity"),u=n("./heap");t.exports=i(r);t.exports.by=i},{"./heap":8,"./identity":10}],10:[function(n,t){"use strict";function i(n){return n}t.exports=i},{}],11:[function(n,t){"use strict";function i(n){function t(t,i,r){for(var f=i+1;f<r;++f){for(var u=f,e=t[f],o=n(e);u>i&&n(t[u-1])>o;--u)t[u]=t[u-1];t[u]=e}return t}return t}var r=n("./identity");t.exports=i(r);t.exports.by=i},{"./identity":10}],12:[function(n,t){"use strict";function i(){return null}t.exports=i},{}],13:[function(n,t){"use strict";function i(n,t,i){for(var r=0,u=t.length,f=i?JSON.parse(JSON.stringify(n)):new Array(u);r<u;++r)f[r]=n[t[r]];return f}t.exports=i},{}],14:[function(n,t){function i(n){function t(n,t,u){return(u-t<f?i:r)(n,t,u)}function r(i,r,u){var tt=(u-r)/6|0,rt=r+tt,ut=u-1-tt,it=r+u-1>>1,ot=it-tt,st=it+tt,k=i[rt],w=n(k),a=i[ot],s=n(a),v=i[it],l=n(v),y=i[st],h=n(y),d=i[ut],b=n(d),f,g,nt,ft,et;w>s&&(f=k,k=a,a=f,f=w,w=s,s=f);h>b&&(f=y,y=d,d=f,f=h,h=b,b=f);w>l&&(f=k,k=v,v=f,f=w,w=l,l=f);s>l&&(f=a,a=v,v=f,f=s,s=l,l=f);w>h&&(f=k,k=y,y=f,f=w,w=h,h=f);l>h&&(f=v,v=y,y=f,f=l,l=h,h=f);s>b&&(f=a,a=d,d=f,f=s,s=b,b=f);s>l&&(f=a,a=v,v=f,f=s,s=l,l=f);h>b&&(f=y,y=d,d=f,f=h,h=b,b=f);var ct=a,c=s,lt=y,p=h;i[rt]=k;i[ot]=i[r];i[it]=v;i[st]=i[u-1];i[ut]=d;var o=r+1,e=u-2,ht=c<=p&&c>=p;if(ht){for(g=o;g<=e;++g)if(nt=i[g],ft=n(nt),ft<c)g!==o&&(i[g]=i[o],i[o]=nt),++o;else if(ft>c)for(;;)if(et=n(i[e]),et>c){e--;continue}else if(et<c){i[g]=i[o];i[o++]=i[e];i[e--]=nt;break}else{i[g]=i[e];i[e--]=nt;break}}else(function(){for(var r,u,f,t=o;t<=e;t++)if(r=i[t],u=n(r),u<c)t!==o&&(i[t]=i[o],i[o]=r),++o;else if(u>p)for(;;)if(f=n(i[e]),f>p){if(e--,e<t)break;continue}else{f<c?(i[t]=i[o],i[o++]=i[e],i[e--]=r):(i[t]=i[e],i[e--]=r);break}})();return(i[r]=i[o-1],i[o-1]=ct,i[u-1]=i[e+1],i[e+1]=lt,t(i,r,o-1),t(i,e+2,u),ht)?i:(o<rt&&e>ut&&function(){for(var s,r,t,u,f;(s=n(i[o]))<=c&&s>=c;)++o;while((r=n(i[e]))<=p&&r>=p)--e;for(t=o;t<=e;t++)if(u=i[t],f=n(u),f<=c&&f>=c)t!==o&&(i[t]=i[o],i[o]=u),o++;else if(f<=p&&f>=p)for(;;)if(r=n(i[e]),r<=p&&r>=p){if(e--,e<t)break;continue}else{r<c?(i[t]=i[o],i[o++]=i[e],i[e--]=u):(i[t]=i[e],i[e--]=u);break}}(),t(i,o,e+1))}var i=u.by(n);return t}var r=n("./identity"),u=n("./insertionsort"),f=32;t.exports=i(r);t.exports.by=i},{"./identity":10,"./insertionsort":11}],15:[function(n,t){"use strict";function i(n){return n+1}function r(n){return n-1}function u(n){return function(t,i){return t+ +n(i)}}function f(n){return function(t,i){return t-n(i)}}t.exports={reduceIncrement:i,reduceDecrement:r,reduceAdd:u,reduceSubtract:f}},{}],16:[function(n,t){"use strict";function i(){return 0}t.exports=i},{}]},{},[1])(1)});
/*!
 *  dc 3.0.4
 *  http://dc-js.github.io/dc.js/
 *  Copyright 2012-2016 Nick Zhu & the dc.js Developers
 *  https://github.com/dc-js/dc.js/blob/master/AUTHORS
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
(function(){function t(n,t){"use strict";function u(n,t){for(var i=0;i<n.length;i++)if(n[i].key===t)return n[i]}var i={version:"3.0.4",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null},r;return i.chartRegistry=function(){function t(t){return t||(t=i.constants.DEFAULT_CHART_GROUP),n[t]||(n[t]=[]),t}var n={};return{has:function(t){for(var i in n)if(n[i].indexOf(t)>=0)return!0;return!1},register:function(i,r){r=t(r);n[r].push(i)},deregister:function(i,r){r=t(r);for(var u=0;u<n[r].length;u++)if(n[r][u].anchorName()===i.anchorName()){n[r].splice(u,1);break}},clear:function(t){t?delete n[t]:n={}},list:function(i){return i=t(i),n[i]}}}(),i.registerChart=function(n,t){i.chartRegistry.register(n,t)},i.deregisterChart=function(n,t){i.chartRegistry.deregister(n,t)},i.hasChart=function(n){return i.chartRegistry.has(n)},i.deregisterAllCharts=function(n){i.chartRegistry.clear(n)},i.filterAll=function(n){for(var r=i.chartRegistry.list(n),t=0;t<r.length;++t)r[t].filterAll()},i.refocusAll=function(n){for(var r=i.chartRegistry.list(n),t=0;t<r.length;++t)r[t].focus&&r[t].focus()},i.renderAll=function(n){for(var r=i.chartRegistry.list(n),t=0;t<r.length;++t)r[t].render();i._renderlet!==null&&i._renderlet(n)},i.redrawAll=function(n){for(var r=i.chartRegistry.list(n),t=0;t<r.length;++t)r[t].redraw();i._renderlet!==null&&i._renderlet(n)},i.disableTransitions=!1,i.transition=function(n,t,r,u){if(i.disableTransitions||t<=0)return n;var f=n.transition(u);return(t>=0||t!==undefined)&&(f=f.duration(t)),(r>=0||r!==undefined)&&(f=f.delay(r)),f},i.optionalTransition=function(n,t,r,u){return n?function(n){return i.transition(n,t,r,u)}:function(n){return n}},i.afterTransition=function(n,t){if(n.empty()||!n.duration)t.call(n);else{var i=0;n.each(function(){++i}).on("end",function(){--i||t.call(n)})}},i.units={},i.units.integers=function(n,t){return Math.abs(t-n)},i.units.ordinal=function(){throw new Error("dc.units.ordinal should not be called - it is a placeholder");},i.units.fp={},i.units.fp.precision=function(n){var t=function(n,r){var u=Math.abs((r-n)/t.resolution);return i.utils.isNegligible(u-Math.floor(u))?Math.floor(u):Math.ceil(u)};return t.resolution=n,t},i.round={},i.round.floor=function(n){return Math.floor(n)},i.round.ceil=function(n){return Math.ceil(n)},i.round.round=function(n){return Math.round(n)},i.override=function(n,t,i){var r=n[t];n["_"+t]=r;n[t]=i},i.renderlet=function(n){return arguments.length?(i._renderlet=n,i):i._renderlet},i.instanceOfChart=function(n){return n instanceof Object&&n.__dcFlag__&&!0},i.errors={},i.errors.Exception=function(n){var t=n||"Unexpected internal error";this.message=t;this.toString=function(){return t};this.stack=(new Error).stack},i.errors.Exception.prototype=Object.create(Error.prototype),i.errors.Exception.prototype.constructor=i.errors.Exception,i.errors.InvalidStateException=function(){i.errors.Exception.apply(this,arguments)},i.errors.InvalidStateException.prototype=Object.create(i.errors.Exception.prototype),i.errors.InvalidStateException.prototype.constructor=i.errors.InvalidStateException,i.errors.BadArgumentException=function(){i.errors.Exception.apply(this,arguments)},i.errors.BadArgumentException.prototype=Object.create(i.errors.Exception.prototype),i.errors.BadArgumentException.prototype.constructor=i.errors.BadArgumentException,i.dateFormat=n.timeFormat("%m/%d/%Y"),i.printers={},i.printers.filters=function(n){for(var r="",t=0;t<n.length;++t)t>0&&(r+=", "),r+=i.printers.filter(n[t]);return r},i.printers.filter=function(n){var t="";return typeof n!="undefined"&&n!==null&&(n instanceof Array?n.length>=2?t="["+i.utils.printSingleValue(n[0])+" -> "+i.utils.printSingleValue(n[1])+"]":n.length>=1&&(t=i.utils.printSingleValue(n[0])):t=i.utils.printSingleValue(n)),t},i.pluck=function(n,t){return t?function(i,r){return t.call(i,i[n],r)}:function(t){return t[n]}},i.utils={},i.utils.printSingleValue=function(n){var t=""+n;return n instanceof Date?t=i.dateFormat(n):typeof n=="string"?t=n:i.utils.isFloat(n)?t=i.utils.printSingleValue.fformat(n):i.utils.isInteger(n)&&(t=Math.round(n)),t},i.utils.printSingleValue.fformat=n.format(".2f"),i.utils.toTimeFunc=function(n){return"time"+n.charAt(0).toUpperCase()+n.slice(1)},i.utils.add=function(t,r,u){if(typeof r=="string"&&(r=r.replace("%","")),t instanceof Date)return(typeof r=="string"&&(r=+r),u==="millis")?new Date(t.getTime()+r):(u=u||n.timeDay,typeof u!="function"&&(u=n[i.utils.toTimeFunc(u)]),u.offset(t,r));if(typeof r=="string"){var f=+r/100;return t>0?t*(1+f):t*(1-f)}return t+r},i.utils.subtract=function(t,r,u){if(typeof r=="string"&&(r=r.replace("%","")),t instanceof Date)return(typeof r=="string"&&(r=+r),u==="millis")?new Date(t.getTime()-r):(u=u||n.timeDay,typeof u!="function"&&(u=n[i.utils.toTimeFunc(u)]),u.offset(t,-r));if(typeof r=="string"){var f=+r/100;return t<0?t*(1+f):t*(1-f)}return t-r},i.utils.isNumber=function(n){return n===+n},i.utils.isFloat=function(n){return n===+n&&n!==(n|0)},i.utils.isInteger=function(n){return n===+n&&n===(n|0)},i.utils.isNegligible=function(n){return!i.utils.isNumber(n)||n<i.constants.NEGLIGIBLE_NUMBER&&n>-i.constants.NEGLIGIBLE_NUMBER},i.utils.clamp=function(n,t,i){return n<t?t:n>i?i:n},i.utils.constant=function(n){return function(){return n}},r=0,i.utils.uniqueId=function(){return++r},i.utils.nameToId=function(n){return n.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},i.utils.appendOrSelect=function(n,t,i){i=i||t;var r=n.select(t);return r.empty()&&(r=n.append(i)),r},i.utils.safeNumber=function(n){return i.utils.isNumber(+n)?+n:0},i.utils.arraysEqual=function(n,t){return!n&&!t?!0:!n||!t?!1:n.length===t.length&&n.every(function(n,i){return n.valueOf()===t[i].valueOf()})},i.utils.allChildren=function(n){var t=[],r;if(t.push(n.path),console.log("currentNode",n),n.children)for(r=0;r<n.children.length;r++)t=t.concat(i.utils.allChildren(n.children[r]));return t},i.utils.toHierarchy=function(n,t){for(var r,c={key:"root",children:[]},e=0;e<n.length;e++){var o=n[e],f=o.key,v=t(o),l=c;for(r=0;r<f.length;r++){var a=f.slice(0,r+1),s=l.children,h=f[r],i;r+1<f.length?(i=u(s,h),i===void 0&&(i={key:h,children:[],path:a},s.push(i)),l=i):(i={key:h,value:v,data:o,path:a},s.push(i))}}return c},i.utils.getAncestors=function(n){for(var i=[],t=n;t.parent;)i.unshift(t.name),t=t.parent;return i},i.utils.arraysIdentical=function(n,t){var i=n.length;if(i!==t.length)return!1;while(i--)if(n[i]!==t[i])return!1;return!0},i.logger=function(){var n={},t;return n.enableDebugLog=!1,n.warn=function(t){return console&&(console.warn?console.warn(t):console.log&&console.log(t)),n},t={},n.warnOnce=function(r){return t[r]||(t[r]=!0,i.logger.warn(r)),n},n.debug=function(t){return n.enableDebugLog&&console&&(console.debug?console.debug(t):console.log&&console.log(t)),n},n.deprecate=function(t,i){function u(){return r||(n.warn(i),r=!0),t.apply(this,arguments)}var r=!1;return u},n}(),i.config=function(){var n={},r=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"],t=r;return n.defaultColors=function(u){return arguments.length?(t=u,n):(t===r&&i.logger.warnOnce("You are using d3.schemeCategory20c, which has been removed in D3v5. See the explanation at https://github.com/d3/d3/blob/master/CHANGES.md#changes-in-d3-50. DC is using it for backward compatibility, however it will be changed in DCv3.1. You can change it by calling dc.config.defaultColors(newScheme). See https://github.com/d3/d3-scale-chromatic for some alternatives."),t)},n}(),i.events={current:null},i.events.trigger=function(n,t){if(!t){n();return}i.events.current=n;setTimeout(function(){n===i.events.current&&n()},t)},i.filters={},i.filters.RangedFilter=function(n,t){var i=[n,t];return i.isFiltered=function(n){return n>=this[0]&&n<this[1]},i.filterType="RangedFilter",i},i.filters.TwoDimensionalFilter=function(n){if(n===null)return null;var t=n;return t.isFiltered=function(n){return n.length&&n.length===t.length&&n[0]===t[0]&&n[1]===t[1]},t.filterType="TwoDimensionalFilter",t},i.filters.RangedTwoDimensionalFilter=function(n){if(n===null)return null;var i=n,t;return t=i[0]instanceof Array?[[Math.min(n[0][0],n[1][0]),Math.min(n[0][1],n[1][1])],[Math.max(n[0][0],n[1][0]),Math.max(n[0][1],n[1][1])]]:[[n[0],-Infinity],[n[1],Infinity]],i.isFiltered=function(n){var i,r;return n instanceof Array?(i=n[0],r=n[1]):(i=n,r=t[0][1]),i>=t[0][0]&&i<t[1][0]&&r>=t[0][1]&&r<t[1][1]},i.filterType="RangedTwoDimensionalFilter",i},i.filters.HierarchyFilter=function(n){if(n===null)return null;var t=n.slice(0);return t.isFiltered=function(n){if(!(t.length&&n&&n.length&&n.length>=t.length))return!1;for(var i=0;i<t.length;i++)if(n[i]!==t[i])return!1;return!0},t},i.baseMixin=function(r){function ti(){f&&(ut?f.attr("viewBox")||f.attr("viewBox","0 0 "+r.width()+" "+r.height()):f.attr("width",r.width()).attr("height",r.height()))}function ii(){return f=r.root().append("svg"),ti(),f}function ri(n){if(!r[n]||!r[n]())throw new i.errors.InvalidStateException("Mandatory attribute chart."+n+" is missing on chart[#"+r.anchorName()+"]");}function ui(n){if(r.dimension()&&r.dimension().filter){var t=ot(r.dimension(),n);t&&(n=t)}return n}var c,p,w,b;r.__dcFlag__=i.utils.uniqueId();var st,rt,l,u,f,k,d=200,ht=function(n){var t=n&&n.getBoundingClientRect&&n.getBoundingClientRect().width;return t&&t>d?t:d},ct=ht,g=200,lt=function(n){var t=n&&n.getBoundingClientRect&&n.getBoundingClientRect().height;return t&&t>g?t:g},at=lt,a,v,ut=!1,vt=i.pluck("key"),yt=i.pluck("value"),pt=i.pluck("key"),nt=i.pluck("key"),tt,ft=!1,wt=function(n){return r.keyAccessor()(n)+": "+r.valueAccessor()(n)},bt=!0,kt=!1,dt=750,gt=0,et=i.printers.filters,it=["dimension","group"],y=i.constants.DEFAULT_CHART_GROUP,e=n.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),s,h,o=[],ot=function(n,t){return t.length===0?n.filter(null):t.length!==1||t[0].isFiltered?t.length===1&&t[0].filterType==="RangedFilter"?n.filterRange(t[0]):n.filterFunction(function(n){for(var i,r=0;r<t.length;r++)if((i=t[r],i.isFiltered&&i.isFiltered(n))||i<=n&&i>=n)return!0;return!1}):n.filterExact(t[0]),t},ni=function(n){return n.all()};return r.height=function(n){return arguments.length?(at=n?typeof n=="function"?n:i.utils.constant(n):lt,v=undefined,r):(i.utils.isNumber(v)||(v=at(u.node())),v)},r.width=function(n){return arguments.length?(ct=n?typeof n=="function"?n:i.utils.constant(n):ht,a=undefined,r):(i.utils.isNumber(a)||(a=ct(u.node())),a)},r.minWidth=function(n){return arguments.length?(d=n,r):d},r.minHeight=function(n){return arguments.length?(g=n,r):g},r.useViewBoxResizing=function(n){return arguments.length?(ut=n,r):ut},r.dimension=function(n){return arguments.length?(st=n,r.expireCache(),r):st},r.data=function(n){return arguments.length?(ni=typeof n=="function"?n:i.utils.constant(n),r.expireCache(),r):ni.call(r,rt)},r.group=function(n,t){return arguments.length?(rt=n,r._groupName=t,r.expireCache(),r):rt},r.ordering=function(n){return arguments.length?(nt=n,tt=t.quicksort.by(nt),r.expireCache(),r):nt},r._computeOrderedGroups=function(n){var i=n.slice(0);return i.length<=1?i:(tt||(tt=t.quicksort.by(nt)),tt(i,0,i.length))},r.filterAll=function(){return r.filter(null)},r.select=function(n){return u.select(n)},r.selectAll=function(n){return u?u.selectAll(n):null},r.anchor=function(t,f){if(!arguments.length)return l;if(i.instanceOfChart(t))l=t.anchor(),u=t.root(),k=!0;else if(t)l=t.select&&t.classed?t.node():t,u=n.select(l),u.classed(i.constants.CHART_CLASS,!0),i.registerChart(r,f),k=!1;else throw new i.errors.BadArgumentException("parent must be defined");return y=f,r},r.anchorName=function(){var n=r.anchor();return n&&n.id?n.id:n&&n.replace?n.replace("#",""):"dc-chart"+r.chartID()},r.root=function(n){return arguments.length?(u=n,r):u},r.svg=function(n){return arguments.length?(f=n,r):f},r.resetSvg=function(){return r.select("svg").remove(),ii()},r.filterPrinter=function(n){return arguments.length?(et=n,r):et},r.controlsUseVisibility=function(n){return arguments.length?(kt=n,r):kt},r.turnOnControls=function(){if(u){var n=r.controlsUseVisibility()?"visibility":"display";r.selectAll(".reset").style(n,null);r.selectAll(".filter").text(et(r.filters())).style(n,null)}return r},r.turnOffControls=function(){if(u){var n=r.controlsUseVisibility()?"visibility":"display",t=r.controlsUseVisibility()?"hidden":"none";r.selectAll(".reset").style(n,t);r.selectAll(".filter").style(n,t).text(r.filter())}return r},r.transitionDuration=function(n){return arguments.length?(dt=n,r):dt},r.transitionDelay=function(n){return arguments.length?(gt=n,r):gt},r._mandatoryAttributes=function(n){return arguments.length?(it=n,r):it},r.render=function(){v=a=undefined;e.call("preRender",r,r);it&&it.forEach(ri);var n=r._doRender();return s&&s.render(),r._activateRenderlets("postRender"),n},r._activateRenderlets=function(n){if(e.call("pretransition",r,r),r.transitionDuration()>0&&f)f.transition().duration(r.transitionDuration()).delay(r.transitionDelay()).on("end",function(){e.call("renderlet",r,r);n&&e.call(n,r,r)});else e.call("renderlet",r,r),n&&e.call(n,r,r)},r.redraw=function(){ti();e.call("preRedraw",r,r);var n=r._doRedraw();return s&&s.render(),r._activateRenderlets("postRedraw"),n},r.commitHandler=function(n){return arguments.length?(h=n,r):h},r.redrawGroup=function(){return h?h(!1,function(n){n?console.log(n):i.redrawAll(r.chartGroup())}):i.redrawAll(r.chartGroup()),r},r.renderGroup=function(){return h?h(!1,function(n){n?console.log(n):i.renderAll(r.chartGroup())}):i.renderAll(r.chartGroup()),r},r._invokeFilteredListener=function(n){n!==undefined&&e.call("filtered",r,r,n)},r._invokeZoomedListener=function(){e.call("zoomed",r,r)},c=function(n,t){return t===null||typeof t=="undefined"?n.length>0:n.some(function(n){return t<=n&&t>=n})},r.hasFilterHandler=function(n){return arguments.length?(c=n,r):c},r.hasFilter=function(n){return c(o,n)},p=function(n,t){for(var i=0;i<n.length;i++)if(n[i]<=t&&n[i]>=t){n.splice(i,1);break}return n},r.removeFilterHandler=function(n){return arguments.length?(p=n,r):p},w=function(n,t){return n.push(t),n},r.addFilterHandler=function(n){return arguments.length?(w=n,r):w},b=function(){return[]},r.resetFilterHandler=function(n){return arguments.length?(b=n,r):b},r.replaceFilter=function(n){return o=b(o),r.filter(n),r},r.filter=function(n){if(!arguments.length)return o.length>0?o[0]:null;var t=o;return n instanceof Array&&n[0]instanceof Array&&!n.isFiltered?n[0].forEach(function(n){t=c(t,n)?p(t,n):w(t,n)}):t=n===null?b(t):c(t,n)?p(t,n):w(t,n),o=ui(t),r._invokeFilteredListener(n),u!==null&&r.hasFilter()?r.turnOnControls():r.turnOffControls(),r},r.filters=function(){return o},r.highlightSelected=function(t){n.select(t).classed(i.constants.SELECTED_CLASS,!0);n.select(t).classed(i.constants.DESELECTED_CLASS,!1)},r.fadeDeselected=function(t){n.select(t).classed(i.constants.SELECTED_CLASS,!1);n.select(t).classed(i.constants.DESELECTED_CLASS,!0)},r.resetHighlight=function(t){n.select(t).classed(i.constants.SELECTED_CLASS,!1);n.select(t).classed(i.constants.DESELECTED_CLASS,!1)},r.onClick=function(n){var t=r.keyAccessor()(n);i.events.trigger(function(){r.filter(t);r.redrawGroup()})},r.filterHandler=function(n){return arguments.length?(ot=n,r):ot},r._doRender=function(){return r},r._doRedraw=function(){return r},r.legendables=function(){return[]},r.legendHighlight=function(){},r.legendReset=function(){},r.legendToggle=function(){},r.isLegendableHidden=function(){return!1},r.keyAccessor=function(n){return arguments.length?(vt=n,r):vt},r.valueAccessor=function(n){return arguments.length?(yt=n,r):yt},r.label=function(n,t){return arguments.length?(pt=n,(t===undefined||t)&&(ft=!0),r):pt},r.renderLabel=function(n){return arguments.length?(ft=n,r):ft},r.title=function(n){return arguments.length?(wt=n,r):wt},r.renderTitle=function(n){return arguments.length?(bt=n,r):bt},r.renderlet=i.logger.deprecate(function(n){r.on("renderlet."+i.utils.uniqueId(),n);return r},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),r.chartGroup=function(n){return arguments.length?(k||i.deregisterChart(r,y),y=n,k||i.registerChart(r,y),r):y},r.expireCache=function(){return r},r.legend=function(n){return arguments.length?(s=n,s.parent(r),r):s},r.chartID=function(){return r.__dcFlag__},r.options=function(n){var u=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var t in n)typeof r[t]=="function"?n[t]instanceof Array&&u.indexOf(t)!==-1?r[t].apply(r,n[t]):r[t].call(r,n[t]):i.logger.debug("Not a valid option setter name: "+t);return r},r.on=function(n,t){e.on(n,t);return r},r},i.marginMixin=function(n){var t={top:10,right:50,bottom:30,left:30};return n.margins=function(i){return arguments.length?(t=i,n):t},n.effectiveWidth=function(){return n.width()-n.margins().left-n.margins().right},n.effectiveHeight=function(){return n.height()-n.margins().top-n.margins().bottom},n},i.colorMixin=function(t){var r=n.scaleOrdinal(i.config.defaultColors()),f=!0,u=function(n){return t.keyAccessor()(n)};return t.colors=function(u){return arguments.length?(r=u instanceof Array?n.scaleQuantize().range(u):typeof u=="function"?u:i.utils.constant(u),t):r},t.ordinalColors=function(i){return t.colors(n.scaleOrdinal().range(i))},t.linearColors=function(i){return t.colors(n.scaleLinear().range(i).interpolate(n.interpolateHcl))},t.colorAccessor=function(n){return arguments.length?(u=n,f=!1,t):u},t.defaultColorAccessor=function(){return f},t.colorDomain=function(n){return arguments.length?(r.domain(n),t):r.domain()},t.calculateColorDomain=function(){var i=[n.min(t.data(),t.colorAccessor()),n.max(t.data(),t.colorAccessor())];return r.domain(i),t},t.getColor=function(n,t){return r(u.call(this,n,t))},t.colorCalculator=i.logger.deprecate(function(n){return arguments.length?(t.getColor=n,t):t.getColor},"colorMixin.colorCalculator has been deprecated. Please colorMixin.colors and colorMixin.colorAccessor instead"),t},i.coordinateGridMixin=function(t){function pi(u,f){t.isOrdinal()?(r.bandwidth||(i.logger.warn("For compatibility with d3v4+, dc.js d3.0 ordinal bar/line/bubble charts need d3.scaleBand() for the x scale, instead of d3.scaleOrdinal(). Replacing .x() with a d3.scaleBand with the same domain - make the same change in your code to avoid this warning!"),r=n.scaleBand().domain(r.domain())),(t.elasticX()||r.domain().length===0)&&r.domain(t._ordinalXDomain())):t.elasticX()&&r.domain([t.xAxisMin(),t.xAxisMax()]);var e=r.domain();(f||!i.utils.arraysEqual(ii,e))&&t.rescale();ii=e;t.isOrdinal()?r.range([0,t.xAxisLength()]).paddingInner(vt).paddingOuter(t._useOuterPadding()?at:0):r.range([0,t.xAxisLength()]);o=o.scale(t.x());wi(u)}function wi(n){var u=n.select("g."+wt),s;if(ct){u.empty()&&(u=n.insert("g",":first-child").attr("class",yt+" "+wt).attr("transform","translate("+t.margins().left+","+t.margins().top+")"));var h=o.tickValues()?o.tickValues():typeof r.ticks=="function"?r.ticks.apply(r,o.tickArguments()):r.domain(),f=u.selectAll("line").data(h),e=f.enter().append("line").attr("x1",function(n){return r(n)}).attr("y1",t._xAxisY()-t.margins().top).attr("x2",function(n){return r(n)}).attr("y2",0).attr("opacity",0);i.transition(e,t.transitionDuration(),t.transitionDelay()).attr("opacity",1);s=e.merge(f);i.transition(s,t.transitionDuration(),t.transitionDelay()).attr("x1",function(n){return r(n)}).attr("y1",t._xAxisY()-t.margins().top).attr("x2",function(n){return r(n)}).attr("y2",0);f.exit().remove()}else u.selectAll("line").remove()}function si(){return a?n.axisRight():n.axisLeft()}function hi(){return t.anchorName().replace(/[ .#=\[\]"]/g,"-")+"-clip"}function ci(){var u=i.utils.appendOrSelect(it,"defs"),n=hi(),f=i.utils.appendOrSelect(u,"#"+n,"clipPath").attr("id",n),r=nt*2;i.utils.appendOrSelect(f,"rect").attr("width",t.xAxisLength()+r).attr("height",t.yAxisHeight()+r).attr("transform","translate(-"+nt+", -"+nt+")")}function li(n){t.isOrdinal()&&(k=!1);pi(t.g(),n);t._prepareYAxis(t.g());t.plotData();(t.elasticX()||l||n)&&t.renderXAxis(t.g());(t.elasticY()||l||n)&&t.renderYAxis(t.g());n?t.renderBrush(t.g(),!1):t.redrawBrush(t.filter(),l);t.fadeDeselectedArea(t.filter());l=!1}function bi(){st=r.copy();lt?t._enableMouseZoom():oi&&t._disableMouseZoom()}function ki(n,r){var u;nr(n)?(t.x().domain(n),u=i.filters.RangedFilter(n[0],n[1])):(t.x().domain(v),u=null);t.replaceFilter(u);t.rescale();t.redraw();r||(e&&!i.utils.arraysEqual(t.filter(),e.filter())&&i.events.trigger(function(){e.replaceFilter(u);e.redraw()}),t._invokeZoomedListener(),i.events.trigger(function(){t.redrawGroup()},i.constants.EVENT_DELAY))}function di(t,i,r){var u=(i[1]-i[0])/(t[1]-t[0]),f=-1*r(t[0]);return n.zoomIdentity.scale(u).translate(f,0)}function ai(){g&&g.transform(t.root(),di(t.x().domain(),v,st))}function gi(){if(n.event.sourceEvent&&(!n.event.sourceEvent.type||["start","zoom","end"].indexOf(n.event.sourceEvent.type)===-1)){var i=n.event.transform.rescaleX(st).domain();t.focus(i,!1)}}function vi(n,t){return!n||n.length!==2||!t||t.length!==2?n:((n[0]>t[1]||n[1]<t[0])&&console.warn("Could not intersect extents, will reset"),[n[0]>t[0]?n[0]:t[0],n[1]<t[1]?n[1]:t[1]])}function nr(n){return n instanceof Array&&n.length>1}var yt="grid-line",pt="horizontal",wt="vertical",bt="y-axis-label",kt="x-axis-label",tt="custom-brush-handle",dt=12;t=i.colorMixin(i.marginMixin(i.baseMixin(t)));t.colors(n.scaleOrdinal(n.schemeCategory10));t._mandatoryAttributes().push("x");var it,w,ot,r,st,v,o=n.axisBottom(),gt=i.units.integers,rt=0,ut=n.timeDay,ni=!1,ti,b=0,ii,f,u=null,ft=0,ri=!1,ui,y=0,c=n.brushX(),s,k=!0,fi=!1,ei,ht=!1,ct=!1,l=!1,h,d=[1,Infinity],et=!0,g=n.zoom().on("zoom",gi),yi=n.zoom().on("zoom",null),oi=!1,e,p,lt=!1,nt=0,at=.5,vt=0,a=!1;return t.rescale=function(){return h=undefined,l=!0,t},t.resizing=function(){return l},t.rangeChart=function(n){return arguments.length?(e=n,e.focusChart(t),t):e},t.zoomScale=function(n){return arguments.length?(d=n,t):d},t.zoomOutRestrict=function(n){return arguments.length?(et=n,t):et},t._generateG=function(n){it=n===undefined?t.svg():n;var i=window.location.href.split("#")[0];return w=it.append("g"),ot=w.append("g").attr("class","chart-body").attr("transform","translate("+t.margins().left+", "+t.margins().top+")").attr("clip-path","url("+i+"#"+hi()+")"),w},t.g=function(n){return arguments.length?(w=n,t):w},t.mouseZoomable=function(n){return arguments.length?(lt=n,t):lt},t.chartBodyG=function(n){return arguments.length?(ot=n,t):ot},t.x=function(n){return arguments.length?(r=n,v=r.domain(),t.rescale(),t):r},t.xOriginalDomain=function(){return v},t.xUnits=function(n){return arguments.length?(gt=n,t):gt},t.xAxis=function(n){return arguments.length?(o=n,t):o},t.elasticX=function(n){return arguments.length?(ni=n,t):ni},t.xAxisPadding=function(n){return arguments.length?(rt=n,t):rt},t.xAxisPaddingUnit=function(n){return arguments.length?(ut=n,t):ut},t.xUnitCount=function(){return h===undefined&&(t.isOrdinal()?h=t.x().domain().length:(h=t.xUnits()(t.x().domain()[0],t.x().domain()[1]),h instanceof Array&&(h=h.length))),h},t.useRightYAxis=function(n){return arguments.length?(a!==n&&u&&i.logger.warn("Value of useRightYAxis has been altered, after yAxis was created. You might get unexpected yAxis behavior. Make calls to useRightYAxis sooner in your chart creation process."),a=n,t):a},t.isOrdinal=function(){return t.xUnits()===i.units.ordinal},t._useOuterPadding=function(){return!0},t._ordinalXDomain=function(){var n=t._computeOrderedGroups(t.data());return n.map(t.keyAccessor())},t.renderXAxis=function(n){var u=n.select("g.x"),r;u.empty()&&(u=n.append("g").attr("class","axis x").attr("transform","translate("+t.margins().left+","+t._xAxisY()+")"));r=n.select("text."+kt);r.empty()&&t.xAxisLabel()&&(r=n.append("text").attr("class",kt).attr("transform","translate("+(t.margins().left+t.xAxisLength()/2)+","+(t.height()-b)+")").attr("text-anchor","middle"));t.xAxisLabel()&&r.text()!==t.xAxisLabel()&&r.text(t.xAxisLabel());i.transition(u,t.transitionDuration(),t.transitionDelay()).attr("transform","translate("+t.margins().left+","+t._xAxisY()+")").call(o);i.transition(r,t.transitionDuration(),t.transitionDelay()).attr("transform","translate("+(t.margins().left+t.xAxisLength()/2)+","+(t.height()-b)+")")},t._xAxisY=function(){return t.height()-t.margins().bottom},t.xAxisLength=function(){return t.effectiveWidth()},t.xAxisLabel=function(n,i){return arguments.length?(ti=n,t.margins().bottom-=b,b=i===undefined?dt:i,t.margins().bottom+=b,t):ti},t._prepareYAxis=function(i){if(f===undefined||t.elasticY()){f===undefined&&(f=n.scaleLinear());var r=t.yAxisMin()||0,e=t.yAxisMax()||0;f.domain([r,e]).rangeRound([t.yAxisHeight(),0])}f.range([t.yAxisHeight(),0]);u||(u=si());u.scale(f);t._renderHorizontalGridLinesForAxis(i,f,u)},t.renderYAxisLabel=function(n,r,u,f){f=f||y;var e=t.g().select("text."+bt+"."+n+"-label"),o=t.margins().top+t.yAxisHeight()/2;e.empty()&&r&&(e=t.g().append("text").attr("transform","translate("+f+","+o+"),rotate("+u+")").attr("class",bt+" "+n+"-label").attr("text-anchor","middle").text(r));r&&e.text()!==r&&e.text(r);i.transition(e,t.transitionDuration(),t.transitionDelay()).attr("transform","translate("+f+","+o+"),rotate("+u+")")},t.renderYAxisAt=function(n,r,u){var f=t.g().select("g."+n);f.empty()&&(f=t.g().append("g").attr("class","axis "+n).attr("transform","translate("+u+","+t.margins().top+")"));i.transition(f,t.transitionDuration(),t.transitionDelay()).attr("transform","translate("+u+","+t.margins().top+")").call(r)},t.renderYAxis=function(){var r=a?t.width()-t.margins().right:t._yAxisX(),n,i;t.renderYAxisAt("y",u,r);n=a?t.width()-y:y;i=a?90:-90;t.renderYAxisLabel("y",t.yAxisLabel(),i,n)},t._renderHorizontalGridLinesForAxis=function(n,r,u){var f=n.select("g."+pt),s,e,o,h;ht?(s=u.tickValues()?u.tickValues():r.ticks.apply(r,u.tickArguments()),f.empty()&&(f=n.insert("g",":first-child").attr("class",yt+" "+pt).attr("transform","translate("+t.margins().left+","+t.margins().top+")")),e=f.selectAll("line").data(s),o=e.enter().append("line").attr("x1",1).attr("y1",function(n){return r(n)}).attr("x2",t.xAxisLength()).attr("y2",function(n){return r(n)}).attr("opacity",0),i.transition(o,t.transitionDuration(),t.transitionDelay()).attr("opacity",1),h=o.merge(e),i.transition(h,t.transitionDuration(),t.transitionDelay()).attr("x1",1).attr("y1",function(n){return r(n)}).attr("x2",t.xAxisLength()).attr("y2",function(n){return r(n)}),e.exit().remove()):f.selectAll("line").remove()},t._yAxisX=function(){return t.useRightYAxis()?t.width()-t.margins().right:t.margins().left},t.yAxisLabel=function(n,i){return arguments.length?(ui=n,t.margins().left-=y,y=i===undefined?dt:i,t.margins().left+=y,t):ui},t.y=function(n){return arguments.length?(f=n,t.rescale(),t):f},t.yAxis=function(n){return arguments.length?(u=n,t):(u||(u=si()),u)},t.elasticY=function(n){return arguments.length?(ri=n,t):ri},t.renderHorizontalGridLines=function(n){return arguments.length?(ht=n,t):ht},t.renderVerticalGridLines=function(n){return arguments.length?(ct=n,t):ct},t.xAxisMin=function(){var r=n.min(t.data(),function(n){return t.keyAccessor()(n)});return i.utils.subtract(r,rt,ut)},t.xAxisMax=function(){var r=n.max(t.data(),function(n){return t.keyAccessor()(n)});return i.utils.add(r,rt,ut)},t.yAxisMin=function(){var r=n.min(t.data(),function(n){return t.valueAccessor()(n)});return i.utils.subtract(r,ft)},t.yAxisMax=function(){var r=n.max(t.data(),function(n){return t.valueAccessor()(n)});return i.utils.add(r,ft)},t.yAxisPadding=function(n){return arguments.length?(ft=n,t):ft},t.yAxisHeight=function(){return t.effectiveHeight()},t.round=function(n){return arguments.length?(ei=n,t):ei},t._rangeBandPadding=function(n){return arguments.length?(vt=n,t):vt},t._outerRangeBandPadding=function(n){return arguments.length?(at=n,t):at},i.override(t,"filter",function(n){return arguments.length?(t._filter(n),t.redrawBrush(n,!1),t):t._filter()}),t.brush=function(n){return arguments.length?(c=n,t):c},t.renderBrush=function(n,i){if(k){c.on("start brush end",t._brushing);s=n.append("g").attr("class","brush").attr("transform","translate("+t.margins().left+","+t.margins().top+")");t.setBrushExtents();t.createBrushHandlePaths(s,i);t.redrawBrush(t.filter(),i)}},t.createBrushHandlePaths=function(n){var i=n.selectAll("path."+tt).data([{type:"w"},{type:"e"}]);i=i.enter().append("path").attr("class",tt).merge(i);i.attr("d",t.resizeHandlePath)},t.extendBrush=function(n){return n&&t.round()&&(n[0]=t.round()(n[0]),n[1]=t.round()(n[1])),n},t.brushIsEmpty=function(n){return!n||n[1]<=n[0]},t._brushing=function(){var r,u;n.event.sourceEvent&&(n.event.sourceEvent.type&&["start","brush","end"].indexOf(n.event.sourceEvent.type)!==-1||n.event.sourceEvent.currentTarget!=undefined&&n.event.sourceEvent.currentTarget instanceof Node&&!document.querySelector(t.anchor()).contains(n.event.sourceEvent.currentTarget)||(r=n.event.selection,r&&(r=r.map(t.x().invert)),r=t.extendBrush(r),t.redrawBrush(r,!1),u=t.brushIsEmpty(r)?null:i.filters.RangedFilter(r[0],r[1]),i.events.trigger(function(){t.applyBrushSelection(u)},i.constants.EVENT_DELAY)))},t.applyBrushSelection=function(n){t.replaceFilter(n);t.redrawGroup()},t.setBrushExtents=function(){c.extent([[0,0],[t.effectiveWidth(),t.effectiveHeight()]]);s.call(c)},t.redrawBrush=function(n,u){if(k&&s)if(l&&t.setBrushExtents(u),n){var e=[r(n[0]),r(n[1])],f=i.optionalTransition(u,t.transitionDuration(),t.transitionDelay())(s);f.call(c.move,e);f.selectAll("path."+tt).attr("display",null).attr("transform",function(t,i){return"translate("+r(n[i])+", 0)"}).attr("d",t.resizeHandlePath)}else s.call(c.move,null),s.selectAll("path."+tt).attr("display","none");t.fadeDeselectedArea(n)},t.fadeDeselectedArea=function(){},t.resizeHandlePath=function(n){n=n.type;var u=+(n==="e"),r=u?1:-1,i=t.effectiveHeight()/3;return"M"+.5*r+","+i+"A6,6 0 0 "+u+" "+6.5*r+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+u+" "+.5*r+","+2*i+"ZM"+2.5*r+","+(i+8)+"V"+(2*i-8)+"M"+4.5*r+","+(i+8)+"V"+(2*i-8)},t.clipPadding=function(n){return arguments.length?(nt=n,t):nt},t._preprocessData=function(){},t._doRender=function(){return t.resetSvg(),t._preprocessData(),t._generateG(),ci(),li(!0),bi(),t},t._doRedraw=function(){return t._preprocessData(),li(!1),ci(),t},t._enableMouseZoom=function(){var n,i;oi=!0;n=[[0,0],[t.effectiveWidth(),t.effectiveHeight()]];g.scaleExtent(d).extent(n).duration(t.transitionDuration());et&&(i=Math.max(d[0],1),g.translateExtent(n).scaleExtent([i,d[1]]));t.root().call(g);ai()},t._disableMouseZoom=function(){t.root().call(yi)},t.focus=function(n,t){et&&(n=vi(n,v),e&&(n=vi(n,e.x().domain())));ki(n,t);ai()},t.refocused=function(){return!i.utils.arraysEqual(t.x().domain(),v)},t.focusChart=function(n){if(!arguments.length)return p;p=n;t.on("filtered.dcjs-range-chart",function(n){n.filter()?i.utils.arraysEqual(n.filter(),p.filter())||i.events.trigger(function(){p.focus(n.filter(),!0)}):i.events.trigger(function(){p.x().domain(p.xOriginalDomain(),!0)})});return t},t.brushOn=function(n){return arguments.length?(k=n,t):k},t.parentBrushOn=function(n){return arguments.length?(fi=n,t):fi},t.gBrush=function(){return s},t},i.stackMixin=function(t){function c(n,i){var u=n.accessor||t.valueAccessor(),r;n.name=String(n.name||i);r=n.group.all().map(function(i,r){return{x:t.keyAccessor()(i,r),y:n.hidden?null:u(i,r),data:i,layer:n.name,hidden:n.hidden}});n.domainValues=r.filter(l());n.values=t.evadeDomainFilter()?r:n.domainValues}function l(){if(!t.x())return i.utils.constant(!0);var n=t.x().domain();return t.isOrdinal()?function(){return!0}:t.elasticX()?function(){return!0}:function(t){return t.x>=n[0]&&t.x<=n[n.length-1]}}function o(n){var t=r.map(i.pluck("name")).indexOf(n);return r[t]}function u(){var n=t.data().map(function(n){return n.domainValues});return Array.prototype.concat.apply([],n)}function a(n){return!n.hidden}var s=n.stack(),r=[],f={},e=!1,h=!1;return t.stack=function(n,i,u){if(!arguments.length)return r;arguments.length<=2&&(u=i);var f={group:n};return typeof i=="string"&&(f.name=i),typeof u=="function"&&(f.accessor=u),r.push(f),t},i.override(t,"group",function(n,i,u){return arguments.length?(r=[],f={},t.stack(n,i),u&&t.valueAccessor(u),t._group(n,i)):t._group()}),t.hidableStacks=function(n){return arguments.length?(e=n,t):e},t.hideStack=function(n){var i=o(n);return i&&(i.hidden=!0),t},t.showStack=function(n){var i=o(n);return i&&(i.hidden=!1),t},t.getValueAccessorByIndex=function(n){return r[n].accessor||t.valueAccessor()},t.yAxisMin=function(){var r=n.min(u(),function(n){return n.y<0?n.y+n.y0:n.y0});return i.utils.subtract(r,t.yAxisPadding())},t.yAxisMax=function(){var r=n.max(u(),function(n){return n.y>0?n.y+n.y0:n.y0});return i.utils.add(r,t.yAxisPadding())},t.xAxisMin=function(){var r=n.min(u(),i.pluck("x"));return i.utils.subtract(r,t.xAxisPadding(),t.xAxisPaddingUnit())},t.xAxisMax=function(){var r=n.max(u(),i.pluck("x"));return i.utils.add(r,t.xAxisPadding(),t.xAxisPaddingUnit())},i.override(t,"title",function(n,i){return n?typeof n=="function"?t._title(n):n===t._groupName&&typeof i=="function"?t._title(i):typeof i!="function"?f[n]||t._title():(f[n]=i,t):t._title()}),t.stackLayout=function(n){return arguments.length?(s=n,t):s},t.evadeDomainFilter=function(n){return arguments.length?(h=n,t):h},t.data(function(){var n=r.filter(a);if(!n.length)return[];n.forEach(c);var i=n[0].values.map(function(t,i){var r={x:t.x};return n.forEach(function(n){r[n.name]=n.values[i].y}),r}),u=n.map(function(n){return n.name}),f=t.stackLayout().keys(u)(i);return f.forEach(function(t,i){t.forEach(function(t,r){n[i].values[r].y0=t[0];n[i].values[r].y1=t[1]})}),n}),t._ordinalXDomain=function(){var n=u().map(i.pluck("data")),r=t._computeOrderedGroups(n);return r.map(t.keyAccessor())},t.colorAccessor(function(n){return this.layer||this.name||n.name||n.layer}),t.legendables=function(){return r.map(function(n,i){return{chart:t,name:n.name,hidden:n.hidden||!1,color:t.getColor.call(n,n.values,i)}})},t.isLegendableHidden=function(n){var t=o(n.name);return t?t.hidden:!1},t.legendToggle=function(n){e&&(t.isLegendableHidden(n)?t.showStack(n.name):t.hideStack(n.name),t.renderGroup())},t},i.capMixin=function(t){var r=Infinity,f=!0,e="Others",u;return t.ordering(function(n){return-n.value}),u=function(i,r){var u=n.sum(r,t.valueAccessor()),f=r.map(t.keyAccessor());return u>0?i.concat([{others:f,key:t.othersLabel(),value:u}]):i},t.cappedKeyAccessor=function(n,i){return n.others?n.key:t.keyAccessor()(n,i)},t.cappedValueAccessor=function(n,i){return n.others?n.value:t.valueAccessor()(n,i)},t.data(function(n){var i,e,o;return r===Infinity?t._computeOrderedGroups(n.all()):(i=n.all(),i=t._computeOrderedGroups(i),r&&(f?(e=i.slice(r),i=i.slice(0,r)):(o=Math.max(0,i.length-r),e=i.slice(0,o),i=i.slice(o))),u)?u(i,e):i}),t.cap=function(n){return arguments.length?(r=n,t):r},t.takeFront=function(n){return arguments.length?(f=n,t):f},t.othersLabel=function(n){return arguments.length?(e=n,t):e},t.othersGrouper=function(n){return arguments.length?(u=n,t):u},i.override(t,"onClick",function(n){n.others&&t.filter([n.others]);t._onClick(n)}),t},i.bubbleMixin=function(t){var h=.3,r=10,u=!1,f=!1,e,o,s;t.BUBBLE_NODE_CLASS="node";t.BUBBLE_CLASS="bubble";t.MIN_RADIUS=10;t=i.colorMixin(t);t.renderLabel(!0);t.data(function(i){var f=i.all(),r;return u&&(r=t.radiusValueAccessor(),f.sort(function(t,i){return n.descending(r(t),r(i))})),f});e=n.scaleLinear().domain([0,100]);o=function(n){return n.r};t.r=function(n){return arguments.length?(e=n,t):e};t.elasticRadius=function(n){return arguments.length?(f=n,t):f};t.calculateRadiusDomain=function(){f&&t.r().domain([t.rMin(),t.rMax()])};t.radiusValueAccessor=function(n){return arguments.length?(o=n,t):o};t.rMin=function(){return n.min(t.data(),function(n){return t.radiusValueAccessor()(n)})};t.rMax=function(){return n.max(t.data(),function(n){return t.radiusValueAccessor()(n)})};t.bubbleR=function(n){var r=t.radiusValueAccessor()(n),i=t.r()(r);return(isNaN(i)||r<=0)&&(i=0),i};var c=function(n){return t.label()(n)},l=function(n){return t.bubbleR(n)>r},a=function(n){return l(n)?1:0},v=function(n){return l(n)?"all":"none"};return t._doRenderLabel=function(n){if(t.renderLabel()){var r=n.select("text");r.empty()&&(r=n.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",t.onClick));r.attr("opacity",0).attr("pointer-events",v).text(c);i.transition(r,t.transitionDuration(),t.transitionDelay()).attr("opacity",a)}},t.doUpdateLabels=function(n){if(t.renderLabel()){var r=n.select("text").attr("pointer-events",v).text(c);i.transition(r,t.transitionDuration(),t.transitionDelay()).attr("opacity",a)}},s=function(n){return t.title()(n)},t._doRenderTitles=function(n){if(t.renderTitle()){var i=n.select("title");i.empty()&&n.append("title").text(s)}},t.doUpdateTitles=function(n){t.renderTitle()&&n.select("title").text(s)},t.sortBubbleSize=function(n){return arguments.length?(u=n,t):u},t.minRadius=function(n){return arguments.length?(t.MIN_RADIUS=n,t):t.MIN_RADIUS},t.minRadiusWithLabel=function(n){return arguments.length?(r=n,t):r},t.maxBubbleRelativeSize=function(n){return arguments.length?(h=n,t):h},t.fadeDeselectedArea=function(){t.hasFilter()?t.selectAll("g."+t.BUBBLE_NODE_CLASS).each(function(n){t.isSelectedNode(n)?t.highlightSelected(this):t.fadeDeselected(this)}):t.selectAll("g."+t.BUBBLE_NODE_CLASS).each(function(){t.resetHighlight(this)})},t.isSelectedNode=function(n){return t.hasFilter(n.key)},t.onClick=function(n){var r=n.key;i.events.trigger(function(){t.filter(r);t.redrawGroup()})},t},i.pieChart=function(t,r){function rt(){var v=n.min([u.width(),u.height()])/2,r,o,t,s,a;h=c&&c<v?c:v;r=et();o=ii();n.sum(u.data(),u.valueAccessor())?(t=o(u.data()),f.classed(w,!1)):(t=o([{key:l,value:1,others:[l]}]),f.classed(w,!0));f&&(s=f.select("g."+g).selectAll("g."+e).data(t),a=f.select("g."+nt).selectAll("text."+p).data(t),ni(s,a),at(s,a,r,t),bt(t,r),ti(),i.transition(f,u.transitionDuration(),u.transitionDelay()).attr("transform","translate("+u.cx()+","+u.cy()+")"))}function at(n,t,i,r){var u=vt(n);yt(u,i);pt(u);wt(t,r,i)}function vt(n){return n.enter().append("g").attr("class",function(n,t){return e+" _"+t})}function yt(n,t){var f=n.append("path").attr("fill",ct).on("click",k).attr("d",function(n,i){return d(n,i,t)}),r=i.transition(f,u.transitionDuration(),u.transitionDelay());r.attrTween&&r.attrTween("d",ht)}function pt(n){u.renderTitle()&&n.append("title").text(function(n){return u.title()(n.data)})}function ut(n,t){u._applyLabelText(n);i.transition(n,u.transitionDuration(),u.transitionDelay()).attr("transform",function(n){return fi(n,t)}).attr("text-anchor","middle")}function y(n,t){u.select("g.pie-slice._"+n).classed("highlight",t)}function wt(n,t,i){if(u.renderLabel()){var r=n.enter().append("text").attr("class",function(n,t){var i=e+" "+p+" _"+t;return o&&(i+=" external"),i}).on("click",k).on("mouseover",function(n,t){y(t,!0)}).on("mouseout",function(n,t){y(t,!1)});ut(r,i);o&&v&&ft(t,i)}}function ft(t,r){var c=f.selectAll("polyline."+e).data(t),a,l;c.exit().remove();c=c.enter().append("polyline").attr("class",function(n,t){return"pie-path _"+t+" "+e}).on("click",k).on("mouseover",function(n,t){y(t,!0)}).on("mouseout",function(n,t){y(t,!1)}).merge(c);a=n.arc().outerRadius(h-s+o).innerRadius(h-s);l=i.transition(c,u.transitionDuration(),u.transitionDelay());l.attrTween?l.attrTween("points",function(t){var i=this._current||t,u;return i={startAngle:i.startAngle,endAngle:i.endAngle},u=n.interpolate(i,t),this._current=u(0),function(n){var t=u(n);return[r.centroid(t),a.centroid(t)]}}):l.attr("points",function(n){return[r.centroid(n),a.centroid(n)]});l.style("visibility",function(n){return st(n)||n.endAngle-n.startAngle<.0001?"hidden":"visible"})}function bt(n,t){kt(n,t);dt(n,t);gt(n)}function kt(n,t){var o=f.selectAll("g."+e).data(n).select("path").attr("d",function(n,i){return d(n,i,t)}),r=i.transition(o,u.transitionDuration(),u.transitionDelay());r.attrTween&&r.attrTween("d",ht);r.attr("fill",ct)}function dt(n,t){if(u.renderLabel()){var i=f.selectAll("text."+p).data(n);ut(i,t);o&&v&&ft(n,t)}}function gt(n){u.renderTitle()&&f.selectAll("g."+e).data(n).select("title").text(function(n){return u.title()(n.data)})}function ni(n,t){n.exit().remove();t.exit().remove()}function ti(){u.hasFilter()?u.selectAll("g."+e).each(function(n){ot(n)?u.highlightSelected(this):u.fadeDeselected(this)}):u.selectAll("g."+e).each(function(){u.resetHighlight(this)})}function et(){return n.arc().outerRadius(h-s).innerRadius(a)}function ot(n){return u.hasFilter(u.cappedKeyAccessor(n.data))}function ii(){return n.pie().sort(null).value(u.cappedValueAccessor)}function st(n){var t=n.endAngle-n.startAngle;return isNaN(t)||t<b}function ri(n){return u.cappedValueAccessor(n)===0}function ht(t){var i,r;return t.innerRadius=a,i=this._current,i=ui(i)?{startAngle:0,endAngle:0}:{startAngle:i.startAngle,endAngle:i.endAngle},r=n.interpolate(i,t),this._current=r(0),function(n){return d(r(n),0,et())}}function ui(n){return!n||isNaN(n.startAngle)||isNaN(n.endAngle)}function ct(n,t){return u.getColor(n.data,t)}function k(n,t){if(f.attr("class")!==w)u.onClick(n.data,t)}function d(n,t,i){var r=i(n,t);return r.indexOf("NaN")>=0&&(r="M0,0"),r}function fi(t,i){var r;if(o){let i=h-s+o+5;r=n.arc().outerRadius(i).innerRadius(i).centroid(t);let u=(t.startAngle+t.endAngle)/2;r[1]=-1*i*Math.cos(u)+4;u<Math.PI?r[0]=r[0]+2*t.data.key.toString().length:u>Math.PI&&(r[0]=r[0]-2*t.data.key.toString().length)}else r=i.centroid(t);return isNaN(r[0])||isNaN(r[1])?"translate(0,0)":"translate("+r+")"}function lt(t,i){u.selectAll("g.pie-slice").each(function(r){t.name===r.data.key&&n.select(this).classed("highlight",i)})}var e="pie-slice",p="pie-label",g="pie-slice-group",nt="pie-label-group",w="empty-chart",l="empty",h,c,a=0,s=0,f,tt,it,b=.5,o,v=!1,u=i.capMixin(i.colorMixin(i.baseMixin({})));return u.colorAccessor(u.cappedKeyAccessor),u.title(function(n){return u.cappedKeyAccessor(n)+": "+u.cappedValueAccessor(n)}),u.slicesCap=u.cap,u.label(u.cappedKeyAccessor),u.renderLabel(!0),u.transitionDuration(350),u.transitionDelay(0),u._doRender=function(){return u.resetSvg(),f=u.svg().append("g").attr("transform","translate("+u.cx()+","+u.cy()+")"),f.append("g").attr("class",g),f.append("g").attr("class",nt),rt(),u},u._applyLabelText=function(n){n.text(function(n){var t=n.data;return(ri(t)||st(n))&&!ot(n)?"":u.label()(n.data)})},u.externalRadiusPadding=function(n){return arguments.length?(s=n,u):s},u.innerRadius=function(n){return arguments.length?(a=n,u):a},u.radius=function(n){return arguments.length?(c=n,u):c},u.cx=function(n){return arguments.length?(tt=n,u):tt||u.width()/2},u.cy=function(n){return arguments.length?(it=n,u):it||u.height()/2},u._doRedraw=function(){return rt(),u},u.minAngleForLabel=function(n){return arguments.length?(b=n,u):b},u.emptyTitle=function(n){return arguments.length===0?l:(l=n,u)},u.externalLabels=function(n){return arguments.length===0?o:(o=n?n:undefined,u)},u.drawPaths=function(n){return arguments.length===0?v:(v=n,u)},u.legendables=function(){return u.data().map(function(n,t){var i={name:n.key,data:n.value,others:n.others,chart:u};return i.color=u.getColor(n,t),i})},u.legendHighlight=function(n){lt(n,!0)},u.legendReset=function(n){lt(n,!1)},u.legendToggle=function(n){u.onClick({key:n.name,others:n.others})},u.anchor(t,r)},i.sunburstChart=function(t,r){function b(){var s,t,r,h;o=o?o:n.min([u.width(),u.height()])/2;s=d();n.sum(u.data(),u.valueAccessor())?(r=i.utils.toHierarchy(u.data(),u.valueAccessor()),t=g(r),t.shift(),e.classed(c,!1)):(r=i.utils.toHierarchy([],function(n){return n.value}),t=g(r),e.classed(c,!0));e&&(h=e.selectAll("g."+f).data(t),rt(h,s,t),st(t,s),at(h),vt())}function rt(n,t,i){var r=ut(n);ft(r,t);et(r);ot(i,t)}function ut(n){return n.enter().append("g").attr("class",function(n,t){return f+" _"+t+" "+f+"-level-"+n.depth})}function ft(n,t){var f=n.append("path").attr("fill",tt).on("click",a).attr("d",function(n,i){return v(n,i,t)}),r=i.transition(f,u.transitionDuration());r.attrTween&&r.attrTween("d",nt)}function et(n){u.renderTitle()&&n.append("title").text(function(n){return u.title()(n)})}function k(n,t){i.transition(n,u.transitionDuration()).attr("transform",function(n){return ni(n,t)}).attr("text-anchor","middle").text(function(n){return kt(n)||bt(n)?"":u.label()(n)})}function ot(n,t){var i,r;u.renderLabel()&&(i=e.selectAll("text."+f).data(n),i.exit().remove(),r=i.enter().append("text").attr("class",function(n,t){var i=f+" _"+t;return s&&(i+=" external"),i}).on("click",a),k(r,t))}function st(n,t){ht(n,t);ct(n,t);lt(n)}function ht(n,t){var o=e.selectAll("g."+f).data(n).select("path").attr("d",function(n,i){return v(n,i,t)}),r=i.transition(o,u.transitionDuration());r.attrTween&&r.attrTween("d",nt);r.attr("fill",tt)}function ct(n,t){if(u.renderLabel()){var i=e.selectAll("text."+f).data(n);k(i,t)}}function lt(n){u.renderTitle()&&e.selectAll("g."+f).data(n).select("title").text(function(n){return u.title()(n)})}function at(n){n.exit().remove()}function vt(){u.hasFilter()?u.selectAll("g."+f).each(function(n){yt(n)?u.highlightSelected(this):u.fadeDeselected(this)}):u.selectAll("g."+f).each(function(){u.resetHighlight(this)})}function d(){return n.arc().startAngle(function(n){return n.x0}).endAngle(function(n){return n.x1}).innerRadius(function(n){return n.data.path&&n.data.path.length===1?h:Math.sqrt(n.y0)}).outerRadius(function(n){return Math.sqrt(n.y1)})}function yt(n){return pt(n.path)}function pt(n){for(var i,t=0;t<u.filters().length;t++)if(i=u.filters()[t],i.isFiltered(n))return!0;return!1}function wt(n){for(var t,e=i.filters.HierarchyFilter(n),f=[],r=0;r<u.filters().length;r++)t=u.filters()[r],(t.isFiltered(n)||e.isFiltered(t))&&f.push(t);return f}function g(t){var i=n.hierarchy(t).sum(function(n){return n.children?0:u.cappedValueAccessor(n)}).sort(function(t,i){return n.ascending(t.data.path,i.data.path)}),r=n.partition().size([2*Math.PI,o*o]);return r(i),i.descendants().map(function(n){return n.key=n.data.key,n.path=n.data.path,n})}function bt(n){var t=n.x1-n.x0;return isNaN(t)||t<l}function kt(n){return u.cappedValueAccessor(n)===0}function nt(t){var i,u,r;return t.innerRadius=h,i=this._current,dt(i)&&(i={x:0,y:0,dx:0,dy:0}),u={x:t.x,y:t.y,dx:t.dx,dy:t.dy},r=n.interpolate(i,u),this._current=r(0),function(n){return v(Object.assign({},t,r(n)),0,d())}}function dt(n){return!n||isNaN(n.dx)||isNaN(n.dy)}function tt(n,t){return u.getColor(n,t)}function gt(n){for(var o,r=n.path||n.key,s=i.filters.HierarchyFilter(r),f=wt(r),e=!1,t=f.length-1;t>=0;t--)o=f[t],i.utils.arraysIdentical(o,r)&&(e=!0),u.filter(f[t]);i.events.trigger(function(){e||u.filter(s);u.redrawGroup()})}function a(n,t){e.attr("class")!==c&&gt(n,t)}function v(n,t,i){var r=i(n,t);return r.indexOf("NaN")>=0&&(r="M0,0"),r}function ni(t,i){var r;return r=s?n.svg.arc().outerRadius(o+s).innerRadius(o+s).centroid(t):i.centroid(t),isNaN(r[0])||isNaN(r[1])?"translate(0,0)":"translate("+r+")"}function it(t,i){u.selectAll("g.pie-slice").each(function(r){t.name===r.key&&n.select(this).classed("highlight",i)})}var f="pie-slice",c="empty-chart",y="empty",o,h=0,e,p,w,l=.5,s,u=i.capMixin(i.colorMixin(i.baseMixin({})));return u.colorAccessor(u.cappedKeyAccessor),u.title(function(n){return u.cappedKeyAccessor(n)+": "+u.cappedValueAccessor(n)}),u.label(u.cappedKeyAccessor),u.renderLabel(!0),u.transitionDuration(350),u.filterHandler(function(n,t){return t.length===0?n.filter(null):n.filterFunction(function(n){for(var r,i=0;i<t.length;i++)if(r=t[i],r.isFiltered&&r.isFiltered(n))return!0;return!1}),t}),u._doRender=function(){return u.resetSvg(),e=u.svg().append("g").attr("transform","translate("+u.cx()+","+u.cy()+")"),b(),u},u.innerRadius=function(n){return arguments.length?(h=n,u):h},u.radius=function(n){return arguments.length?(o=n,u):o},u.cx=function(n){return arguments.length?(p=n,u):p||u.width()/2},u.cy=function(n){return arguments.length?(w=n,u):w||u.height()/2},u.minAngleForLabel=function(n){return arguments.length?(l=n,u):l},u.emptyTitle=function(n){return arguments.length===0?y:(y=n,u)},u.externalLabels=function(n){return arguments.length===0?s:(s=n?n:undefined,u)},u._doRedraw=function(){return b(),u},u.onClick=a,u.legendables=function(){return u.data().map(function(n,t){var i={name:n.key,data:n.value,others:n.others,chart:u};return i.color=u.getColor(n,t),i})},u.legendHighlight=function(n){it(n,!0)},u.legendReset=function(n){it(n,!1)},u.legendToggle=function(n){u.onClick({key:n.name,others:n.others})},u.anchor(t,r)},i.barChart=function(t,r){function h(n){return i.utils.safeNumber(Math.abs(u.y()(n.y+n.y0)-u.y()(n.y0)))}function l(n){var t=u.x()(n.x);return o||(t+=f/2),u.isOrdinal()&&e!==undefined&&(t+=e/2),i.utils.safeNumber(t)}function a(n){var t=u.y()(n.y+n.y0);return n.y<0&&(t-=h(n)),i.utils.safeNumber(t-p)}function w(n,t,r){var f=n.selectAll("text.barLabel").data(r.values,i.pluck("x")),e=f.enter().append("text").attr("class","barLabel").attr("text-anchor","middle").attr("x",l).attr("y",a).merge(f);if(u.isOrdinal()){e.on("click",u.onClick);e.attr("cursor","pointer")}i.transition(e,u.transitionDuration(),u.transitionDelay()).attr("x",l).attr("y",a).text(function(n){return u.label()(n)});i.transition(f.exit(),u.transitionDuration(),u.transitionDelay()).attr("height",0).remove()}function v(n){var t=u.x()(n.x);return o&&(t-=f/2),u.isOrdinal()&&e!==undefined&&(t+=e/2),i.utils.safeNumber(t)}function b(n,t,r){var e=n.selectAll("rect.bar").data(r.values,i.pluck("x")),o=e.enter().append("rect").attr("class","bar").attr("fill",i.pluck("data",u.getColor)).attr("x",v).attr("y",u.yAxisHeight()).attr("height",0),s=o.merge(e);if(u.renderTitle()&&o.append("title").text(i.pluck("data",u.title(r.name))),u.isOrdinal())s.on("click",u.onClick);i.transition(s,u.transitionDuration(),u.transitionDelay()).attr("x",v).attr("y",function(n){var t=u.y()(n.y+n.y0);return n.y<0&&(t-=h(n)),i.utils.safeNumber(t)}).attr("width",f).attr("height",function(n){return h(n)}).attr("fill",i.pluck("data",u.getColor)).select("title").text(i.pluck("data",u.title(r.name)));i.transition(e.exit(),u.transitionDuration(),u.transitionDelay()).attr("x",function(n){return u.x()(n.x)}).attr("width",f*.9).remove()}function k(){if(f===undefined){var n=u.xUnitCount();f=u.isOrdinal()&&e===undefined?Math.floor(u.x().bandwidth()):e?Math.floor((u.xAxisLength()-(n-1)*e)/n):Math.floor(u.xAxisLength()/(1+u.barPadding())/n);(f===Infinity||isNaN(f)||f<c)&&(f=c)}}function y(t,i){return function(){var u=n.select(this),r=u.attr("fill")===t;return i?!r:r}}var c=1,p=3,u=i.stackMixin(i.coordinateGridMixin({})),e=2,o=!1,s=!1,f;return i.override(u,"rescale",function(){return u._rescale(),f=undefined,u}),i.override(u,"render",function(){return u.round()&&o&&!s&&i.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),u._render()}),u.label(function(n){return i.utils.printSingleValue(n.y0+n.y)},!1),u.plotData=function(){var t=u.chartBodyG().selectAll("g.stack").data(u.data()),i;k();t=t.enter().append("g").attr("class",function(n,t){return"stack _"+t}).merge(t);i=t.size()-1;t.each(function(t,r){var f=n.select(this);b(f,r,t);u.renderLabel()&&i===r&&w(f,r,t)})},u.fadeDeselectedArea=function(n){var t=u.chartBodyG().selectAll("rect.bar"),r,f;u.isOrdinal()?u.hasFilter()?(t.classed(i.constants.SELECTED_CLASS,function(n){return u.hasFilter(n.x)}),t.classed(i.constants.DESELECTED_CLASS,function(n){return!u.hasFilter(n.x)})):(t.classed(i.constants.SELECTED_CLASS,!1),t.classed(i.constants.DESELECTED_CLASS,!1)):(u.brushOn()||u.parentBrushOn())&&(u.brushIsEmpty(n)?t.classed(i.constants.DESELECTED_CLASS,!1):(r=n[0],f=n[1],t.classed(i.constants.DESELECTED_CLASS,function(n){return n.x<r||n.x>=f})))},u.centerBar=function(n){return arguments.length?(o=n,u):o},i.override(u,"onClick",function(n){u._onClick(n.data)}),u.barPadding=function(n){return arguments.length?(u._rangeBandPadding(n),e=undefined,u):u._rangeBandPadding()},u._useOuterPadding=function(){return e===undefined},u.outerPadding=u._outerRangeBandPadding,u.gap=function(n){return arguments.length?(e=n,u):e},u.extendBrush=function(n){return n&&u.round()&&(!o||s)&&(n[0]=u.round()(n[0]),n[1]=u.round()(n[1])),n},u.alwaysUseRounding=function(n){return arguments.length?(s=n,u):s},u.legendHighlight=function(n){u.isLegendableHidden(n)||u.g().selectAll("rect.bar").classed("highlight",y(n.color)).classed("fadeout",y(n.color,!0))},u.legendReset=function(){u.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},i.override(u,"xAxisMax",function(){var n=this._xAxisMax(),t;return"resolution"in u.xUnits()&&(t=u.xUnits().resolution,n+=t),n}),u.anchor(t,r)},i.lineChart=function(t,r){function b(n,t){return u.getColor.call(n,n.values,t)}function it(){var t=null,r;return p?p:(typeof l=="function"?t=l:(r={linear:n.curveLinear,"linear-closed":n.curveLinearClosed,step:n.curveStep,"step-before":n.curveStepBefore,"step-after":n.curveStepAfter,basis:n.curveBasis,"basis-open":n.curveBasisOpen,"basis-closed":n.curveBasisClosed,bundle:n.curveBundle,cardinal:n.curveCardinal,"cardinal-open":n.curveCardinalOpen,"cardinal-closed":n.curveCardinalClosed,monotone:n.curveMonotoneX},t=r[l]),t||(t=n.curveLinear),w!==null&&(typeof t.tension!="function"?i.logger.warn("tension was specified but the curve/interpolate does not support it."):t=t.tension(w)),t)}function et(t,r){var o=n.line().x(function(n){return u.x()(n.x)}).y(function(n){return u.y()(n.y+n.y0)}).curve(it()),s;f&&o.defined(f);s=t.append("path").attr("class","line").attr("stroke",b);e&&s.attr("stroke-dasharray",e);i.transition(r.select("path.line"),u.transitionDuration(),u.transitionDelay()).attr("stroke",b).attr("d",function(n){return g(o(n.values))})}function ot(t,r){if(d){var e=n.area().x(function(n){return u.x()(n.x)}).y1(function(n){return u.y()(n.y+n.y0)}).y0(function(n){return u.y()(n.y0)}).curve(it());f&&e.defined(f);t.append("path").attr("class","area").attr("fill",b).attr("d",function(n){return g(e(n.values))});i.transition(r.select("path.area"),u.transitionDuration(),u.transitionDelay()).attr("fill",b).attr("d",function(n){return g(e(n.values))})}}function g(n){return!n||n.indexOf("NaN")>=0?"M0,0":n}function st(t,r){if(u.xyTipsOn()==="always"||!(u.brushOn()||u.parentBrushOn())&&u.xyTipsOn()){var o=k+"-list",e=t.select("g."+o);e.empty()&&(e=t.append("g").attr("class",o));r.each(function(t,r){var l=t.values,o,s,a;f&&(l=l.filter(f));o=e.select("g."+k+"._"+r);o.empty()&&(o=e.append("g").attr("class",k+" _"+r));ct(o);s=o.selectAll("circle."+nt).data(l,i.pluck("x"));a=s.enter().append("circle").attr("class",nt).attr("cx",function(n){return i.utils.safeNumber(u.x()(n.x))}).attr("cy",function(n){return i.utils.safeNumber(u.y()(n.y+n.y0))}).attr("r",rt()).style("fill-opacity",h).style("stroke-opacity",c).attr("fill",u.getColor).on("mousemove",function(){var t=n.select(this);lt(t);at(t,o)}).on("mouseout",function(){var t=n.select(this);vt(t);yt(o)}).merge(s);a.call(pt,t);i.transition(a,u.transitionDuration()).attr("cx",function(n){return i.utils.safeNumber(u.x()(n.x))}).attr("cy",function(n){return i.utils.safeNumber(u.y()(n.y+n.y0))}).attr("fill",u.getColor);s.exit().remove()})}}function ht(t){t.each(function(t){var f=n.select(this),r=f.selectAll("text.lineLabel").data(t.values,i.pluck("x")),e=r.enter().append("text").attr("class","lineLabel").attr("text-anchor","middle").merge(r);i.transition(e,u.transitionDuration()).attr("x",function(n){return i.utils.safeNumber(u.x()(n.x))}).attr("y",function(n){var t=u.y()(n.y+n.y0)-ft;return i.utils.safeNumber(t)}).text(function(n){return u.label()(n)});i.transition(r.exit(),u.transitionDuration()).attr("height",0).remove()})}function ct(n){var i=n.select("path."+o).empty()?n.append("path").attr("class",o):n.select("path."+o),t;i.style("display","none").attr("stroke-dasharray","5,5");t=n.select("path."+s).empty()?n.append("path").attr("class",s):n.select("path."+s);t.style("display","none").attr("stroke-dasharray","5,5")}function lt(n){return n.style("fill-opacity",.8),n.style("stroke-opacity",.8),n.attr("r",v),n}function at(n,t){var i=n.attr("cx"),r=n.attr("cy"),f=u._yAxisX()-u.margins().left,e="M"+f+" "+r+"L"+i+" "+r,h="M"+i+" "+u.yAxisHeight()+"L"+i+" "+r;t.select("path."+o).style("display","").attr("d",e);t.select("path."+s).style("display","").attr("d",h)}function rt(){return y||v}function vt(n){n.style("fill-opacity",h).style("stroke-opacity",c).attr("r",rt())}function yt(n){n.select("path."+o).style("display","none");n.select("path."+s).style("display","none")}function pt(n,t){u.renderTitle()&&(n.select("title").remove(),n.append("title").text(i.pluck("data",u.title(t.name))))}function ut(t,i,r){return function(){var u=n.select(this),f=u.attr("stroke")===t&&u.attr("stroke-dasharray")===(i instanceof Array?i.join(","):null)||u.attr("fill")===t;return r?!f:f}}var k="dc-tooltip",nt="dot",o="yRef",s="xRef",a=1e-6,ft=3,u=i.stackMixin(i.coordinateGridMixin({})),d=!1,v=5,y=null,h=a,c=a,p=null,l=null,w=null,f,e,tt=!0;return u.transitionDuration(500),u.transitionDelay(0),u._rangeBandPadding(1),u.plotData=function(){var i=u.chartBodyG(),r=i.select("g.stack-list"),n,t;r.empty()&&(r=i.append("g").attr("class","stack-list"));n=r.selectAll("g.stack").data(u.data());t=n.enter().append("g").attr("class",function(n,t){return"stack _"+t});n=t.merge(n);et(t,n);ot(t,n);st(i,n);u.renderLabel()&&ht(n)},u.curve=function(n){return arguments.length?(p=n,u):p},u.interpolate=i.logger.deprecate(function(n){return arguments.length?(l=n,u):l},"dc.lineChart.interpolate has been deprecated since version 3.0 use dc.lineChart.curve instead"),u.tension=i.logger.deprecate(function(n){return arguments.length?(w=n,u):w},"dc.lineChart.tension has been deprecated since version 3.0 use dc.lineChart.curve instead"),u.defined=function(n){return arguments.length?(f=n,u):f},u.dashStyle=function(n){return arguments.length?(e=n,u):e},u.renderArea=function(n){return arguments.length?(d=n,u):d},u.label(function(n){return i.utils.printSingleValue(n.y0+n.y)},!1),u.xyTipsOn=function(n){return arguments.length?(tt=n,u):tt},u.dotRadius=function(n){return arguments.length?(v=n,u):v},u.renderDataPoints=function(n){if(arguments.length)n?(h=n.fillOpacity||.8,c=n.strokeOpacity||.8,y=n.radius||2):(h=a,c=a,y=null);else return{fillOpacity:h,strokeOpacity:c,radius:y};return u},u.legendHighlight=function(n){u.isLegendableHidden(n)||u.g().selectAll("path.line, path.area").classed("highlight",ut(n.color,n.dashstyle)).classed("fadeout",ut(n.color,n.dashstyle,!0))},u.legendReset=function(){u.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},i.override(u,"legendables",function(){var n=u._legendables();return e?n.map(function(n){return n.dashstyle=e,n}):n}),u.anchor(t,r)},i.dataCount=function(t,r){var e=n.format(",d"),u=i.baseMixin({}),f={some:"",all:""};return u.html=function(n){return arguments.length?(n.all&&(f.all=n.all),n.some&&(f.some=n.some),u):f},u.formatNumber=function(n){return arguments.length?(e=n,u):e},u._doRender=function(){var i=u.dimension().size(),r=u.group().value(),n=e(i),t=e(r);return i===r&&f.all!==""?u.root().html(f.all.replace("%total-count",n).replace("%filter-count",t)):f.some!==""?u.root().html(f.some.replace("%total-count",n).replace("%filter-count",t)):(u.selectAll(".total-count").text(n),u.selectAll(".filter-count").text(t)),u},u._doRedraw=function(){return u._doRender()},u.anchor(t,r)},i.dataTable=function(t,r){function b(){var r=!0,n,t,i,e,o;return f.forEach(function(n){r=r&typeof n=="function"}),r||(n=u.selectAll("thead").data([0]),n.exit().remove(),n=n.enter().append("thead").merge(n),t=n.selectAll("tr").data([0]),t.exit().remove(),t=t.enter().append("tr").merge(t),i=t.selectAll("th").data(f),i.exit().remove(),i.enter().append("th").merge(i).attr("class",w).html(function(n){return u._doColumnHeaderFormat(n)})),e=u.root().selectAll("tbody").data(k(),function(n){return u.keyAccessor()(n)}),o=e.enter().append("tbody"),l===!0&&o.append("tr").attr("class",p).append("td").attr("class",v).attr("colspan",f.length).html(function(n){return u.keyAccessor()(n)}),e.exit().remove(),o}function k(){var t;return t=e===n.ascending?u.dimension().bottom(o):u.dimension().top(o),n.nest().key(u.group()).sortKeys(e).entries(t.sort(function(n,t){return e(s(n),s(t))}).slice(h,c))}function d(n){var t=n.order().selectAll("tr."+a).data(function(n){return n.values}),i=t.enter().append("tr").attr("class",a);return f.forEach(function(n,t){i.append("td").attr("class",y+" _"+t).html(function(t){return u._doColumnValueFormat(n,t)})}),t.exit().remove(),t}var v="dc-table-label",a="dc-table-row",y="dc-table-column",p="dc-table-group",w="dc-table-head",u=i.baseMixin({}),o=25,f=[],s=function(n){return n},e=n.ascending,h=0,c,l=!0;return u._doRender=function(){return u.selectAll("tbody").remove(),d(b()),u},u._doColumnValueFormat=function(n,t){return typeof n=="function"?n(t):typeof n=="string"?t[n]:n.format(t)},u._doColumnHeaderFormat=function(n){return typeof n=="function"?u._doColumnHeaderFnToString(n):typeof n=="string"?u._doColumnHeaderCapitalize(n):String(n.label)},u._doColumnHeaderCapitalize=function(n){return n.charAt(0).toUpperCase()+n.slice(1)},u._doColumnHeaderFnToString=function(n){var t=String(n),r=t.indexOf("return "),i,u;return r>=0&&(i=t.lastIndexOf(";"),i>=0&&(t=t.substring(r+7,i),u=t.indexOf("numberFormat"),u>=0&&(t=t.replace("numberFormat","")))),t},u._doRedraw=function(){return u._doRender()},u.size=function(n){return arguments.length?(o=n,u):o},u.beginSlice=function(n){return arguments.length?(h=n,u):h},u.endSlice=function(n){return arguments.length?(c=n,u):c},u.columns=function(n){return arguments.length?(f=n,u):f},u.sortBy=function(n){return arguments.length?(s=n,u):s},u.order=function(n){return arguments.length?(e=n,u):e},u.showGroups=function(n){return arguments.length?(l=n,u):l},u.anchor(t,r)},i.dataGrid=function(t,r){function w(){var n=u.root().selectAll("div."+s).data(b(),function(n){return u.keyAccessor()(n)}),t=n.enter().append("div").attr("class",s);return o&&t.html(function(n){return o(n)}),n.exit().remove(),t}function b(){var t=u.dimension().top(h);return n.nest().key(u.group()).sortKeys(e).entries(t.sort(function(n,t){return e(f(n),f(t))}).slice(l,a))}function k(n){var t=n.order().selectAll("div."+v).data(function(n){return n.values});return t.exit().remove(),t.enter().append("div").attr("class",v).html(function(n){return c(n)}).merge(t)}var y="dc-grid-label",v="dc-grid-item",p="dc-grid-group",s="dc-grid-top",u=i.baseMixin({}),h=999,c=function(n){return"you need to provide an html() handling param:  "+JSON.stringify(n)},f=function(n){return n},e=n.ascending,l=0,a,o=function(n){return"<div class='"+p+"'><h1 class='"+y+"'>"+u.keyAccessor()(n)+"<\/h1><\/div>"};return u._doRender=function(){return u.selectAll("div."+s).remove(),k(w()),u},u._doRedraw=function(){return u._doRender()},u.beginSlice=function(n){return arguments.length?(l=n,u):l},u.endSlice=function(n){return arguments.length?(a=n,u):a},u.size=function(n){return arguments.length?(h=n,u):h},u.html=function(n){return arguments.length?(c=n,u):c},u.htmlGroup=function(n){return arguments.length?(o=n,u):o},u.sortBy=function(n){return arguments.length?(f=n,u):f},u.order=function(n){return arguments.length?(e=n,u):e},u.anchor(t,r)},i.bubbleChart=function(n,t){function f(n){var t=n.enter().append("g");return t.attr("class",r.BUBBLE_NODE_CLASS).attr("transform",u).append("circle").attr("class",function(n,t){return r.BUBBLE_CLASS+" _"+t}).on("click",r.onClick).attr("fill",r.getColor).attr("r",0),n=t.merge(n),i.transition(n,r.transitionDuration(),r.transitionDelay()).select("circle."+r.BUBBLE_CLASS).attr("r",function(n){return r.bubbleR(n)}).attr("opacity",function(n){return r.bubbleR(n)>0?1:0}),r._doRenderLabel(t),r._doRenderTitles(t),n}function e(n){i.transition(n,r.transitionDuration(),r.transitionDelay()).attr("transform",u).select("circle."+r.BUBBLE_CLASS).attr("fill",r.getColor).attr("r",function(n){return r.bubbleR(n)}).attr("opacity",function(n){return r.bubbleR(n)>0?1:0});r.doUpdateLabels(n);r.doUpdateTitles(n)}function o(n){n.exit().remove()}function s(n){var t=r.x()(r.keyAccessor()(n));return(isNaN(t)||!isFinite(t))&&(t=0),t}function h(n){var t=r.y()(r.valueAccessor()(n));return(isNaN(t)||!isFinite(t))&&(t=0),t}var r=i.bubbleMixin(i.coordinateGridMixin({})),u;return r.transitionDuration(750),r.transitionDelay(0),u=function(n){return"translate("+s(n)+","+h(n)+")"},r.plotData=function(){r.calculateRadiusDomain();r.r().range([r.MIN_RADIUS,r.xAxisLength()*r.maxBubbleRelativeSize()]);var t=r.data(),n=r.chartBodyG().selectAll("g."+r.BUBBLE_NODE_CLASS).data(t,function(n){return n.key});r.sortBubbleSize()&&n.order();n=f(n);e(n);o(n);r.fadeDeselectedArea(r.filter())},r.renderBrush=function(){},r.redrawBrush=function(n){r.fadeDeselectedArea(n)},r.anchor(n,t)},i.compositeChart=function(t,r){function tt(n,t){var i,r,f,e,o;return n&&(i=ft(),r=ot()),t&&(f=et(),e=st()),u.alignYAxes()&&n&&t&&(o=it(i,r,f,e)),o||{lyAxisMin:i,lyAxisMax:r,ryAxisMin:f,ryAxisMax:e}}function it(n,t,i,r){var u=(r-i)/(t-n);return{lyAxisMin:Math.min(n,i/u),lyAxisMax:Math.max(t,r/u),ryAxisMin:Math.min(i,n*u),ryAxisMax:Math.max(r,t*u)}}function rt(t){var i=u.rightY()===undefined||u.elasticY(),r=i||u.resizing();u.rightY()===undefined&&u.rightY(n.scaleLinear());i&&u.rightY().domain([t.ryAxisMin,t.ryAxisMax]);r&&u.rightY().rangeRound([u.yAxisHeight(),0]);u.rightY().range([u.yAxisHeight(),0]);u.rightYAxis(u.rightYAxis().scale(u.rightY()))}function ut(t){var i=u.y()===undefined||u.elasticY(),r=i||u.resizing();u.y()===undefined&&u.y(n.scaleLinear());i&&u.y().domain([t.lyAxisMin,t.lyAxisMax]);r&&u.y().rangeRound([u.yAxisHeight(),0]);u.y().range([u.yAxisHeight(),0]);u.yAxis(u.yAxis().scale(u.y()))}function k(n,t){n._generateG(u.g());n.g().attr("class",nt+" _"+t)}function e(){return f.filter(function(n){return!n.useRightYAxis()})}function o(){return f.filter(function(n){return n.useRightYAxis()})}function d(n){return n.map(function(n){return n.yAxisMin()})}function ft(){return n.min(d(e()))}function et(){return n.min(d(o()))}function g(n){return n.map(function(n){return n.yAxisMax()})}function ot(){return i.utils.add(n.max(g(e())),u.yAxisPadding())}function st(){return i.utils.add(n.max(g(o())),u.yAxisPadding())}function ht(){return f.map(function(n){return n.xAxisMin()})}function ct(){return f.map(function(n){return n.xAxisMax()})}var nt="sub",p=12,u=i.coordinateGridMixin({}),f=[],s={},h=!1,l=!0,w=!1,a=n.axisRight(),b=0,c=p,v,y=!1;u._mandatoryAttributes([]);u.transitionDuration(500);u.transitionDelay(0);i.override(u,"_generateG",function(){for(var n,i=this.__generateG(),t=0;t<f.length;++t)n=f[t],k(n,t),n.dimension()||n.dimension(u.dimension()),n.group()||n.group(u.group()),n.chartGroup(u.chartGroup()),n.svg(u.svg()),n.xUnits(u.xUnits()),n.transitionDuration(u.transitionDuration(),u.transitionDelay()),n.parentBrushOn(u.brushOn()),n.brushOn(!1),n.renderTitle(u.renderTitle()),n.elasticX(u.elasticX());return i});u.on("filtered.dcjs-composite-chart",function(){for(var n=0;n<f.length;++n)f[n].replaceFilter(u.filter())});return u._prepareYAxis=function(){var n=e().length!==0,t=o().length!==0,i=tt(n,t);n&&ut(i);t&&rt(i);e().length>0&&!y?u._renderHorizontalGridLinesForAxis(u.g(),u.y(),u.yAxis()):o().length>0&&u._renderHorizontalGridLinesForAxis(u.g(),v,a)},u.renderYAxis=function(){e().length!==0&&(u.renderYAxisAt("y",u.yAxis(),u.margins().left),u.renderYAxisLabel("y",u.yAxisLabel(),-90));o().length!==0&&(u.renderYAxisAt("yr",u.rightYAxis(),u.width()-u.margins().right),u.renderYAxisLabel("yr",u.rightYAxisLabel(),90,u.width()-c))},u.plotData=function(){for(var n,t=0;t<f.length;++t)n=f[t],n.g()||k(n,t),h&&n.colors(u.colors()),n.x(u.x()),n.xAxis(u.xAxis()),n.useRightYAxis()?(n.y(u.rightY()),n.yAxis(u.rightYAxis())):(n.y(u.y()),n.yAxis(u.yAxis())),n.plotData(),n._activateRenderlets()},u.useRightAxisGridLines=function(n){return arguments?(y=n,u):y},u.childOptions=function(n){return arguments.length?(s=n,f.forEach(function(n){n.options(s)}),u):s},u.fadeDeselectedArea=function(n){var t,i;if(u.brushOn())for(t=0;t<f.length;++t)i=f[t],i.fadeDeselectedArea(n)},u.rightYAxisLabel=function(n,t){return arguments.length?(b=n,u.margins().right-=c,c=t===undefined?p:t,u.margins().right+=c,u):b},u.compose=function(n){return f=n,f.forEach(function(n){n.height(u.height());n.width(u.width());n.margins(u.margins());l&&n.title(u.title());n.options(s)}),u},u.children=function(){return f},u.shareColors=function(n){return arguments.length?(h=n,u):h},u.shareTitle=function(n){return arguments.length?(l=n,u):l},u.rightY=function(n){return arguments.length?(v=n,u.rescale(),u):v},u.alignYAxes=function(n){return arguments.length?(w=n,u.rescale(),u):w},delete u.yAxisMin,delete u.yAxisMax,i.override(u,"xAxisMin",function(){return i.utils.subtract(n.min(ht()),u.xAxisPadding(),u.xAxisPaddingUnit())}),i.override(u,"xAxisMax",function(){return i.utils.add(n.max(ct()),u.xAxisPadding(),u.xAxisPaddingUnit())}),u.legendables=function(){return f.reduce(function(n,t){return h&&t.colors(u.colors()),n.push.apply(n,t.legendables()),n},[])},u.legendHighlight=function(n){for(var i,t=0;t<f.length;++t)i=f[t],i.legendHighlight(n)},u.legendReset=function(n){for(var i,t=0;t<f.length;++t)i=f[t],i.legendReset(n)},u.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},u.rightYAxis=function(n){return arguments.length?(a=n,u):a},u.anchor(t,r)},i.seriesChart=function(t,r){function a(t,i){return n.ascending(u.keyAccessor()(t),u.keyAccessor()(i))}function l(n){f[n].g()&&f[n].g().remove();delete f[n]}function s(){Object.keys(f).map(l);f={}}var u=i.compositeChart(t,r),f={},h=i.lineChart,c,e=n.ascending,o=a;return u._mandatoryAttributes().push("seriesAccessor","chart"),u.shareColors(!0),u._preprocessData=function(){var a=[],t,s=n.nest().key(c),v,y;e&&s.sortKeys(e);o&&s.sortValues(o);v=s.entries(u.data());y=v.map(function(n,e){var o=f[n.key]||h.call(u,u,r,n.key,e);return f[n.key]||(t=!0),f[n.key]=o,a.push(n.key),o.dimension(u.dimension()).group({all:typeof n.values=="function"?n.values:i.utils.constant(n.values)},n.key).keyAccessor(u.keyAccessor()).valueAccessor(u.valueAccessor()).brushOn(!1)});Object.keys(f).filter(function(n){return a.indexOf(n)===-1}).forEach(function(n){l(n);t=!0});u._compose(y);t&&u.legend()&&u.legend().render()},u.chart=function(n){return arguments.length?(h=n,s(),u):h},u.seriesAccessor=function(n){return arguments.length?(c=n,s(),u):c},u.seriesSort=function(n){return arguments.length?(e=n,s(),u):e},u.valueSort=function(n){return arguments.length?(o=n,s(),u):o},u._compose=u.compose,delete u.compose,u},i.geoChoroplethChart=function(t,r){function a(n){var i=p(),t;w(n)&&(t=b(n),d(t,n,i),g(t,n,i))}function p(){for(var i={},t=u.data(),n=0;n<t.length;++n)i[u.keyAccessor()(t[n])]=u.valueAccessor()(t[n]);return i}function w(n){return e(n).keyAccessor}function b(n){return u.svg().selectAll(k(n)).classed("selected",function(t){return v(n,t)}).classed("deselected",function(t){return y(n,t)}).attr("class",function(t){var u=e(n).name,f=i.utils.nameToId(e(n).keyAccessor(t)),r=u+" "+f;return v(n,t)&&(r+=" selected"),y(n,t)&&(r+=" deselected"),r})}function k(n){return"g.layer"+n+" g."+e(n).name}function v(n,t){return u.hasFilter()&&u.hasFilter(c(n,t))}function y(n,t){return u.hasFilter()&&!u.hasFilter(c(n,t))}function c(n,t){return e(n).keyAccessor(t)}function e(n){return f[n]}function d(t,r,f){var o=t.select("path").attr("fill",function(){var t=n.select(this).attr("fill");return t?t:"none"}).on("click",function(n){return u.onClick(n,r)});i.transition(o,u.transitionDuration(),u.transitionDelay()).attr("fill",function(n,t){return u.getColor(f[e(r).keyAccessor(n)],t)})}function g(n,t,i){u.renderTitle()&&n.selectAll("title").text(function(n){var r=c(t,n),f=i[r];return u.title()({key:r,value:f})})}var u=i.colorMixin(i.baseMixin({})),o,s,h,f,l;return u.colorAccessor(function(n){return n||0}),o=n.geoPath(),f=[],u._doRender=function(){var n,i,t;for(u.resetSvg(),n=0;n<f.length;++n)i=u.svg().append("g").attr("class","layer"+n),t=i.selectAll("g."+e(n).name).data(e(n).data),t=t.enter().append("g").attr("class",e(n).name).merge(t),t.append("path").attr("fill","white").attr("d",l()),t.append("title"),a(n);s=!1},u.onClick=function(n,t){var r=e(t).keyAccessor(n);i.events.trigger(function(){u.filter(r);u.redrawGroup()})},u._doRedraw=function(){for(var n=0;n<f.length;++n)a(n),s&&u.svg().selectAll("g."+e(n).name+" path").attr("d",l());s=!1},u.overlayGeoJson=function(n,t,i){for(var r=0;r<f.length;++r)if(f[r].name===t)return f[r].data=n,f[r].keyAccessor=i,u;return f.push({name:t,data:n,keyAccessor:i}),u},u.projection=function(n){return arguments.length?(h=n,s=!0,u):h},l=function(){return h===undefined?(i.logger.warn("choropleth projection default of geoAlbers is deprecated, in next version projection will need to be set explicitly"),o.projection(n.geoAlbersUsa())):o.projection(h)},u.geoJsons=function(){return f},u.geoPath=function(){return o},u.removeGeoJson=function(n){for(var i,r=[],t=0;t<f.length;++t)i=f[t],i.name!==n&&r.push(i);return f=r,u},u.anchor(t,r)},i.bubbleOverlay=function(t,r){function a(){return f=u.select("g."+s),f.empty()&&(f=u.svg().append("g").attr("class",s)),f}function v(){var n=h();u.calculateRadiusDomain();o.forEach(function(t){var r=c(t,n),f=r.select("circle."+e);f.empty()&&(f=r.append("circle").attr("class",e).attr("r",0).attr("fill",u.getColor).on("click",u.onClick));i.transition(f,u.transitionDuration(),u.transitionDelay()).attr("r",function(n){return u.bubbleR(n)});u._doRenderLabel(r);u._doRenderTitles(r)})}function h(){var n={};return u.data().forEach(function(t){n[u.keyAccessor()(t)]=t}),n}function c(n,t){var u=l+" "+i.utils.nameToId(n.name),r=f.select("g."+i.utils.nameToId(n.name));return r.empty()&&(r=f.append("g").attr("class",u).attr("transform","translate("+n.x+","+n.y+")")),r.datum(t[n.name]),r}function y(){var n=h();u.calculateRadiusDomain();o.forEach(function(t){var r=c(t,n),f=r.select("circle."+e);i.transition(f,u.transitionDuration(),u.transitionDelay()).attr("r",function(n){return u.bubbleR(n)}).attr("fill",u.getColor);u.doUpdateLabels(r);u.doUpdateTitles(r)})}var s="bubble-overlay",l="node",e="bubble",u=i.bubbleMixin(i.baseMixin({})),f,o=[];return u.transitionDuration(750),u.transitionDelay(0),u.radiusValueAccessor(function(n){return n.value}),u.point=function(n,t,i){return o.push({name:n,x:t,y:i}),u},u._doRender=function(){return f=a(),u.r().range([u.MIN_RADIUS,u.width()*u.maxBubbleRelativeSize()]),v(),u.fadeDeselectedArea(u.filter()),u},u._doRedraw=function(){return y(),u.fadeDeselectedArea(u.filter()),u},u.debug=function(t){var r,f;if(t){r=u.select("g."+i.constants.DEBUG_GROUP_CLASS);r.empty()&&(r=u.svg().append("g").attr("class",i.constants.DEBUG_GROUP_CLASS));f=r.append("text").attr("x",10).attr("y",20);r.append("rect").attr("width",u.width()).attr("height",u.height()).on("mousemove",function(){var t=n.mouse(r.node()),i=t[0]+", "+t[1];f.text(i)})}else u.selectAll(".debug").remove();return u},u.anchor(t,r),u},i.rowChart=function(t,r){function ut(){if(!f||b){var t=n.extent(a,u.cappedValueAccessor);t[0]>0&&(t[0]=0);t[1]<0&&(t[1]=0);f=n.scaleLinear().domain(t).range([0,u.effectiveWidth()])}l.scale(f)}function ft(){var n=e.select("g.axis");ut();n.empty()&&(n=e.append("g").attr("class","axis"));n.attr("transform","translate(0, "+u.effectiveHeight()+")");i.transition(n,u.transitionDuration(),u.transitionDelay()).call(l)}function et(){e.selectAll("g.tick").select("line.grid-line").remove();e.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-u.effectiveHeight()})}function tt(){a=u.data();ft();et();var n=e.selectAll("g."+p).data(a);st(n);n=ot(n).merge(n);ht(n)}function ot(n){var t=n.enter().append("g").attr("class",function(n,t){return p+" _"+t});return t.append("rect").attr("width",0),lt(t),t}function st(n){n.exit().remove()}function it(){var n=f(0);return n===-Infinity||n!==n?f(1):n}function ht(n){var r=a.length,t,e;t=c?c:(u.effectiveHeight()-(r+1)*h)/r;d||(o=t/2);e=n.attr("transform",function(n,i){return"translate(0,"+((i+1)*h+i*t)+")"}).select("rect").attr("height",t).attr("fill",u.getColor).on("click",s).classed("deselected",function(n){return u.hasFilter()?!rt(n):!1}).classed("selected",function(n){return u.hasFilter()?rt(n):!1});i.transition(e,u.transitionDuration(),u.transitionDelay()).attr("width",function(n){return Math.abs(it()-f(u.valueAccessor()(n)))}).attr("transform",k);ct(n);at(n)}function ct(n){u.renderTitle()&&(n.select("title").remove(),n.append("title").text(u.title()))}function lt(n){if(u.renderLabel())n.append("text").on("click",s);if(u.renderTitleLabel())n.append("text").attr("class",w).on("click",s)}function at(n){var t,r;u.renderLabel()&&(t=n.select("text").attr("x",v).attr("y",o).attr("dy",g).on("click",s).attr("class",function(n,t){return p+" _"+t}).text(function(n){return u.label()(n)}),i.transition(t,u.transitionDuration(),u.transitionDelay()).attr("transform",k));u.renderTitleLabel()&&(r=n.select("."+w).attr("x",u.effectiveWidth()-y).attr("y",o).attr("dy",g).attr("text-anchor","end").on("click",s).attr("class",function(n,t){return w+" _"+t}).text(function(n){return u.title()(n)}),i.transition(r,u.transitionDuration(),u.transitionDelay()).attr("transform",k))}function s(n){u.onClick(n)}function k(n){var t=f(u.cappedValueAccessor(n)),i=it(),r=t>i?i:t;return"translate("+r+",0)"}function rt(n){return u.hasFilter(u.cappedKeyAccessor(n))}var e,v=10,o=15,d=!1,g="0.35em",y=2,h=5,c=!1,p="row",w="titlerow",nt=!1,u=i.capMixin(i.marginMixin(i.colorMixin(i.baseMixin({})))),f,b,l=n.axisBottom(),a;return u.rowsCap=u.cap,u._doRender=function(){return u.resetSvg(),e=u.svg().append("g").attr("transform","translate("+u.margins().left+","+u.margins().top+")"),tt(),u},u.title(function(n){return u.cappedKeyAccessor(n)+": "+u.cappedValueAccessor(n)}),u.label(u.cappedKeyAccessor),u.x=function(n){return arguments.length?(f=n,u):f},u.renderTitleLabel=function(n){return arguments.length?(nt=n,u):nt},u._doRedraw=function(){return tt(),u},u.xAxis=function(n){return arguments.length?(l=n,this):l},u.fixedBarHeight=function(n){return arguments.length?(c=n,u):c},u.gap=function(n){return arguments.length?(h=n,u):h},u.elasticX=function(n){return arguments.length?(b=n,u):b},u.labelOffsetX=function(n){return arguments.length?(v=n,u):v},u.labelOffsetY=function(n){return arguments.length?(o=n,d=!0,u):o},u.titleLabelOffsetX=function(n){return arguments.length?(y=n,u):y},u.anchor(t,r)},i.legend=function(){function y(){return u+t}var p=2,n={},r,e=0,o=0,t=12,u=5,s=!1,h=560,c=70,l=!1,a=i.pluck("name"),f,v;return n.parent=function(t){return arguments.length?(r=t,n):r},n.render=function(){var w,b,n,k;r.svg().select("g.dc-legend").remove();v=r.svg().append("g").attr("class","dc-legend").attr("transform","translate("+e+","+o+")");w=r.legendables();f!==undefined&&(w=w.slice(0,f));b=v.selectAll("g.dc-legend-item").data(w).enter().append("g").attr("class","dc-legend-item").on("mouseover",function(n){r.legendHighlight(n)}).on("mouseout",function(n){r.legendReset(n)}).on("click",function(n){n.chart.legendToggle(n)});v.selectAll("g.dc-legend-item").classed("fadeout",function(n){return n.chart.isLegendableHidden(n)});w.some(i.pluck("dashstyle"))?b.append("line").attr("x1",0).attr("y1",t/2).attr("x2",t).attr("y2",t/2).attr("stroke-width",2).attr("stroke-dasharray",i.pluck("dashstyle")).attr("stroke",i.pluck("color")):b.append("rect").attr("width",t).attr("height",t).attr("fill",function(n){return n?n.color:"blue"});b.append("text").text(a).attr("x",t+p).attr("y",function(){return t/2+(this.clientHeight?this.clientHeight:13)/2+2});n=0;k=0;b.attr("transform",function(t,i){var r,f;return s?(r=l===!0?this.getBBox().width+u:c,n+r>h&&n>0&&(++k,n=0),f="translate("+n+","+k*y()+")",n+=r,f):"translate(0,"+i*y()+")"})},n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(o=t,n):o},n.gap=function(t){return arguments.length?(u=t,n):u},n.itemHeight=function(i){return arguments.length?(t=i,n):t},n.horizontal=function(t){return arguments.length?(s=t,n):s},n.legendWidth=function(t){return arguments.length?(h=t,n):h},n.itemWidth=function(t){return arguments.length?(c=t,n):c},n.autoItemWidth=function(t){return arguments.length?(l=t,n):l},n.legendText=function(t){return arguments.length?(a=t,n):a},n.maxItems=function(t){return arguments.length?(f=i.utils.isNumber(t)?t:undefined,n):f},n},i.htmlLegend=function(){var t={},c="dc-html-legend",l="dc-legend-item-horizontal",a="dc-legend-item-vertical",r,u,f=i.pluck("name"),e,s=!1,o,h=!1;return t.parent=function(n){return arguments.length?(r=n,t):r},t.render=function(){var w=s?l:a,v,n,p,y,t;u.select("div.dc-html-legend").remove();v=u.append("div").attr("class",c);v.attr("style","max-width:"+u.nodes()[0].style.width);n=r.legendables();p=r.filters();e!==undefined&&(n=n.slice(0,e));y=o?o:w;t=v.selectAll("div."+y).data(n).enter().append("div").classed(y,!0).on("mouseover",r.legendHighlight).on("mouseout",r.legendReset).on("click",r.legendToggle);h&&t.classed(i.constants.SELECTED_CLASS,function(n){return p.indexOf(n.name)!==-1});t.append("span").attr("class","dc-legend-item-color").style("background-color",i.pluck("color"));t.append("span").attr("class","dc-legend-item-label").attr("title",f).text(f)},t.container=function(i){return arguments.length?(u=n.select(i),t):u},t.legendItemClass=function(n){return arguments.length?(o=n,t):o},t.highlightSelected=function(n){return arguments.length?(h=n,t):h},t.horizontal=function(n){return arguments.length?(s=n,t):s},t.legendText=function(n){return arguments.length?(f=n,t):f},t.maxItems=function(n){return arguments.length?(e=i.utils.isNumber(n)?n:undefined,t):e},t},i.scatterPlot=function(t,r){function ft(n,t){return o(n)?t?l/Math.sqrt(Math.PI):v/Math.sqrt(Math.PI):y/Math.sqrt(Math.PI)}function rt(n,t){return o(n)?p[t]?Math.pow(l,2):Math.pow(v,2):Math.pow(y,2)}function d(){var i,r,f,t;e==undefined&&(i=u.x()(u.xAxisMin()),r=u.y()(u.yAxisMin()),e=n.range(u.data().length).map(function(){return{tx:i,ty:r}}));e.forEach(function(n){n.sx=n.tx;n.sy=n.ty});f=u.data();f.forEach(function(n,t){var i=!u.filter()||u.filter().isFiltered([u.keyAccessor()(n),u.valueAccessor()(n)]),f=1,r;f=o(n)?i?k:u.excludedOpacity():a;r=null;r=s&&!o(n)?s:u.excludedColor()&&!i?u.excludedColor():u.getColor(n);var h=ft(n,i),c=u.x()(u.keyAccessor()(n)),l=u.y()(u.valueAccessor()(n));e[t].tx=c;e[t].ty=l;e[t].opacity=f;e[t].color=r;e[t].size=h});t=u.context();t.save();t.clearRect(0,0,(t.canvas.width+2)*1,(t.canvas.height+2)*1);var h=u.transitionDuration(),c=n.easeCubic,l=n.timer(function(n){var t=Math.min(1,c(n/h));e.forEach(function(n){n.x=n.sx*(1-t)+n.tx*t;n.y=n.sy*(1-t)+n.ty*t});u.drawPoints();t===1&&l.stop()})}function et(n){u.renderTitle()&&(n.selectAll("title").remove(),n.append("title").text(function(n){return u.title()(n)}))}function ut(t,r){var e=u.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return t(n.select(this))}),o=f.size();f.size(Math.pow(r,2));i.transition(e,u.transitionDuration(),u.transitionDelay()).attr("d",f);f.size(o)}var u=i.coordinateGridMixin({}),f=n.symbol(),o=function(n){return n.value},g=u.keyAccessor();u.keyAccessor(function(n){return g(n)[0]});u.valueAccessor(function(n){return g(n)[1]});u.colorAccessor(function(){return u._groupName});u.title(function(n){return u.keyAccessor()(n)+","+u.valueAccessor()(n)+": "+u.existenceAccessor()(n)});var nt=function(n){return"translate("+u.x()(u.keyAccessor()(n))+","+u.y()(u.valueAccessor()(n))+")"},b=7,l=5,v=3,tt=null,it=1,y=0,a=0,k=1,s=null,p=[],w=null,h=null,c=!1,e;return u.brush(n.brush()),f.size(rt),i.override(u,"_filter",function(n){return arguments.length?u.__filter(i.filters.RangedTwoDimensionalFilter(n)):u.__filter()}),u._resetSvgOld=u.resetSvg,u.resetSvg=function(){var n,f;if(c){u._resetSvgOld();u.select("canvas").remove();n=u.svg();f=u.root();f.style("position","relative");n.style("position","relative");var o=isNaN(parseInt(n.style("left"),10))?0:parseInt(n.style("left"),10),s=isNaN(parseInt(n.style("top"),10))?0:parseInt(n.style("top"),10),i=u.effectiveWidth(),r=u.effectiveHeight(),e=u.margins(),t=1;return w=u.root().append("canvas").attr("x",0).attr("y",0).attr("width",i*t).attr("height",r*t).style("width",i+"px").style("height",r+"px").style("position","absolute").style("top",e.top+s+"px").style("left",e.left+o+"px").style("z-index",1).style("pointer-events","none"),h=w.node().getContext("2d"),h.scale(t,t),h.rect(0,0,i,r),h.clip(),h.imageSmoothingQuality="high",u.svg()}return u._resetSvgOld()},u.useCanvas=function(n){return arguments.length?(c=n,u):c},u.canvas=function(n){return arguments.length?(w=n,u):w},u.context=function(){return h},u.drawPoints=function(){var n=u.context(),t;n.save();n.clearRect(0,0,(n.canvas.width+2)*1,(n.canvas.height+2)*1);for(let i=0;i<e.length;++i)t=e[i],n.globalAlpha=t.opacity,n.beginPath(),n.arc(t.x,t.y,t.size,0,2*Math.PI,!0),n.fillStyle=t.color,n.fill();n.restore()},u.plotData=function(){if(c)d();else{var n=u.chartBodyG().selectAll("path.symbol").data(u.data());n=n.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",u.getColor).attr("transform",nt).merge(n);n.call(et,u.data());n.each(function(n,t){p[t]=!u.filter()||u.filter().isFiltered([u.keyAccessor()(n),u.valueAccessor()(n)])});i.transition(n,u.transitionDuration(),u.transitionDelay()).attr("opacity",function(n,t){return o(n)?p[t]?k:u.excludedOpacity():a}).attr("fill",function(n,t){return s&&!o(n)?s:u.excludedColor()&&!p[t]?u.excludedColor():u.getColor(n)}).attr("transform",nt).attr("d",f);i.transition(n.exit(),u.transitionDuration(),u.transitionDelay()).attr("opacity",0).remove()}},u.existenceAccessor=function(n){return arguments.length?(o=n,this):o},u.symbol=function(n){return arguments.length?(f.type(n),u):f.type()},u.customSymbol=function(n){return arguments.length?(f=n,f.size(rt),u):f},u.symbolSize=function(n){return arguments.length?(l=n,u):l},u.highlightedSize=function(n){return arguments.length?(b=n,u):b},u.excludedSize=function(n){return arguments.length?(v=n,u):v},u.excludedColor=function(n){return arguments.length?(tt=n,u):tt},u.excludedOpacity=function(n){return arguments.length?(it=n,u):it},u.hiddenSize=u.emptySize=function(n){return arguments.length?(y=n,u):y},u.emptyColor=function(n){return arguments.length?(s=n,u):s},u.emptyOpacity=function(n){return arguments.length?(a=n,u):a},u.nonemptyOpacity=function(n){return arguments.length?(k=n,u):a},u.legendables=function(){return[{chart:u,name:u._groupName,color:u.getColor()}]},u.legendHighlight=function(t){c?d(t):(ut(function(n){return n.attr("fill")===t.color},b),u.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return n.select(this).attr("fill")!==t.color}).classed("fadeout",!0))},u.legendReset=function(t){c?d():(ut(function(n){return n.attr("fill")===t.color},l),u.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return n.select(this).attr("fill")!==t.color}).classed("fadeout",!1))},u.createBrushHandlePaths=function(){},u.extendBrush=function(n){return u.round()&&(n[0]=n[0].map(u.round()),n[1]=n[1].map(u.round())),n},u.brushIsEmpty=function(n){return!n||n[0][0]>=n[1][0]||n[0][1]>=n[1][1]},u._brushing=function(){var t,r,f;n.event.sourceEvent&&(n.event.sourceEvent.type&&["start","brush","end"].indexOf(n.event.sourceEvent.type)!==-1||n.event.sourceEvent.currentTarget!=undefined&&n.event.sourceEvent.currentTarget instanceof Node&&!document.querySelector(u.anchor()).contains(n.event.sourceEvent.currentTarget)||(t=n.event.selection,r=u.brushIsEmpty(t),t&&(t=t.map(function(n){return n.map(function(n,t){var i=t===0?u.x():u.y();return i.invert(n)})}),t=u.extendBrush(t),r=r&&u.brushIsEmpty(t)),u.redrawBrush(t,!1),f=r?null:i.filters.RangedTwoDimensionalFilter(t),i.events.trigger(function(){u.replaceFilter(f);u.redrawGroup()},i.constants.EVENT_DELAY)))},u.redrawBrush=function(n,t){var f=u.brush(),r=u.gBrush(),e;u.brushOn()&&r&&(u.resizing()&&u.setBrushExtents(t),n?(n=n.map(function(n){return n.map(function(n,t){var i=t===0?u.x():u.y();return i(n)})}),e=i.optionalTransition(t,u.transitionDuration(),u.transitionDelay())(r),e.call(f.move,n)):r.call(f.move,n));u.fadeDeselectedArea(n)},u.setBrushY=function(n){n.call(u.brush().y(u.y()))},u.anchor(t,r)},i.numberDisplay=function(t,r){function h(n){if(!n.length)return null;var t=u._computeOrderedGroups(n);return t[t.length-1]}var o="number-display",s=n.format(".2s"),u=i.baseMixin({}),f={one:"",some:"",none:""},e;return u._mandatoryAttributes(["group"]),u.ordering(function(n){return n.value}),u.html=function(n){return arguments.length?(n.none?f.none=n.none:n.one?f.none=n.one:n.some&&(f.none=n.some),n.one?f.one=n.one:n.some&&(f.one=n.some),n.some?f.some=n.some:n.one&&(f.some=n.one),u):f},u.value=function(){return u.data()},u.data(function(n){var t=n.value?n.value():h(n.all());return u.valueAccessor()(t)}),u.transitionDuration(250),u.transitionDelay(0),u._doRender=function(){var i=u.value(),t=u.selectAll("."+o);t.empty()&&(t=t.data([0]).enter().append("span").attr("class",o).merge(t));t.transition().duration(u.transitionDuration()).delay(u.transitionDelay()).ease(n.easeQuad).tween("text",function(){var r=isFinite(e)?e:0,o=n.interpolateNumber(r||0,i),t;return e=i,t=this,function(n){var r=null,e=u.formatNumber()(o(n));i===0&&f.none!==""?r=f.none:i===1&&f.one!==""?r=f.one:f.some!==""&&(r=f.some);t.innerHTML=r?r.replace("%number",e):e}})},u._doRedraw=function(){return u._doRender()},u.formatNumber=function(n){return arguments.length?(s=n,u):s},u.anchor(t,r)},i.gaugeChart=function(t,r){function ot(n){var t=s(n);return t<-15?"end":t>15?"start":"middle"}function st(n,t){var i=s(n),r=t.centroid({startAngle:l(i),endAngle:l(i)});return"translate("+r+")"}function ht(){nt=[];for(var n=0;n<v.length;n++)nt.push({color:v[n],startAngle:l(s(o[n])),endAngle:l(s(o[n+1]))});e.select("g."+y).selectAll("path").data(nt).enter().append("path").attr("class",function(n,t){return"gauge_"+t}).style("fill",function(n){return n.color})}function ct(){var n=s.ticks(g),t=e.append("g").attr("class","label");t.selectAll("text").data(n).enter().append("text").attr("text-anchor",ot).text(function(n){return c(n)});t.selectAll("polyline").data(n).enter().append("polyline").attr("stroke","#1e1e1e")}function lt(n){if(!n.length)return null;var t=u._computeOrderedGroups(n);return t[t.length-1]}function et(){var l,a;if(e){var r=e.selectAll("path."+p),o=e.selectAll("text."+tt),t=s(u.value()),t=bt(t);r.empty()&&wt(r,t);o.empty()&&pt(o);f=n.min([u.width()/2-h-b,u.height()-k-2*h-b]);it=f*.3;yt();vt();at();l=n.interpolateString("rotate("+ft+")","rotate("+t+")");r.transition().duration(u.transitionDuration()).delay(u.transitionDelay()).attrTween("transform",function(){return l});ft=t;a=n.interpolateNumber(d,u.value());o.transition().duration(u.transitionDuration()).delay(u.transitionDelay()).tween("text",function(){var n=this;return function(t){var i=a(t);n.innerHTML=c(i)}});d=u.value();i.transition(e,u.transitionDuration(),u.transitionDelay()).attr("transform","translate("+u.cx()+","+u.cy()+")")}}function at(){var t=n.arc().innerRadius(f).outerRadius(f+b);e.select("g.label").selectAll("text").attr("transform",function(n){return st(n,t)});e.select("g.label").selectAll("polyline").attr("points",function(n){var t=l(s(n))-Math.PI/2;return[[Math.cos(t)*f,Math.sin(t)*f],[Math.cos(t)*(f-10),Math.sin(t)*(f-10)]]})}function vt(){var t=n.arc().innerRadius(it).outerRadius(f),i=e.selectAll("g."+y).selectAll("path").attr("d",function(n,i){return kt(n,i,t)});i.transition().duration(u.transitionDuration()).delay(u.transitionDelay())}function yt(){let n=f<10?f:f-10,t="M-3 0 L0 -"+n+" L3 1 S3 5 0 5 S-3 1 -3 0 Z";e.selectAll("path."+p).attr("d",t)}function pt(n){n=n.data([0]).enter().append("text").attr("class",tt).text(function(){return c(u.value())}).attr("text-anchor","middle").attr("transform","translate(0,"+k+")").merge(n)}function wt(n,t){n=n.data([0]).enter().append("path").attr("class",p).attr("transform","rotate("+t+")").merge(n)}function bt(n){return n<a-10&&(n=a-10),n>w+10&&(n=w+10),n}function kt(n,t,i){var r=i(n,t);return r.indexOf("NaN")>=0&&(r="M0,0"),r}function l(n){return n*Math.PI/180}var y="gauge-slice-group",p="gauge-pointer",tt="gauge-number",a=-90,w=90,h=20,b=20,k=20,f,d,it,v=["#F25754","#F7E967","#94CF51"],o=[0,25,75,100],g=5,c=function(n){return n},e,rt,ut,ft=a,s,nt=[],u=i.baseMixin({});return u.title(function(){}),u.tickFormat=function(n){return arguments.length?(c=n,u):c},u.padding=function(n){return arguments.length?(h=n,u):h},u.rangeValues=function(n){return arguments.length?(o=n,u):o},u.sliceColors=function(n){return arguments.length?(v=n,u):v},u.numberOfTicks=function(n){return arguments.length?(g=n,u):g},u._doRender=function(){return u.resetSvg(),e=u.svg().append("g").attr("transform","translate("+u.cx()+","+u.cy()+")"),e.append("g").attr("class",y),s=n.scaleLinear().range([a,w]).domain([o[0],o[o.length-1]]),d=o[0],ht(),ct(),et(),u},u.value=function(){return u.data()},u.data(function(n){var t=n.value?n.value():lt(n.all());return u.valueAccessor()(t)}),u.cx=function(n){return arguments.length?(rt=n,u):rt||u.width()/2},u.cy=function(n){return arguments.length?(ut=n,u):ut||u.height()-h-k},u._doRedraw=function(){return et(),u},u.anchor(t,r)},i.heatMap=function(t,r){function k(n,t){var r=u.selectAll(".box-group").filter(function(i){return i.key[n]===t}),f=r.filter(function(n){return!u.hasFilter(n.key)});i.events.trigger(function(){var n=f.empty()?r:f,t=n.data().map(function(n){return i.filters.TwoDimensionalFilter(n.key)});u._filter([t]);u.redrawGroup()})}var a=6.75,f,v,y,e=n.ascending,o=n.ascending,d=n.scaleBand(),g=n.scaleBand(),s=a,h=a,u=i.colorMixin(i.marginMixin(i.baseMixin({}))),c,l;u._mandatoryAttributes(["group"]);u.title(u.colorAccessor());c=function(n){return n};l=function(n){return n};u.colsLabel=function(n){return arguments.length?(c=n,u):c};u.rowsLabel=function(n){return arguments.length?(l=n,u):l};var p=function(n){k(0,n)},w=function(n){k(1,n)},b=function(n){var t=n.key;i.events.trigger(function(){u.filter(t);u.redrawGroup()})};return i.override(u,"filter",function(n){return arguments.length?u._filter(i.filters.TwoDimensionalFilter(n)):u._filter()}),u.rows=function(n){return arguments.length?(y=n,u):y},u.rowOrdering=function(n){return arguments.length?(o=n,u):o},u.cols=function(n){return arguments.length?(v=n,u):v},u.colOrdering=function(n){return arguments.length?(e=n,u):e},u._doRender=function(){return u.resetSvg(),f=u.svg().append("g").attr("class","heatmap").attr("transform","translate("+u.margins().left+","+u.margins().top+")"),u._doRedraw()},u._doRedraw=function(){var b=u.data(),n=u.rows()||b.map(u.valueAccessor()),t=u.cols()||b.map(u.keyAccessor()),r,a,v,c,y,l;o&&(n=n.sort(o));e&&(t=t.sort(e));n=g.domain(n);t=d.domain(t);var k=n.domain().length,nt=t.domain().length,p=Math.floor(u.effectiveWidth()/nt),w=Math.floor(u.effectiveHeight()/k);t.rangeRound([0,u.effectiveWidth()]);n.rangeRound([u.effectiveHeight(),0]);r=f.selectAll("g.box-group").data(u.data(),function(n,t){return u.keyAccessor()(n,t)+'\0'+u.valueAccessor()(n,t)});r.exit().remove();a=r.enter().append("g").attr("class","box-group");a.append("rect").attr("class","heat-box").attr("fill","white").attr("x",function(n,i){return t(u.keyAccessor()(n,i))}).attr("y",function(t,i){return n(u.valueAccessor()(t,i))}).on("click",u.boxOnClick());return u.renderTitle()&&(a.append("title"),r.select("title").text(u.title())),r=a.merge(r),i.transition(r.select("rect"),u.transitionDuration(),u.transitionDelay()).attr("x",function(n,i){return t(u.keyAccessor()(n,i))}).attr("y",function(t,i){return n(u.valueAccessor()(t,i))}).attr("rx",s).attr("ry",h).attr("fill",u.getColor).attr("width",p).attr("height",w),v=f.select("g.cols"),v.empty()&&(v=f.append("g").attr("class","cols axis")),c=v.selectAll("text").data(t.domain()),c.exit().remove(),c=c.enter().append("text").attr("x",function(n){return t(n)+p/2}).style("text-anchor","middle").attr("y",u.effectiveHeight()).attr("dy",12).on("click",u.xAxisOnClick()).text(u.colsLabel()).merge(c),i.transition(c,u.transitionDuration(),u.transitionDelay()).text(u.colsLabel()).attr("x",function(n){return t(n)+p/2}).attr("y",u.effectiveHeight()),y=f.select("g.rows"),y.empty()&&(y=f.append("g").attr("class","rows axis")),l=y.selectAll("text").data(n.domain()),l.exit().remove(),l=l.enter().append("text").style("text-anchor","end").attr("x",0).attr("dx",-2).attr("y",function(t){return n(t)+w/2}).attr("dy",6).on("click",u.yAxisOnClick()).text(u.rowsLabel()).merge(l),i.transition(l,u.transitionDuration(),u.transitionDelay()).text(u.rowsLabel()).attr("y",function(t){return n(t)+w/2}),u.hasFilter()?u.selectAll("g.box-group").each(function(n){u.isSelectedNode(n)?u.highlightSelected(this):u.fadeDeselected(this)}):u.selectAll("g.box-group").each(function(){u.resetHighlight(this)}),u},u.boxOnClick=function(n){return arguments.length?(b=n,u):b},u.xAxisOnClick=function(n){return arguments.length?(p=n,u):p},u.yAxisOnClick=function(n){return arguments.length?(w=n,u):w},u.xBorderRadius=function(n){return arguments.length?(s=n,u):s},u.yBorderRadius=function(n){return arguments.length?(h=n,u):h},u.isSelectedNode=function(n){return u.hasFilter(n.key)},u.anchor(t,r)},function(){function t(n){return[0,n.length-1]}function r(t){return[n.quantile(t,.25),n.quantile(t,.5),n.quantile(t,.75)]}n.box=function(){function u(t){t.each(function(t,i){var nt,rt,ct,lt,ot,vt,yt,st,it,ft,pt,ht;if(t=t.map(b).sort(n.ascending),nt=n.select(this),rt=t.length,rt!==0){var at=t.quartiles=k(t),tt=l&&l.call(this,t,i),et=tt&&tt.map(function(n){return t[n]}),kt=tt?n.range(0,tt[0]).concat(n.range(tt[1]+1,rt)):n.range(rt);p?(ct=t[0],lt=t[rt-1]):(ct=t[tt[0]],lt=t[tt[1]]);var dt=n.range(tt[0],tt[1]+1),r=n.scaleLinear().domain(c&&c.call(this,t,i)||[ct,lt]).range([w,0]),u=this.__chart__||n.scaleLinear().domain([0,Infinity]).range(r.range());if(this.__chart__=r,ot=nt.selectAll("line.center").data(et?[et]:[]),ot.enter().insert("line","rect").attr("class","center").attr("x1",f/2).attr("y1",function(n){return u(n[0])}).attr("x2",f/2).attr("y2",function(n){return u(n[1])}).style("opacity",1e-6).transition().duration(e).delay(o).style("opacity",1).attr("y1",function(n){return r(n[0])}).attr("y2",function(n){return r(n[1])}),ot.transition().duration(e).delay(o).style("opacity",1).attr("x1",f/2).attr("x2",f/2).attr("y1",function(n){return r(n[0])}).attr("y2",function(n){return r(n[1])}),ot.exit().transition().duration(e).delay(o).style("opacity",1e-6).attr("y1",function(n){return r(n[0])}).attr("y2",function(n){return r(n[1])}).remove(),vt=nt.selectAll("rect.box").data([at]),vt.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(n){return u(n[2])}).attr("width",f).attr("height",function(n){return u(n[0])-u(n[2])}).style("fill-opacity",a?.1:1).transition().duration(e).delay(o).attr("y",function(n){return r(n[2])}).attr("height",function(n){return r(n[0])-r(n[2])}),vt.transition().duration(e).delay(o).attr("width",f).attr("y",function(n){return r(n[2])}).attr("height",function(n){return r(n[0])-r(n[2])}),yt=nt.selectAll("line.median").data([at[1]]),yt.enter().append("line").attr("class","median").attr("x1",0).attr("y1",u).attr("x2",f).attr("y2",u).transition().duration(e).delay(o).attr("y1",r).attr("y2",r),yt.transition().duration(e).delay(o).attr("x1",0).attr("x2",f).attr("y1",r).attr("y2",r),st=nt.selectAll("line.whisker").data(et||[]),st.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",u).attr("x2",f).attr("y2",u).style("opacity",1e-6).transition().duration(e).delay(o).attr("y1",r).attr("y2",r).style("opacity",1),st.transition().duration(e).delay(o).attr("x1",0).attr("x2",f).attr("y1",r).attr("y2",r).style("opacity",1),st.exit().transition().duration(e).delay(o).attr("y1",r).attr("y2",r).style("opacity",1e-6).remove(),p){var wt=h?"outlierBold":"outlier",gt=h?3:5,bt=h?function(){return Math.floor(Math.random()*f*s+1+(f-f*s)/2)}:function(){return f/2},ut=nt.selectAll("circle."+wt).data(kt,Number);ut.enter().insert("circle","text").attr("class",wt).attr("r",gt).attr("cx",bt).attr("cy",function(n){return u(t[n])}).style("opacity",1e-6).transition().duration(e).delay(o).attr("cy",function(n){return r(t[n])}).style("opacity",.6);y&&(ut.selectAll("title").remove(),ut.append("title").text(function(n){return t[n]}));ut.transition().duration(e).delay(o).attr("cx",bt).attr("cy",function(n){return r(t[n])}).style("opacity",.6);ut.exit().transition().duration(e).delay(o).attr("cy",0).style("opacity",1e-6).remove()}a&&(it=nt.selectAll("circle.data").data(dt),it.enter().insert("circle","text").attr("class","data").attr("r",g).attr("cx",function(){return Math.floor(Math.random()*f*s+1+(f-f*s)/2)}).attr("cy",function(n){return u(t[n])}).style("opacity",1e-6).transition().duration(e).delay(o).attr("cy",function(n){return r(t[n])}).style("opacity",v),y&&(it.selectAll("title").remove(),it.append("title").text(function(n){return t[n]})),it.transition().duration(e).delay(o).attr("cx",function(){return Math.floor(Math.random()*f*s+1+(f-f*s)/2)}).attr("cy",function(n){return r(t[n])}).style("opacity",v),it.exit().transition().duration(e).delay(o).attr("cy",0).style("opacity",1e-6).remove());ft=d||r.tickFormat(8);pt=nt.selectAll("text.box").data(at);pt.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(n,t){return t&1?6:-6}).attr("x",function(n,t){return t&1?f:0}).attr("y",u).attr("text-anchor",function(n,t){return t&1?"start":"end"}).text(ft).transition().duration(e).delay(o).attr("y",r);pt.transition().duration(e).delay(o).text(ft).attr("x",function(n,t){return t&1?f:0}).attr("y",r);ht=nt.selectAll("text.whisker").data(et||[]);ht.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",f).attr("y",u).text(ft).style("opacity",1e-6).transition().duration(e).delay(o).attr("y",r).style("opacity",1);ht.transition().duration(e).delay(o).text(ft).attr("x",f).attr("y",r).style("opacity",1);ht.exit().transition().duration(e).delay(o).attr("y",r).style("opacity",1e-6).remove();delete t.quartiles}});n.timerFlush()}var f=1,w=1,e=0,o=0,c=null,b=Number,l=t,k=r,d=null,a=!1,g=3,v=.3,s=.8,y=!1,p=!0,h=!1;return u.width=function(n){return arguments.length?(f=n,u):f},u.height=function(n){return arguments.length?(w=n,u):w},u.tickFormat=function(n){return arguments.length?(d=n,u):d},u.showOutliers=function(n){return arguments.length?(p=n,u):p},u.boldOutlier=function(n){return arguments.length?(h=n,u):h},u.renderDataPoints=function(n){return arguments.length?(a=n,u):a},u.renderTitle=function(n){return arguments.length?(y=n,u):y},u.dataOpacity=function(n){return arguments.length?(v=n,u):v},u.dataWidthPortion=function(n){return arguments.length?(s=n,u):s},u.duration=function(n){return arguments.length?(e=n,u):e},u.domain=function(n){return arguments.length?(c=n===null?n:typeof n=="function"?n:i.utils.constant(n),u):c},u.value=function(n){return arguments.length?(b=n,u):b},u.whiskers=function(n){return arguments.length?(l=n,u):l},u.quartiles=function(n){return arguments.length?(k=n,u):k},u}}(),i.boxPlot=function(t,r){function k(n){return function(t){var u=t.quartiles[0],f=t.quartiles[2],e=(f-u)*n,i=-1,r=t.length;do++i;while(t[i]<u-e);do--r;while(t[r]>f+e);return[i,r]}}function nt(n){var t=n.enter().append("g");t.attr("class","box").attr("transform",y).call(f).on("click",function(n){u.filter(u.keyAccessor()(n));u.redrawGroup()});return t.merge(n)}function tt(t){i.transition(t,u.transitionDuration(),u.transitionDelay()).attr("transform",y).call(f).each(function(t){var i=u.getColor(t,0);n.select(this).select("rect.box").attr("fill",i);n.select(this).selectAll("circle.data").attr("fill",i)})}function it(n){n.exit().remove().call(f)}function p(){return n.min(u.data(),function(t){return n.min(u.valueAccessor()(t))})}function w(){return n.max(u.data(),function(t){return n.max(u.valueAccessor()(t))})}function b(){return(w()-p())/u.effectiveHeight()}var u=i.coordinateGridMixin({}),d=k,g=d(1.5),f=n.box(),o=null,s=!1,h=.3,c=.8,l=!0,a=!1,e=8,v=function(n,t){return u.isOrdinal()?u.x().bandwidth():n/(1+u.boxPadding())/t},y;return u.x(n.scaleBand()),u.xUnits(i.units.ordinal),u.data(function(n){return n.all().map(function(n){return n.map=function(t){return t.call(n,n)},n}).filter(function(n){var t=u.valueAccessor()(n);return t.length!==0})}),u.boxPadding=u._rangeBandPadding,u.boxPadding(.8),u.outerPadding=u._outerRangeBandPadding,u.outerPadding(.5),u.boxWidth=function(n){return arguments.length?(v=typeof n=="function"?n:i.utils.constant(n),u):v},y=function(n,t){var i=u.x()(u.keyAccessor()(n,t));return"translate("+i+", 0)"},u._preprocessData=function(){u.elasticX()&&u.x().domain([])},u.plotData=function(){var i=v(u.effectiveWidth(),u.xUnitCount()),n,t;f.whiskers(g).width(i).height(u.effectiveHeight()).value(u.valueAccessor()).domain(u.y().domain()).duration(u.transitionDuration()).tickFormat(o).renderDataPoints(s).dataOpacity(h).dataWidthPortion(c).renderTitle(u.renderTitle()).showOutliers(l).boldOutlier(a);n=u.chartBodyG().selectAll("g.box").data(u.data(),u.keyAccessor());t=nt(n);tt(t);it(n);u.fadeDeselectedArea(u.filter())},u.fadeDeselectedArea=function(n){if(u.hasFilter())if(u.isOrdinal())u.g().selectAll("g.box").each(function(n){u.isSelectedNode(n)?u.highlightSelected(this):u.fadeDeselected(this)});else{if(!(u.brushOn()||u.parentBrushOn()))return;var t=n[0],i=n[1],r=u.keyAccessor();u.g().selectAll("g.box").each(function(n){var f=r(n);f<t||f>=i?u.fadeDeselected(this):u.highlightSelected(this)})}else u.g().selectAll("g.box").each(function(){u.resetHighlight(this)})},u.isSelectedNode=function(n){return u.hasFilter(u.keyAccessor()(n))},u.yAxisMin=function(){var n=e*b();return i.utils.subtract(p()-n,u.yAxisPadding())},u.yAxisMax=function(){var n=e*b();return i.utils.add(w()+n,u.yAxisPadding())},u.tickFormat=function(n){return arguments.length?(o=n,u):o},u.yRangePadding=function(n){return arguments.length?(e=n,u):e},u.renderDataPoints=function(n){return arguments.length?(s=n,u):s},u.dataOpacity=function(n){return arguments.length?(h=n,u):h},u.dataWidthPortion=function(n){return arguments.length?(c=n,u):c},u.showOutliers=function(n){return arguments.length?(l=n,u):l},u.boldOutlier=function(n){return arguments.length?(a=n,u):a},u.anchor(t,r)},i.selectMenu=function(t,r){function p(){var n=f.selectAll("option."+s).data(u.data(),function(n){return u.keyAccessor()(n)});n.exit().remove();n.enter().append("option").classed(s,!0).attr("value",function(n){return u.keyAccessor()(n)}).merge(n).text(u.title());f.selectAll("option."+s).sort(l);f.on("change",w)}function w(){var t,i=n.event.target,r,f;i.selectedOptions?(r=Array.prototype.slice.call(i.selectedOptions),t=r.map(function(n){return n.value})):(f=[].slice.call(n.event.target.options),t=f.filter(function(n){return n.selected}).map(function(n){return n.value}));t.length===1&&t[0]===""?t=c||null:e||t.length!==1||(t=t[0]);u.onChange(t)}function b(){e?f.attr("multiple",!0):f.attr("multiple",null);o!==null?f.attr("size",o):f.attr("size",null)}var y="dc-select-menu",s="dc-select-option",u=i.baseMixin({}),f,h="Select all",e=!1,c=null,o=null,l=function(n,t){return u.keyAccessor()(n)>u.keyAccessor()(t)?1:u.keyAccessor()(t)>u.keyAccessor()(n)?-1:0},a=function(n){return u.valueAccessor()(n)>0},v;return u.data(function(n){return n.all().filter(a)}),u._doRender=function(){return u.select("select").remove(),f=u.root().append("select").classed(y,!0),f.append("option").text(h).attr("value",""),u._doRedraw(),u},v=window.navigator.userAgent,v.indexOf("Trident/")>0&&v.indexOf("MSIE")===-1&&(u.redraw=u.render),u._doRedraw=function(){return b(),p(),u.hasFilter()&&e?f.selectAll("option").property("selected",function(n){return typeof n!="undefined"&&u.filters().indexOf(String(u.keyAccessor()(n)))>=0}):u.hasFilter()?f.property("value",u.filter()):f.property("value",""),u},u.onChange=function(n){n&&e?u.replaceFilter([n]):n?u.replaceFilter(n):u.filterAll();i.events.trigger(function(){u.redrawGroup()})},u.order=function(n){return arguments.length?(l=n,u):l},u.promptText=function(n){return arguments.length?(h=n,u):h},u.filterDisplayed=function(n){return arguments.length?(a=n,u):a},u.multiple=function(n){return arguments.length?(e=n,u):e},u.promptValue=function(n){return arguments.length?(c=n,u):c},u.numberVisible=function(n){return arguments.length?(o=n,u):o},u.size=i.logger.deprecate(u.numberVisible,"selectMenu.size is ambiguous - use numberVisible instead"),u.anchor(t,r)},i.textFilterWidget=function(n,t){var o="dc-text-filter-input",r=i.baseMixin({}),u=function(n){return n.toLowerCase()},f=function(n){return n=u(n),function(t){return u(t).indexOf(n)!==-1}},e="search";return r.group(function(){throw"the group function on textFilterWidget should never be called, please report the issue";}),r._doRender=function(){r.select("input").remove();var n=r.root().append("input").classed(o,!0);n.on("input",function(){r.dimension().filterFunction(f(this.value));i.events.trigger(function(){i.redrawAll()},i.constants.EVENT_DELAY)});return r._doRedraw(),r},r._doRedraw=function(){return r.root().selectAll("input").attr("placeholder",e),r},r.normalize=function(n){return arguments.length?(u=n,r):u},r.placeHolder=function(n){return arguments.length?(e=n,r):e},r.filterFunctionFactory=function(n){return arguments.length?(f=n,r):f},r.anchor(n,t)},i.cboxMenu=function(t,r){function w(){var n=f.selectAll("li."+l).data(u.data(),function(n){return u.keyAccessor()(n)}),t;if(n.exit().remove(),n=n.enter().append("li").classed(l,!0).merge(n),n.append("input").attr("type",h).attr("value",function(n){return u.keyAccessor()(n)}).attr("name","domain_"+o).attr("id",function(n,t){return"input_"+o+"_"+t}),n.append("label").attr("for",function(n,t){return"input_"+o+"_"+t}).text(u.title()),e)f.append("li").append("input").attr("type","reset").text(s).on("click",y);else t=f.append("li"),t.append("input").attr("type",h).attr("value",c).attr("name","domain_"+o).attr("id",function(){return"input_"+o+"_all"}).property("checked",!0),t.append("label").attr("for",function(){return"input_"+o+"_all"}).text(s);f.selectAll("li."+l).sort(a);f.on("change",y);return n}function y(){var t,r=n.select(n.event.target),i;r.datum()?(i=n.select(this).selectAll("input").filter(function(n){if(n)return this.checked}),t=i.nodes().map(function(n){return n.value}),e||t.length!==1||(t=t[0])):t=c||null;u.onChange(t)}var p="dc-cbox-group",l="dc-cbox-item",u=i.baseMixin({}),f,s="Select all",e=!1,h="radio",c=null,o=Math.floor(Math.random()*1e5)+1,a=function(n,t){return u.keyAccessor()(n)>u.keyAccessor()(t)?1:u.keyAccessor()(t)>u.keyAccessor()(n)?-1:0},v=function(n){return u.valueAccessor()(n)>0};return u.data(function(n){return n.all().filter(v)}),u._doRender=function(){return u._doRedraw()},u._doRedraw=function(){return u.select("ul").remove(),f=u.root().append("ul").classed(p,!0),w(),u.hasFilter()&&e?f.selectAll("input").property("checked",function(n){return n&&u.filters().indexOf(String(u.keyAccessor()(n)))>=0||!1}):u.hasFilter()&&f.selectAll("input").property("checked",function(n){return n?u.keyAccessor()(n)===u.filter():!1}),u},u.onChange=function(n){n&&e?u.replaceFilter([n]):n?u.replaceFilter(n):u.filterAll();i.events.trigger(function(){u.redrawGroup()})},u.order=function(n){return arguments.length?(a=n,u):a},u.promptText=function(n){return arguments.length?(s=n,u):s},u.filterDisplayed=function(n){return arguments.length?(v=n,u):v},u.multiple=function(n){return arguments.length?(e=n,h=e?"checkbox":"radio",u):e},u.promptValue=function(n){return arguments.length?(c=n,u):c},u.anchor(t,r)},i.abstractBubbleChart=i.bubbleMixin,i.baseChart=i.baseMixin,i.capped=i.capMixin,i.colorChart=i.colorMixin,i.coordinateGridChart=i.coordinateGridMixin,i.marginable=i.marginMixin,i.stackableChart=i.stackMixin,i.d3=n,i.crossfilter=t,i}if(typeof define=="function"&&define.amd)define(["d3","crossfilter2"],t);else if(typeof module=="object"&&module.exports){var i=require("d3"),n=require("crossfilter2");typeof n!="function"&&(n=n.crossfilter);module.exports=t(i,n)}else this.dc=t(d3,crossfilter)})();var Translator=function(){function n(){this.defaultDictionaries={en:{RegressionLine:"Regression line",barChart:"Bar chart",choropleth:"Map",diagram:"Diagram",markerMap:"Location map",numberDisplay:"Number",pieChart:"Pie chart",scatterPlot:"Scatter plot",table:"Table",timeLine:"Time line",addGraphTitle:"Chart",resetTitle:"Reset filters",resetAllTitle:"Reset",editTitle:"Edit",saveEditTitle:"Accept",saveTitle:"Save",removeTitle:"Remove chart",closeTitle:"Close",moreActionsTitle:"More options","Grafiek toevoegen":"Add chart","Kies een grafiektype om toe te voegen":"Choose a chart type to add","Kies een waarde voor de grafiek":"Choose a measure for the chart","Extra opties":"Additional options","Extra opties verbergen":"Hide additional options","Kies een dimensie voor de grafiek":"Choose a dimension for the chart","Extra dimensie toevoegen":"Add additional dimension",removeDimensionTitle:"Remove dimension","Kies de kolommen voor de tabel":"Choose the columns for the table","Alles selecteren":"Select all","Grafiek verwijderen":"Remove chart","Weet u zeker dat u deze grafiek wilt verwijderen?":"Are you sure you want to remove this chart?",Annuleren:"Cancel",Bevestigen:"Confirm",Toevoegen:"Add",Geselecteerde:"Selected","Resultaten per pagina":"Results per page",Toont:"Showing","van de":"of",Vorige:"Previous",Volgende:"Next","Mogelijk gemaakt door":"Powered by",Aantal:"Number of",Gemiddeld:"Average",Gemiddelde:"Average",Percentage:"Percentage",count:"rows","PDF exporteren":"Export PDF","CSV exporteren":"Export CSV","Afbeelding exporteren":"Export image",LimitReached:"The maximum number of graphs has been reached. To continue delete a graph.",ScreenTooSmall:"Expand your window to modify the Smart Graph layout."},nl:{RegressionLine:"Regressielijn",barChart:"Staafdiagram",choropleth:"Gebiedenkaart",diagram:"Diagram",markerMap:"Locatiekaart",numberDisplay:"Getal",pieChart:"Cirkeldiagram",scatterPlot:"Spreidingsdiagram",table:"Tabel",timeLine:"Tijdlijn",moreActionsTitle:"Meer acties",resetAllTitle:"Herstellen",resetTitle:"Reset filters",editTitle:"Bewerken",saveEditTitle:"Bewaren",removeTitle:"Verwijder grafiek",closeTitle:"Sluiten",saveTitle:"Opslaan",removeDimensionTitle:"Verwijder dimensie",addGraphTitle:"Grafiek",hour:"uur",month:"maand",day:"dag",minute:"minuut","Hover over a":"Ga over een",count:"rijen",LimitReached:"Het maximaal aantal grafieken is bereikt. Om door te gaan verwijder een grafiek.",ScreenTooSmall:"Vergroot je venster om de lay-out van de Smart Graph aan te kunnen passen.",Ok:"Oké","Something went wrong while loading the Smart Graph.<br>Please contact Quant Base: <a href='mailto:support@quantbase.eu'>support@quantbase.eu<\/a>":"Er is iets misgegaan tijdens het laden van de Smart Graph.<br>Neem contact op met Quant Base: <a href='mailto:support@quantbase.eu'>support@quantbase.eu<\/a>"}};this.dictionary={};this.timeFormat=null}return Object.defineProperty(n.prototype,"language",{get:function(){return this._language},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currency",{get:function(){return this._currency},enumerable:!1,configurable:!0}),n.prototype.initialize=function(n,t,i){i===void 0&&(i="nl");this._currency=t;this.dictionary=n;this._language=i;this.initializeLocale();this.initializeDictionary(n);this.initializeTimeFormat()},n.prototype.initializeLocale=function(){this._language=="en"?(d3.timeFormatDefaultLocale({dateTime:"%x %X",date:"%m/%d/%Y",time:"%I:%M %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),d3.formatDefaultLocale({decimal:".",thousands:",",grouping:[3],currency:[this._currency,""]})):(this._language="nl",d3.timeFormatDefaultLocale({dateTime:"%x %X",date:"%d-%m-%Y",time:"%H:%M",periods:["AM","PM"],days:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],shortDays:["Zo","Ma","Di","Woe","Do","Vrij","Zat"],months:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sept","Okt","Nov","Dec"]}),d3.formatDefaultLocale({decimal:",",thousands:".",grouping:[3],currency:[this._currency,""]}))},n.prototype.initializeDictionary=function(n){var t=this.defaultDictionaries[this.language];SmartGraph.copyPropertiesToObject(t,n);this.dictionary=n},n.prototype.initializeTimeFormat=function(){var n=d3.timeFormat("%X"),t=d3.timeFormat("%X"),i=d3.timeFormat("%b %d"),r=d3.timeFormat("%B"),u=d3.timeFormat("%Y");this.timeFormat=function(f){return(d3.timeHour(f)<f?n:d3.timeDay(f)<f?t:d3.timeMonth(f)<f?i:d3.timeYear(f)<f?r:u)(f)}},n.prototype.translate=function(n){var t=this.dictionary[n];return t===undefined&&(t=n),t},n.prototype.translateArray=function(n){var t=[],i=this;return n.forEach(function(n){t.push(i.translate(n))}),t},n.prototype.getNumberFormatFunction=function(n,t){if(n){var i;return i=t!=null?d3.format(t):d3.format(",.2f"),function(n){return n<1e3?i(n):n<1e6?i(n/1e3)+" K":n<1e9?i(n/1e6)+" M":i(n/1e9)+" B"}}return t!=null?d3.format(t):d3.format(",")},n.prototype.getTimeFormat=function(n){var t,i=d3.timeFormat("%H:%M"),r=d3.timeFormat("%H:%M"),u=d3.timeFormat("%d"),e=d3.timeFormat("%d"),f=d3.timeFormat("%B"),o=d3.timeFormat("%Y");switch(n){case"%m":case"%m/%d":case"%m/%d %H":case"%m/%d %H:%M":t=function(n){return(d3.timeHour(n)<n?i:d3.timeDay(n)<n?r:d3.timeMonth(n)<n?u:f)(n)};break;case"%d":case"%d %H":case"%d %H:%M":t=function(n){return(d3.timeHour(n)<n?i:d3.timeDay(n)<n?r:u)(n)};break;case"%H":case"%H:%M":t=function(n){return r(n)};break;case"%M":i=d3.timeFormat("%M");t=function(n){return i(n)};break;default:t=this.timeFormat}return t},n.prototype.getDateFormat=function(n){return n===void 0&&(n="%c"),d3.timeFormat(n)},n.prototype.getDateString=function(n,t){return t===void 0&&(t="%c"),d3.timeFormat(t)(n)},n.prototype.convertDateFormat=function(n){var t=n,i=function(n,t,i){return n.replace(t,function(n,t,r){return t?t:r?r:i})};return t=i(t,/(%-yyyyy)|(%yyyyy)|(yyyyy)/,"%Y"),t=i(t,/(%-yyyy)|(%yyyy)|(yyyy)/,"%Y"),t=i(t,/(%-yyy)|(%yyy)|(yyy)/,"%-Y"),t=i(t,/(%-yy)|(%yy)|(yy)/,"%y"),t=i(t,/(%-y)|(%y)|(y)/,"%-y"),t=i(t,/(%-MMMM)|(%MMMM)|(MMMM)/,"%B"),t=i(t,/(%-MMM)|(%MMM)|(MMM)/,"%b"),t=i(t,/(%-MM)|(%MM)|(MM)/,"%m"),t=i(t,/(%-M)|(%M)|(M)/,"%-m"),t=i(t,/(%-dddd)|(%dddd)|(dddd)/,"%A"),t=i(t,/(%-ddd)|(%ddd)|(ddd)/,"%a"),t=i(t,/(%-dd)|(%dd)|(dd)/,"%d"),t=i(t,/(%-dd)|(%dd)|(dd)/,"%-d"),t=i(t,/(%-HH)|(%HH)|(HH)/,"%H"),t=i(t,/(%-H)|(%H)|(H)/,"%-H"),t=i(t,/(%-hh)|(%hh)|(hh)/,"%I"),t=i(t,/(%-h)|(%h)|(h)/,"%-I"),t=i(t,/(%-mm)|(%mm)|(mm)/,"%M"),t=i(t,/(%-m)|(%m)|(m)/,"%-M"),t=i(t,/(%-tt)|(%tt)|(tt)/,"%p"),t=i(t,/(%-t)|(%t)|(t)/,"%p"),t=i(t,/(%-ss)|(%ss)|(ss)/,"%S"),t=i(t,/(%-s)|(%s)|(s)/,"%-S"),t=i(t,/(%-ffffff)|(%ffffff)|(ffffff)/,"%f"),t=i(t,/(%-fffff)|(%fffff)|(fffff)/,"%f"),t=i(t,/(%-ffff)|(%ffff)|(ffff)/,"%f"),t=i(t,/(%-fff)|(%fff)|(fff)/,"%L"),t=i(t,/(%-ff)|(%ff)|(ff)/,"%L"),t=i(t,/(%-f)|(%f)|(f)/,"%L"),t=i(t,/(%-zzz)|(%zzz)|(zzz)/,"%Z"),t=i(t,/(%-zz)|(%zz)|(zz)/,"%Z"),i(t,/(%-z)|(%z)|(z)/,"%Z")},n}(),ChartFactory=function(){function n(n,t,i,r){this.mapConfigs=n;this.filter=t;this.translator=i;this.codeRootLocation=r}return n.prototype.createChart=function(n,t,i,r,u,f){switch(n){case"barChart":return new BarChart(t,this.mapConfigs,this.filter,i,r,u,this.translator,this.codeRootLocation,f);case"numberDisplay":return new NumberDisplay(t,this.mapConfigs,this.filter,i,r,u,this.translator,this.codeRootLocation,f);case"pieChart":return new PieChart(t,this.mapConfigs,this.filter,i,r,u,this.translator,this.codeRootLocation,f);case"timeLine":return new TimeLine(t,this.mapConfigs,this.filter,i,r,u,this.translator,this.codeRootLocation,f);case"table":return new Table(t,this.mapConfigs,this.filter,i,r,u,this.translator,this.codeRootLocation,f);default:return new UndefinedChart}},n}(),DimensionFactory=function(){function n(){}return n.createDimension=function(t,i,r){return i!=undefined?typeof i=="string"?r?n.createMultiDimension(t,i):n.createSingleDimension(t,i):i.length==1?r?n.createMultiDimension(t,i[0]):n.createSingleDimension(t,i[0]):n.createMultipleDimension(t,i):n.createEmptyDimension(t)},n.createSingleDimension=function(n,t){return n.dimension(function(n){return n[t]})},n.createMultiDimension=function(n,t,i){return i===void 0&&(i=";"),n.dimension(function(n){return n[t].split(i)},!0)},n.createMultipleDimension=function(n,t){return n.dimension(function(n){for(var r=[],i=0;i<t.length;i++)r.push(n[t[i]]);return r})},n.createEmptyDimension=function(n){return n.dimension(function(){return null})},n}(),GroupFactory=function(){function n(){}return n.createGroup=function(t,i){var r=i.group();return t.count!=undefined?r=t.count==="count"?n.createCountRowsGroup(r):n.createCountUniqueItemsGroup(r,t.count):t.sum!=undefined&&(r=t.average?n.createAverageSumGroup(r,t.sum):t.divisor!=undefined?n.createDivisorSumGroup(r,t.sum,t.divisor):n.createSumGroup(r,t.sum)),r},n.createCountRowsGroup=function(n){return n.reduce(function(n){return n.count++,n},function(n){return n.count--,n},function(){return{count:0}})},n.createCountUniqueItemsGroup=function(n,t){return n.reduce(function(n,i){return i[t]in n.items?n.items[i[t]]++:n.items[i[t]]=1,n.items[i[t]]==1&&n.count++,n},function(n,i){return n.items[i[t]]--,n.items[i[t]]===0&&n.count--,n},function(){return{count:0,items:{}}})},n.createSumGroup=function(n,t){return n.reduceSum(function(n){return+n[t]})},n.createAverageSumGroup=function(n,t){return n.reduce(function(n,i){return++n.count,n.sum+=Number(i[t]),n},function(n,i){return--n.count,n.sum-=Number(i[t]),n},function(){return{count:0,sum:0}})},n.createDivisorSumGroup=function(n,t,i){return n.reduce(function(n,r){return n.divisor+=Number(r[i]),n.sum+=Number(r[t]),n},function(n,r){return n.divisor-=Number(r[i]),n.sum-=Number(r[t]),n},function(){return{divisor:0,sum:0}})},n.filterGroup=function(t,i,r){var u=t;return i.top?u=n.filterTopnGroup(u,i.top,r):i.filterGroups&&(u=n.filterGroupKeys(u,i.filterGroups)),i.filterEmpty&&(u=n.filterEmpty(u,r)),u},n.filterTopnGroup=function(n,t,i){var r=jQuery.extend({},n);return i.count!=undefined?r.all=function(){return n.order(function(n){return n.count}).top(t)}:i.sum!=undefined&&(r.all=function(){return n.order(function(n){return n}).top(t)}),r},n.filterGroupKeys=function(n,t){var i=jQuery.extend({},n),r=function(n){return t.indexOf(n.key)<0};return i.all=function(){return n.all().filter(r)},i},n.filterEmpty=function(n,t){var i=jQuery.extend({},n);return t.count!=undefined?i.all=function(){return n.all().filter(function(n){return n.value.count!=0})}:t.sum!=undefined&&(i.all=t.average?function(){return n.all().filter(function(n){return!isNaN(n.value.sum/n.value.count)&&n.value.sum/n.value.count!=0})}:function(){return n.all().filter(function(n){return n.value!=0})}),i},n}(),ValueAccessorFactory=function(){function n(){}return n.createValueAccessor=function(t,i){var r;return t.count!=undefined?r=t.percentage?n.createCountPercentageValueAccessor(i):n.createCountValueAccessor():t.sum!=undefined&&(r=t.average?n.createAverageSumValueAccessor():t.percentage?n.createSumPercentageValueAccessor(i):t.divisor!=undefined?n.createDivisorSumValueAccessor():n.createSumValueAccessor()),r},n.createCountValueAccessor=function(){return function(n){return n.value.count}},n.createCountPercentageValueAccessor=function(n){return function(t){var i,r;if(t.value.count==0)return 0;for(i=0,r=0;r<n.all().length;r++)i=i+n.all()[r].value.count;return t.value.count/i*100}},n.createAverageSumValueAccessor=function(){return function(n){return n.value.count==0?0:n.value.sum/n.value.count}},n.createSumPercentageValueAccessor=function(n){return function(t){var i,r;if(t.value==0)return 0;for(i=0,r=0;r<n.all().length;r++)i=i+n.all()[r].value;return t.value/i*100}},n.createDivisorSumValueAccessor=function(){return function(n){return n.value.divisor==0?0:n.value.sum/n.value.divisor}},n.createSumValueAccessor=function(){return function(n){return n.value}},n.createNumberDisplaySumPercentageValueAccessor=function(n){return function(t){return t.value/n*100}},n.createNumberDisplayCountPercentageValueAccessor=function(n){return function(t){return t.value.count/n*100}},n}(),BaseChart=function(){function n(n,t,i,r,u,f,e,o,s){this.resizeHandleClicked=!1;this.defaultChartLayout={width:4,height:4,transitionDuration:800,chartMargins:{top:10,left:75,bottom:75,right:10},colors:["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"],numberScale:!1,rotate:-45,textAnchor:"end"};this.chartConfig=n;this.mapConfigs=t;this.filter=i;this.chartMargins=r;this.geoData=u;this.smartGraph=f;this.translator=e;this.codeRootLocation=o;this.exportConfig=s}return n.prototype.initialize=function(){this.setDefaultVariables();this.chartMargins=this.chartConfig.layout.chartMargins;var r=this.chartConfig.title,i=this.chartConfig.dimension,t=this.chartConfig.measure!=undefined?this.chartConfig.measure:{};return this.average=t.average!=undefined?t.average:!1,this.percentage=t.percentage!=undefined?t.percentage:!1,this.id=n.getUniqueChartName(),this.initializeDimension(i),this.initializeChartGroup(t),this.initializeChild(i,t),this.initializeValueAccessor(t),this.initializePopup(),this.setChartSize(),this.setOnFiltered(),this.ordinalColors(),this.addLine(),this.rotateText(),this.setTransitionDuration(),this},n.prototype.setDefaultVariables=function(){this.chartConfig.hasOwnProperty("layout")||(this.chartConfig.layout={});SmartGraph.copyPropertiesToObject(this.defaultChartLayout,this.chartConfig.layout);this.chartConfig.hasOwnProperty("options")||(this.chartConfig.options={});SmartGraph.copyPropertiesToObject(this.defaultChartOptions,this.chartConfig.options)},n.getUniqueChartName=function(){return"chart"+Math.random().toString().split(".")[1]},n.prototype.initializeDimension=function(n){var t=!1;n!=undefined&&(typeof n=="string"?t=this.smartGraph.isMultiDimension(n):n.length==1&&(t=this.smartGraph.isMultiDimension(n[0])));this.chartDimension=DimensionFactory.createDimension(this.filter,n,t)},n.prototype.initializeChartGroup=function(n){this.chartGroup=GroupFactory.createGroup(n,this.chartDimension);this.chartConfig.options!=undefined&&(this instanceof BarChart||this instanceof PieChart)&&(this.chartGroup=GroupFactory.filterGroup(this.chartGroup,this.chartConfig.options,n))},n.prototype.initializeValueAccessor=function(n){this.dcChart.valueAccessor(ValueAccessorFactory.createValueAccessor(n,this.chartGroup))},n.prototype.initializePopup=function(){var n=this,i=this.chartConfig.layout.numberFormat,t=this.translator.getNumberFormatFunction(!1,i);this.chartConfig.layout.showGroupInPopup?this.dcChart.title(function(i){return n.dcChart.keyAccessor()(i)+": "+t(n.dcChart.valueAccessor()(i))}):this.dcChart.title(function(i){return t(n.dcChart.valueAccessor()(i))})},n.prototype.setChartSize=function(){var n=this.chartConfig.selector;this.dcChart.width(jQuery(n).width());this.dcChart.height(jQuery(n).height())},n.prototype.remove=function(){this.dcChart.filterAll();this.dcChart.dimension()!=undefined&&this.dcChart.dimension().dispose();dc.chartRegistry.deregister(this.dcChart);dc.redrawAll();this.gridItem.remove()},n.prototype.rotateText=function(){var n=this.chartConfig.layout.rotate,t=this.chartConfig.layout.textAnchor;if(t=="end")this.dcChart.on("renderlet.rotateText",function(t){t.selectAll("g.x text").attr("style","text-anchor:end !important; ").attr("transform","translate(-8,0) rotate("+n+")")});else this.dcChart.on("renderlet.rotateText",function(t){t.selectAll("g.x text").attr("style","text-anchor:middle !important; ").attr("transform","rotate("+n+")")})},n.prototype.ordinalColors=function(){(this instanceof BarChart||this instanceof PieChart||this instanceof TimeLine)&&(this.chartConfig.dimension instanceof Array&&this.chartConfig.dimension.length>1||this.dcChart.colorAccessor(function(n){return n.key}),this.dcChart.ordinalColors(this.chartConfig.layout.colors))},n.prototype.setOnClick=function(){var n=this,t=this.dcChart.onClick,i=this.chartGroup.all().length;this.dcChart.onClick=function(r){var u=n.dcChart,e=r.data!=undefined?r.data.key:r.key,f;!d3.event.altKey||u.filters().length?(t.call(u,r),u.filters().length==i&&(u.filterAll(),u.redrawGroup())):(f=u.group().all().map(function(n){return n.key}).filter(function(n){return n!=e}),u.replaceFilter([f]).redrawGroup())}},n.prototype.setOnFiltered=function(){var n=this;if(this.smartGraph.chartSelections!=undefined)this.dcChart.on("filtered",function(t,i){var r,u;if(i==null||i==undefined)n.smartGraph.chartSelections.removeSelections(n);else if(typeof i=="object"&&i.length==1&&typeof i[0]=="object")for(r=0;r<i[0].length;r++)u=i[0][r],t.filters().indexOf(u)>=0?n.smartGraph.chartSelections.addSelection(u,n):n.smartGraph.chartSelections.removeSelection(u,n);else t.filters().indexOf(i)>=0?n.smartGraph.chartSelections.addSelection(i,n):n.smartGraph.chartSelections.removeSelection(i,n)})},n.prototype.addLine=function(){(this instanceof BarChart||this instanceof TimeLine)&&this.chartConfig.options.line!=undefined&&new Line(this,this.chartConfig.options.line).initialize()},n.prototype.setTransitionDuration=function(){var n=this.chartConfig.layout.transitionDuration;this.dcChart.transitionDuration(n)},n.prototype.getDimensionName=function(){var t,n=this.chartConfig.dimension;return t=typeof n=="string"?this.translator.translate(n):n.length<2?this.translator.translate(n[0]):this.translator.translateArray(n).join(", "),t.charAt(0).toUpperCase()+t.substring(1)},n.prototype.getFilters=function(){var i=this.chartConfig.dimension,r=this.getDimensionName(),t=this.dcChart.filters().slice(0),n;if(typeof i!="string"&&i.length>1)for(n=0;n<t.length;n++)t[n]="("+t[n].join(", ")+")";return[{key:r,value:t}]},n.prototype.hasFilters=function(){return this.dcChart.hasFilter()},n.getFormOptions=function(){return{measureCanBeAverage:this.measureCanBeAverage,measureCanBePercentage:this.measureCanBePercentage,hasColumns:this.hasColumns,minNumberOfMeasures:this.minNumberOfMeasures,maxNumberOfMeasures:this.maxNumberOfMeasures,minNumberOfDimensions:this.minNumberOfDimensions,maxNumberOfDimensions:this.maxNumberOfDimensions}},n.prototype.onResize=function(){this.setChartSize();this.dcChart.transitionDuration(1);this.dcChart.render();this.setTransitionDuration()},n.prototype.getIndex=function(){return this.gridItem.getIndex()},n.prototype.getWidth=function(){return this.gridItem.getWidth()},n.prototype.getHeight=function(){return this.gridItem.getHeight()},n.measureCanBeAverage=!0,n.measureCanBePercentage=!0,n.hasColumns=!1,n.minNumberOfMeasures=1,n.maxNumberOfMeasures=1,n.minNumberOfDimensions=1,n.maxNumberOfDimensions=1,n}(),Margins=function(){function n(n,t,i,r){this.top=n;this.right=t;this.bottom=i;this.left=r}return n}(),__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),BarChart=function(n){function t(t,i,r,u,f,e,o,s,h){var c=n.call(this,t,i,r,u,f,e,o,s,h)||this;return c.layers=[],c.defaultChartOptions={clickableTicks:!0,maxGroupsPerGridColumn:20,showInlineValues:!1,type:"grouped",autoWidth:!0},c}return __extends(t,n),t.prototype.initializeDimension=function(t){this.hasMultipleDimensions=this.chartConfig.dimension instanceof Array&&this.chartConfig.dimension.length>1;var i;i=typeof t=="string"?t:t[0];this.hasMultipleDimensions&&this.chartConfig.options.type=="stacked"?n.prototype.initializeDimension.call(this,i):!this.hasMultipleDimensions&&this.smartGraph.isDateTimeDimension(i)?this.chartDimension=this.filter.dimension(function(n){return new Date(n[i])}):n.prototype.initializeDimension.call(this,t)},t.prototype.initializeChartGroup=function(t){var o,i,r,u,f,e;this.hasMultipleDimensions?(o=this.chartConfig.dimension,i=o[1],t.count!=undefined?this.chartGroup=this.chartDimension.group().reduce(function(n,t){return n[t[i]]=(n[t[i]]||0)+1,n},function(n,t){return n[t[i]]=(n[t[i]]||0)-1,n},function(){return{}}):t.sum!=undefined&&(r=t.sum,this.average?this.chartGroup=this.chartDimension.group().reduce(function(n,t){return n[t[i]],n.sum[t[i]]=(n.sum[t[i]]||0)+Number(t[r]),n.count[t[i]]=(n.count[t[i]]||0)+1,n},function(n,t){return n.sum[t[i]]=(n.sum[t[i]]||0)-Number(t[r]),n.count[t[i]]=(n.count[t[i]]||0)-1,n},function(){return{sum:{},count:{}}}):t.divisor!=undefined?(u=t.divisor,f=t.sum,this.chartGroup=this.chartDimension.group().reduce(function(n,t){return n.sum[t[i]]=(n.sum[t[i]]||0)+Number(t[f]),n.divisor[t[i]]=(n.divisor[t[i]]||0)+Number(t[u]),n},function(n,t){return n.sum[t[i]]=(n.sum[t[i]]||0)-Number(t[f]),n.divisor[t[i]]=(n.divisor[t[i]]||0)-Number(t[u]),n},function(){return{sum:{},divisor:{}}})):(e=t.sum,this.chartGroup=this.chartDimension.group().reduce(function(n,t){return n[t[i]]=(n[t[i]]||0)+Number(t[e]),n},function(n,t){return n[t[i]]=(n[t[i]]||0)-Number(t[e]),n},function(){return{}}))),this.chartGroup=GroupFactory.filterGroup(this.chartGroup,this.chartConfig.options,t)):n.prototype.initializeChartGroup.call(this,t)},t.prototype.initializeChild=function(n,t){var i,r;if(this.dcChart=dc.barChart(this.chartConfig.selector),this.setOrdering(),i=this.chartConfig.options.showLegend,i==undefined&&(i=this.hasMultipleDimensions),this.hasMultipleDimensions)this.createLayers(),this.dcChart.group(this.chartGroup,this.layers[0]).dimension(this.chartDimension).margins({top:this.chartMargins.top,right:this.chartMargins.right,bottom:this.chartMargins.bottom,left:this.chartMargins.left}),i&&(this.dcChart.legend(dc.legend().x(10).y(10)),this.chartConfig.options.type=="stacked"&&(r=this.dcChart,dc.override(r,"legendables",function(){var n=r._legendables();return n.reverse()})));else if(this.dcChart.group(this.chartGroup).dimension(this.chartDimension).margins(this.chartMargins),i)this.dcChart.on("pretransition.addLegend",function(){if(this.legend()==undefined){var n=this.colorDomain();this.legendables=function(){for(var i=[],t=0;t<n.length;t++)i.push({chart:this,name:n[t],color:this.getColor({key:n[t]})});return i};this.legend(dc.legend().x(10).y(10));this.legend().render()}});i&&this.chartConfig.options.legendPosition=="right"&&jQuery(this.chartConfig.selector).addClass("legend-right");this.chartConfig.options.showGridLines&&this.dcChart.renderHorizontalGridLines(!0);this.chartConfig.options.gap&&this.dcChart.gap(this.chartConfig.options.gap);this.chartConfig.options.autoWidth&&this.chartConfig.layout.width==undefined&&this.setContainerWidth();this.setOnClick();this.setXAxis(n);this.setYAxis(t);this.setInlineValues()},t.prototype.createLayers=function(){for(var t=this.chartGroup.all(),r,n,u=t[0].value.sum!=undefined?function(n){return Object.keys(t[n].value.sum)}:function(n){return Object.keys(t[n].value)},i=0;i<t.length;i++)for(r=u(i),n=0;n<r.length;n++)this.layers.indexOf(r[n])<0&&this.layers.push(r[n]);this.layers.sort()},t.prototype.getStackValueAccessor=function(n,t,i){var r=this,u;if(this.percentage)switch(this.chartConfig.measure.percentageOver){case 1:u=n=="stacked"?function(n){var i=t[n];return function(n){var t,u,r,f;if(n.value[i]==undefined||n.value[i]==0)return 0;for(t=0,u=Object.keys(n.value),r=0;r<u.length;r++)f=n.value[u[r]],isNaN(f)||(t=t+f);return n.value[i]/t*100}}:function(n){var i=t[n];return function(n){var u,t,f;if(n.value[i]==undefined||n.value[i]==0)return 0;for(u=0,t=0;t<r.chartGroup.all().length;t++)r.chartGroup.all()[t].key[0]==n.key[0]&&(f=r.chartGroup.all()[t].value[r.chartGroup.all()[t].key[1]],isNaN(f)||(u=u+f));return n.value[i]/u*100}};break;case 2:u=n=="stacked"?function(n){var i=t[n];return function(n){var t,u,f;if(n.value[i]==undefined||n.value[i]==0)return 0;for(t=0,u=0;u<r.chartGroup.all().length;u++)f=r.chartGroup.all()[u].value[i],isNaN(f)||(t=t+f);return n.value[i]/t*100}}:function(n){var i=t[n];return function(n){var u,t,f;if(n.value[i]==undefined||n.value[i]==0)return 0;for(u=0,t=0;t<r.chartGroup.all().length;t++)r.chartGroup.all()[t].key[1]==n.key[1]&&(f=r.chartGroup.all()[t].value[r.chartGroup.all()[t].key[1]],isNaN(f)||(u=u+f));return n.value[i]/u*100}};break;default:u=n=="stacked"?function(n){var i=t[n];return function(n){var u,f,t,o,e,s;if(n.value[i]==undefined||n.value[i]==0)return 0;for(u=0,f=r.chartGroup.all(),t=0;t<f.length;t++)for(o=Object.keys(f[t].value),e=0;e<o.length;e++)s=f[t].value[o[e]],isNaN(s)||(u=u+s);return n.value[i]/u*100}}:function(n){var i=t[n];return function(n){var u,t,f;if(n.value[i]==undefined||n.value[i]==0)return 0;for(u=0,t=0;t<r.chartGroup.all().length;t++)f=r.chartGroup.all()[t].value[r.chartGroup.all()[t].key[1]],isNaN(f)||(u=u+f);return n.value[i]/u*100}}}else u=this.average&&i.sum!=undefined?function(n){var i=t[n];return function(n){return n.value.count[i]==undefined||n.value.count[i]==0?0:n.value.sum[i]/n.value.count[i]}}:i.divisor!=undefined?function(n){var i=t[n];return function(n){return n.value.divisor[i]==undefined||n.value.divisor[i]==0?0:n.value.sum[i]/n.value.divisor[i]}}:function(n){var i=t[n];return function(n){return n.value[i]==undefined?0:n.value[i]}};return u},t.prototype.setContainerWidth=function(){for(var t=this.chartGroup.all().length,n=4,i=this.smartGraph.grid.columns,r=this.chartConfig.options.maxGroupsPerGridColumn;!(t<=n*r)&&i>n;)n++;this.gridItem.setWidth(n);this.setChartSize();this.gridItem.grid.refresh()},t.prototype.setXAxis=function(n){var w=this,u,h,i,c,f,t,e,o,y,p;if(this.hasMultipleDimensions&&this.chartConfig.options.type=="grouped"){var l=[],a=this.chartConfig.options.domain!=undefined,r=a?this.chartConfig.options.domain:[],v=this.layers,s=this.chartGroup.all();for(t=0;t<s.length;t++)r.indexOf(s[t].key[0])<0&&r.push(s[t].key[0]);for(a||r.sort(),t=0;t<r.length;t++)for(u=0;u<v.length;u++)l.push([r[t],v[u]]);h=d3.scaleBand().domain(l);this.dcChart.x(h).xUnits(dc.units.ordinal).elasticX(!1).xAxis().tickValues(h.domain().filter(function(n,t){return!(t%w.layers.length)})).tickFormat(function(n){return n[0]});this.dcChart.on("renderlet.moveTicks",function(n){for(var f,r=n.width()-n.margins().left-n.margins().right,u=jQuery("#"+n.anchorName()+" g.x .tick "),i=u.length,t=0;t<i;t++)f=r/(i*2)+t*r/i,u[t].setAttribute("transform","translate("+f+")")})}else{if(i=this.chartConfig.options.domain,i!=undefined){if(i.length!=this.chartGroup.all().length)for(f=this.chartGroup.all(),t=0;t<f.length;t++)i.indexOf(f[t].key)<0&&i.push(f[t].key);i=this.translator.translateArray(i);e=d3.scaleBand().domain(i);c=!1}else e=d3.scaleBand(),c=!0;this.dcChart.x(e).xUnits(dc.units.ordinal).elasticX(c);o=void 0;o=typeof n=="string"?n:n[0];this.smartGraph.isDateTimeDimension(o)&&(y=this.translator.convertDateFormat(this.smartGraph.config.dimensions.dateTime[o]),this.dcChart.xAxis().tickFormat(d3.timeFormat(y)))}this.chartConfig.options.showXLabel&&(p=this.chartConfig.options.xLabel!=undefined?this.chartConfig.options.xLabel:typeof n!="string"?this.translator.translate(n[0]):this.translator.translate(n),this.dcChart.xAxisLabel(p).margins({top:this.chartMargins.top,right:this.chartMargins.right,bottom:this.chartMargins.bottom,left:this.chartMargins.left}));this.setClickableTicks();this.chartConfig.options.hideXTicks&&this.dcChart.xAxis().tickValues(e.domain().filter(function(){return!1}))},t.prototype.setYAxis=function(n){var u=this.chartConfig.layout.numberScale,f=this.chartConfig.layout.numberFormat,t=this.translator.getNumberFormatFunction(u,f),i,r;this.dcChart.elasticY(!0).yAxis().tickFormat(t);this.percentage&&this.dcChart.yAxis().tickFormat(function(n){return t(n)+"%"});this.chartConfig.layout.numberOfTicks!=undefined&&this.dcChart.yAxis().ticks(this.chartConfig.layout.numberOfTicks);this.chartConfig.options.showYLabel&&(i=this.chartConfig.options.yLabel!=undefined?this.chartConfig.options.yLabel:this.translator.translate(n.sum),r=this.chartConfig.options.yLabelPadding!=undefined?this.chartConfig.options.yLabelPadding:12,this.dcChart.yAxisLabel(i,r).margins({top:this.chartMargins.top,right:this.chartMargins.right,bottom:this.chartMargins.bottom,left:this.chartMargins.left}))},t.prototype.setClickableTicks=function(){var t=this.chartConfig.options.clickableTicks,n;if(t)if(n=this,this.hasMultipleDimensions&&this.chartConfig.options.type=="grouped")this.dcChart.on("renderlet.clickable",function(t){var i=t.select(".axis.x").selectAll(".tick text");if(i.size()>0){i.style("cursor:pointer !important");i.on("click",function(t){for(var i=0;i<n.layers.length;i++)n.dcChart.onClick({data:{key:[t[0],n.layers[i]]}})})}});else this.dcChart.on("renderlet.clickable",function(t){var i=t.select(".axis.x").selectAll(".tick text");i.style("cursor:pointer !important");i.on("click",function(t){n.dcChart.onClick({data:{key:t}})})})},t.prototype.setOrdering=function(){if(this.chartConfig.options.top)this.chartConfig.measure.count!=undefined?this.dcChart.ordering(function(n){return-n.value.count}):this.dcChart.ordering(function(n){return-n.value});else if(this.chartConfig.options.ordering=="numerical")if(this.hasMultipleDimensions&&this.chartConfig.options.type=="stacked"){var n=this;this.dcChart.ordering(function(t){for(var f,r,e,o=n.dcChart.keyAccessor()(t),u=0,i=0;i<n.chartGroup.size();i++)if(o==n.dcChart.keyAccessor()(n.chartGroup.all()[i]))for(f=Object.keys(n.chartGroup.all()[i].value),r=0;r<f.length;r++)e=n.chartGroup.all()[i].value[f[r]],isNaN(e)||(u=u+e);return-u})}else this.hasMultipleDimensions||(this.chartConfig.measure.count!=undefined?this.dcChart.ordering(function(n){return-n.value.count}):this.dcChart.ordering(function(n){return-n.value}))},t.prototype.setInlineValues=function(){if(this.chartConfig.options.showInlineValues){var t=this,i=this.calculateBarWidth(),n=this.getInlineNumberFormat(),r=function(n){var r=t.dcChart.x()(n.x);return r+=i/2,dc.utils.safeNumber(r)};this.dcChart.on("pretransition.inlineValues",function(t){function s(n){var i=t.y()(n.y+n.y0);return i=n.y>=0?i+15:i-5,dc.utils.safeNumber(i)}function h(n){var i=t.y()(n.y);return i=n.y>=0?i+15:i-5,dc.utils.safeNumber(i)<t.y()(0)||dc.utils.safeNumber(i)-15>t.y()(0)?"initial":"none"}for(var i,o,f,c,e=function(i){return n(t.valueAccessor()(i.data))},u=0;u<t.stack().length;u++)u>0&&(e=function(i){return n(t.stack()[u].accessor(i.data))}),o=t.data()[u].values,f=t.select("g.chart-body g.stack._"+u),f.selectAll("text").empty()?(i=f.append("g").selectAll("text").data(o),i=i.enter().append("text").text(e).attr("x",function(n){return r(n)}).attr("y",t.y()(0)).attr("fill","white").attr("style","font-size:10px; text-anchor:middle; cursor:pointer").on("click",t.onClick)):(i=f.selectAll("text").data(o),i.enter().merge(i)),c=i.transition().duration(t.transitionDuration()).delay(t.transitionDelay()).text(e).attr("y",s).attr("display",h)})}},t.prototype.calculateBarWidth=function(){var n,t=1,i=this.dcChart.group().all().length;return n=Math.floor((this.dcChart.xAxisLength()-(i-1)*2)/i),(n===Infinity||isNaN(n)||n<t)&&(n=t),n},t.prototype.getInlineNumberFormat=function(){var i=this.chartConfig.layout.numberFormat,n=this.translator.getNumberFormatFunction(!1,i),t;return this.percentage&&(t=n,n=function(n){return t(n)+"%"}),n},t.prototype.initializeValueAccessor=function(t){var r,i;if(this.hasMultipleDimensions)for(r=this.getStackValueAccessor(this.chartConfig.options.type,this.layers,t),this.dcChart.valueAccessor(r(0)),i=1;i<this.layers.length;i++)this.dcChart.stack(this.chartGroup,this.layers[i],r(i));else n.prototype.initializeValueAccessor.call(this,t)},t.prototype.initializePopup=function(){var r;if(this.hasMultipleDimensions){var i=this.chartConfig.layout.numberFormat,t=this.translator.getNumberFormatFunction(!1,i);if(this.chartConfig.options.type=="grouped")this.dcChart.title(function(){return this.x.join(", ")+": "+t(this.y)});else if(this.chartConfig.layout.showAllPopup){this.chartConfig.layout.showGroupInPopup?this.dcChart.title(function(n){var i=n.key;for(var r in n.value)i=i+"\n"+r+": "+t(n.value[r]);return i}):this.dcChart.title(function(n){var i="";for(var r in n.value)i=i+"\n"+r+": "+t(n.value[r]);return i});r=this;this.dcChart.on("renderlet",function(n){n.selectAll("rect.bar").on("mouseover.hover",function(t){var i=t;n.selectAll("rect.bar").attr("class",function(n){return n.x==i.x?"bar hover":"bar"})}).on("mouseout.hover",function(){n.selectAll("rect.bar").attr("class",function(){return"bar"})})})}else this.chartConfig.layout.showGroupInPopup?this.dcChart.title(function(){return this.x+", "+this.layer+": "+t(this.y)}):this.dcChart.title(function(){return this.layer+": "+t(this.y)})}else n.prototype.initializePopup.call(this)},t.prototype.getDimensionName=function(){var t,n=this.chartConfig.dimension;return t=typeof n=="string"?this.translator.translate(n):n.length<2||this.chartConfig.options.type=="stacked"?this.translator.translate(n[0]):this.translator.translateArray(n).join(", "),t.charAt(0).toUpperCase()+t.substring(1)},t.prototype.getFilters=function(){var i=this.getDimensionName(),t=this.dcChart.filters().slice(0),n;if(this.hasMultipleDimensions&&this.chartConfig.options.type=="grouped")for(n=0;n<t.length;n++)t[n]="("+t[n].join(", ")+")";else if(this.hasMultipleDimensions&&this.chartConfig.options.type=="stacked")for(n=0;n<t.length;n++)t[n]=t[0];return[{key:i,value:t}]},t.maxNumberOfDimensions=2,t}(BaseChart),__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),NumberDisplay=function(n){function t(t,i,r,u,f,e,o,s,h){var c=n.call(this,t,i,r,u,f,e,o,s,h)||this;return c.defaultChartOptions={type:"selected",fontPercentage:12},c.defaultChartLayout.numberFormat==undefined&&c.chartConfig.layout.numberFormat==undefined&&(c.chartConfig.layout.numberFormat=",.0f"),c}return __extends(t,n),t.prototype.initializeChild=function(n,t){var r=this.chartConfig.layout.numberScale,u=this.chartConfig.layout.numberFormat,i=this.translator.getNumberFormatFunction(r,u);this.total=t.count!=undefined?this.chartGroup.all()[0].value.count:this.chartGroup.all()[0].value;this.dcChart=dc.numberDisplay("#"+this.id+" .chart-wrapper");this.dcChart.group(this.chartGroup).formatNumber(i);this.initializeHTML(t,i);this.setFontSize()},t.prototype.initializeHTML=function(n,t){n.percentage?this.dcChart.html({one:"%number %",some:"%number %",none:"%number %"}):this.chartConfig.options.type!="selectedTotal"||n.average||this.dcChart.html({one:"%number / "+t(this.total),some:"%number / "+t(this.total),none:"%number / "+t(this.total)})},t.prototype.initializeValueAccessor=function(t){if(t.percentage){var i=void 0;i=t.count!=undefined?ValueAccessorFactory.createNumberDisplayCountPercentageValueAccessor(this.total):ValueAccessorFactory.createNumberDisplaySumPercentageValueAccessor(this.total);this.dcChart.valueAccessor(i)}else n.prototype.initializeValueAccessor.call(this,t)},t.prototype.setFontSize=function(){var n=this.chartConfig.options.fontPercentage;this.dcChart.on("renderlet.fontSize",function(t){var i=t.width()/100*n;t.select("span").attr("style","font-size: "+i+"px")})},t.maxNumberOfDimensions=0,t}(BaseChart),__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),PieChart=function(n){function t(t,i,r,u,f,e,o,s,h){var c=n.call(this,t,i,r,u,f,e,o,s,h)||this;return c.defaultChartOptions={padding:35,externalLabels:!0,showAllLabels:!1,showLabels:!0,legend:!1,innerRadiusPercentage:.4},c}return __extends(t,n),t.prototype.initializeChild=function(){this.dcChart=dc.pieChart(this.chartConfig.selector);this.dcChart.dimension(this.chartDimension).group(this.chartGroup).emptyTitle("");this.setLabels();this.initializeLegend();this.setPadding();this.setOrdering();this.setOnClick()},t.prototype.setLabels=function(){var i=this.chartConfig.options.showLabels,n,t;i?(n=this.chartConfig.options.externalLabels,n&&this.dcChart.externalLabels(10).drawPaths(!0),t=this.chartConfig.options.showAllLabels,t&&this.dcChart.minAngleForLabel(0)):this.dcChart.minAngleForLabel(361).label(function(){return""},!1)},t.prototype.initializeLegend=function(){var n=this.chartConfig.options.legend;n&&this.dcChart.legend(dc.legend().x(10).y(10))},t.prototype.setPadding=function(){var i=this.chartConfig.options.padding,n,t;this.dcChart.externalRadiusPadding(i);n=this.chartConfig.options.innerRadiusPercentage;t=function(t){var i=Math.min(t.width(),t.height()),r=(i-t.externalRadiusPadding()*2)/2;t.innerRadius(r*n)};this.dcChart.on("preRender",t)},t.prototype.initializePopup=function(){var t=this;this.percentage?this.dcChart.title(function(n){return t.dcChart.valueAccessor()(n).toFixed(2)+"%"}):n.prototype.initializePopup.call(this)},t.prototype.setOrdering=function(){if(this.chartConfig.options.domain!=undefined){var n=this.translator.translateArray(this.chartConfig.options.domain);this.dcChart.ordering(function(t){return n.indexOf(t.key)})}else this.chartConfig.options.top?this.chartConfig.measure.count!=undefined?this.dcChart.ordering(function(n){return-n.value.count}):this.dcChart.ordering(function(n){return-n.value}):this.chartConfig.options.ordering=="numerical"?this.chartConfig.measure.count!=undefined?this.dcChart.ordering(function(n){return-n.value.count}):this.dcChart.ordering(function(n){return-n.value}):this.dcChart.ordering(function(n){return n.key})},t}(BaseChart),__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Table=function(n){function t(t,i,r,u,f,e,o,s,h){var c=n.call(this,t,i,r,u,f,e,o,s,h)||this;return c.defaultChartOptions={searchFilter:!1,search:!1,searchText:"Zoek",numberOfRecords:10,pageSizes:[10,25,50,100]},c}return __extends(t,n),t.prototype.initializeChild=function(){var n=this.chartConfig.options.numberOfRecords,t,i;this.initializeHTMLElements();t=function(){return""};i=this.getTableColumns();this.initializeSearch();this.dcChart=dc.dataTable("#"+this.id+" .chart-wrapper table");this.dcChart.dimension(this.chartDimension).group(t).columns(i).size(Infinity).beginSlice(0).endSlice(n).showGroups(!1);this.dcChart.numberOfRecords=n;this.sortTable();this.setPaging()},t.prototype.initializeHTMLElements=function(){var i,n,t;for((this.chartConfig.options.searchFilter||this.chartConfig.options.search)&&jQuery("#"+this.id+" .chart-wrapper").append("<div class='table-search'><\/div>"),i=this.chartConfig.options.pageSizes,n="<div class='page-size-container'>"+this.translator.translate("Resultaten per pagina")+": <select class='page-size'>",t=0;t<i.length;t++)n=this.chartConfig.options.numberOfRecords==i[t]?n+"<option selected>"+i[t]+"<\/option>":n+"<option>"+i[t]+"<\/option>";n=n+"<\/select> <\/div> ";jQuery("#"+this.id+" .chart-wrapper").append(n);jQuery("#"+this.id+" .chart-wrapper").append("<table><\/table>")},t.prototype.getTableColumns=function(){for(var t=[],r=function(){var r=i.chartConfig.columns[n],u={label:i.translator.translate(r),format:function(n){return n[r]}};t.push(u)},i=this,n=0;n<this.chartConfig.columns.length;n++)r();return t},t.prototype.initializeSearch=function(){var n=this,i=this.chartConfig.options.searchText,t,r;if(this.chartConfig.options.searchFilter)t=dc.textFilterWidget("#"+this.id+" .table-search").dimension(this.chartDimension),t.placeHolder(i),t.render();else if(this.chartConfig.options.search){r=typeof n.chartConfig.dimension!="string"?n.chartConfig.dimension[0]:n.chartConfig.dimension;jQuery("#"+this.id+" .table-search").append("<input/>");jQuery("#"+this.id+" .table-search input").on("input",function(){var t=this.value,i=n.getFilteredDimension(n.chartDimension,r,t);n.dcChart.dimension(i);n.dcChart.redraw()});jQuery("#"+this.id+" .table-search input").attr("placeholder",i)}},t.prototype.getFilteredDimension=function(n,t,i){return i=i.toLowerCase(),{top:function(r){return n.top(r).filter(function(n){return n[t].toLowerCase().indexOf(i)!==-1})},bottom:function(r){return n.bottom(r).filter(function(n){return n[t].toLowerCase().indexOf(i)!==-1})},dispose:function(){return n.dispose()}}},t.prototype.setPaging=function(){var t,i,n=this,r=document.createElement("div"),u,f,e,o;r.setAttribute("id","paging");r.setAttribute("style","margin-bottom: 5px; margin-top: 5px;display:inline-block; text-align: center; color: black; font-size: 12px;");r.innerHTML="<div>"+this.translator.translate("Toont")+" <span id= 'begin'><\/span>-<span id='end' ><\/span > "+this.translator.translate("van de")+" <span id= 'size' ><\/span><\/div> <div><input id= 'previous' class='previous-button' type= 'Button' value= '"+this.translator.translate("Vorige")+"' /><input id='next' class='next-button' type='Button' value='"+this.translator.translate("Volgende")+"'/><\/div >";this.chartContainer.element.appendChild(r);this.dcChart.on("renderlet.paging",function(){var r=n.dcChart.dimension().top(Infinity).length;i!=r&&(i=r,t=0,n.replacePaging(t,n.dcChart.numberOfRecords,i,n.dcChart))});u=document.querySelector("#"+this.id+" .next-button");u.addEventListener("click",function(){t+=n.dcChart.numberOfRecords;n.replacePaging(t,n.dcChart.numberOfRecords,i,n.dcChart)});f=document.querySelector("#"+this.id+" .previous-button");f.addEventListener("click",function(){t-=n.dcChart.numberOfRecords;n.replacePaging(t,n.dcChart.numberOfRecords,i,n.dcChart)});e=document.querySelector("#"+this.id+" .reset-button");e.addEventListener("click",function(){t=0;n.replacePaging(t,n.dcChart.numberOfRecords,i,n.dcChart)});o=document.querySelector("#"+this.id+" .page-size");o.addEventListener("change",function(){var r=Number(this.value);n.dcChart.numberOfRecords=r;t=0;n.replacePaging(t,n.dcChart.numberOfRecords,i,n.dcChart)})},t.prototype.replacePaging=function(n,t,i,r){d3.select("#"+this.id+" #begin").text(n+1);d3.select("#"+this.id+" #end").text(n+t>i?i:n+t);d3.select("#"+this.id+" #size").text(i);d3.select("#"+this.id+" #previous").attr("disabled",n-t<0?"true":null);d3.select("#"+this.id+" #next").attr("disabled",n+t>=i?"true":null);r.beginSlice(n);r.endSlice(n+t);r.redraw()},t.prototype.sortTable=function(){var t=this.chartConfig.options.sortBy,n;t!=undefined&&this.dcChart.sortBy(function(n){return n[t]});n=this.chartConfig.options.order;n!=undefined&&(n=="desc"||n=="descending"?this.dcChart.order(d3.descending):(n=="asc"||n=="ascending")&&this.dcChart.order(d3.ascending))},t.prototype.remove=function(){this.dcChart.filterAll();this.dcChart.dimension()!=undefined&&this.dcChart.dimension().dispose();dc.chartRegistry.deregister(this.dcChart);dc.redrawAll()},t.maxNumberOfMeasures=0,t.maxNumberOfDimensions=0,t.hasColumns=!0,t}(BaseChart),__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),TimeLine=function(n){function t(t,i,r,u,f,e,o,s,h){var c=n.call(this,t,i,r,u,f,e,o,s,h)||this;return c.defaultChartOptions={clickableTicks:!0,zoomIn:!1,rangeZoom:!1,timeInterval:"month",showBrush:!1,pointRadius:.01,dateTimeFormat:"%x"},c}return __extends(t,n),t.prototype.initializeDimension=function(n){var r=this,t,i;if(this.hasMultipleDimensions=typeof n!="string"&&n.length>1,this.timeInterval=this.chartConfig.options.timeInterval,i=this.chartConfig.options.timeFormat,i!=undefined)t=function(n){return r.getDate(n,i)};else switch(this.timeInterval){case"month":t=d3.timeMonth;break;case"day":t=d3.timeDay;break;case"week":t=d3.timeMonday;break;case"hour":t=d3.timeHour;break;case"minute":t=d3.timeMinute;break;case"none":t=d3.timeDay;break;default:console.log("time interval unknown");return}this.chartDimension=this.hasMultipleDimensions?this.filter.dimension(function(i){var u=[],f=new Date(i[n[0]]),r;for(u.push(t(f)),r=1;r<n.length;r++)u.push(i[n[r]]);return u}):typeof n!="string"?this.filter.dimension(function(i){var r=new Date(i[n[0]]);return t(r)}):this.filter.dimension(function(i){var r=new Date(i[n]);return t(r)})},t.prototype.getDate=function(n,t){var i=new Date(0);i.setHours(0);for(var r=t.split(/[%]/),f=r.length,u=0;++u<f;)switch(r[u].charAt(0)){case"m":i.setMonth(n.getMonth());break;case"d":i.setDate(n.getDate());break;case"H":i.setHours(n.getHours());break;case"M":i.setMinutes(n.getMinutes())}return i},t.prototype.initializeChild=function(n,t){this.addTimeIntevalOptionsHTML(n,t);this.createTimeLineChart(n,t)},t.prototype.addTimeIntevalOptionsHTML=function(n,t){var i=this,u=this.chartConfig.options.timeIntervalOptions,r,f,e,o;if(u!=undefined&&u!=!1){for(r="<select class='time-interval-select' contenteditable='false'>",f=0;f<u.length;f++)e=u[f],o="",this.chartConfig.options.timeInterval==e&&(o="selected"),r=r+"<option "+o+" value ='"+e+"' >"+this.translator.translate(e)+"<\/option >";r=r+"<\/select>";jQuery(r).appendTo("#"+this.id+" .chart-header");jQuery("#"+this.id+" .chart-title").addClass("title-dropdown")}jQuery("#"+this.id+" .chart-header select.time-interval-select").on("change",function(){i.dcChart.filterAll();dc.chartRegistry.deregister(i.dcChart);dc.redrawAll();i.chartDimension.dispose();jQuery("#"+i.id+" .chart-wrapper svg").remove();i.exportConfig.options==undefined&&(i.exportConfig.options={});i.exportConfig.options.timeInterval=this.value;i.chartConfig.options.timeInterval=this.value;i.initializeDimension(n);i.initializeChartGroup(t);i.createTimeLineChart(n,t);i.initializeValueAccessor(t);i.initializePopup();i.setChartSize();i.setOnFiltered();i.ordinalColors();i.addLine();i.rotateText();i.setTransitionDuration();i.dcChart.render()})},t.prototype.createTimeLineChart=function(n,t){var i=this,r=this;this.timeInterval=="none"&&(this.chartGroup=this.filter);this.dcChart=dc.seriesChart(this.chartConfig.selector);this.dcChart.margins(this.chartMargins).dimension(this.chartDimension).group(this.chartGroup).elasticY(!0).elasticX(!1).brushOn(this.chartConfig.options.showBrush);this.chartConfig.options.pointRadius&&this.dcChart.chart(function(n){return dc.lineChart(n).renderDataPoints({radius:i.chartConfig.options.pointRadius,fillOpacity:.8,strokeOpacity:0})});this.setAxes(n,t);this.hasMultipleDimensions?(this.timeInterval=="none"?(this.dcChart.data(function(n){return n.allFiltered()}),this.dcChart.seriesAccessor(function(t){return t[n[1]]}).keyAccessor(function(t){return new Date(t[n[0]])})):this.dcChart.seriesAccessor(function(n){return n.key[1]}).keyAccessor(function(n){return n.key[0]}),this.dcChart.margins({top:this.chartMargins.top,right:this.chartMargins.right,bottom:this.chartMargins.bottom,left:this.chartMargins.left+30}).legend(dc.legend().x(10).y(10)),this.setFilterHandler()):this.timeInterval=="none"?this.dcChart.seriesAccessor(function(){return 0}).keyAccessor(function(t){return new Date(t[n])}).data(function(n){return n.allFiltered()}):this.dcChart.seriesAccessor(function(){return 0}).keyAccessor(function(n){return n.key});this.chartConfig.options.showGridLines&&this.dcChart.renderHorizontalGridLines(!0);this.setClickableTicks()},t.prototype.initializeValueAccessor=function(t){this.timeInterval=="none"?this.dcChart.valueAccessor(function(n){return n[t.sum]}):n.prototype.initializeValueAccessor.call(this,t)},t.prototype.initializePopup=function(){var t=this;if(this.chartConfig.layout.showGroupInPopup){var i=this.chartConfig.layout.numberFormat,r=this.translator.getNumberFormatFunction(!1,i),u=this.translator.getDateFormat(this.chartConfig.options.dateTimeFormat);this.dcChart.title(function(n){return u(t.dcChart.keyAccessor()(n))+": "+r(t.dcChart.valueAccessor()(n))})}else n.prototype.initializePopup.call(this)},t.prototype.setAxes=function(n,t){var r,i,u,f,e;switch(this.timeInterval){case"month":this.dcChart.round(d3.timeMonth.round).xUnits(d3.timeMonths);break;case"day":case"none":this.dcChart.round(d3.timeDay.round).xUnits(d3.timeYears);break;case"week":this.dcChart.round(d3.timeMonday.round).xUnits(d3.timeMondays);break;case"hour":this.dcChart.round(d3.timeHour.round).xUnits(d3.timeHours);break;case"minute":this.dcChart.round(d3.timeMinute.round).xUnits(d3.timeMinutes);break;default:console.log("time interval unknown");return}r=this.chartConfig.layout.numberScale;i=this.translator.getNumberFormatFunction(r);this.percentage?this.dcChart.yAxis().tickFormat(function(n){return i(n)+"%"}):this.dcChart.yAxis().tickFormat(i);this.chartConfig.layout.numberOfTicks!=undefined&&this.dcChart.yAxis().ticks(this.chartConfig.layout.numberOfTicks);this.chartConfig.options.showXLabel&&(u=this.chartConfig.options.xLabel!=undefined?this.chartConfig.options.xLabel:typeof n!="string"?this.translator.translate(n[0]):this.translator.translate(n),this.dcChart.xAxisLabel(u).margins({top:this.chartMargins.top,right:this.chartMargins.right,bottom:this.chartMargins.bottom,left:this.chartMargins.left}));this.chartConfig.options.showYLabel&&(f=this.chartConfig.options.yLabel!=undefined?this.chartConfig.options.yLabel:this.translator.translate(t.sum),e=this.chartConfig.options.yLabelPadding!=undefined?this.chartConfig.options.yLabelPadding:12,this.dcChart.yAxisLabel(f,e).margins({top:this.chartMargins.top,right:this.chartMargins.right,bottom:this.chartMargins.bottom,left:this.chartMargins.left}));this.setDomain();this.setRange()},t.prototype.setFilterHandler=function(){var n=this,t=function(t,i){if(i.length===0)t.filter(null);else{var r=dc.filters.RangedFilter(i[0][0],i[0][1]);t.filterFunction(function(t){return r.isFiltered(n.dcChart.keyAccessor()({key:t,value:null}))})}return i},i,r;this.chartConfig.options.dashStyles?(r=typeof this.chartConfig.options.dashStyles=="boolean"?[[0],[4,4]]:this.chartConfig.options.dashStyles,i=function(n){for(var t=n;r.length<t;)t=t-r.length;return r[t]}):i=function(){return[0]};this.chartConfig.options.pointRadius?n.dcChart.filterHandler(t).chart(function(r,u,f,e){var o=i(e);return dc.lineChart(r).dashStyle(o).renderDataPoints({radius:n.chartConfig.options.pointRadius,fillOpacity:.8,strokeOpacity:0}).filterHandler(t)}):n.dcChart.filterHandler(t).chart(function(n,r,u,f){var e=i(f);return dc.lineChart(n).dashStyle(e).filterHandler(t)})},t.prototype.setDomain=function(){var i=this,h=this.chartConfig.options.zoomIn,n,t,r,o,u,f,e,s;if(t=this.hasMultipleDimensions?function(n){return n.key[0]}:function(n){return n.key},this.timeInterval=="none"&&(r=i.chartConfig.dimension,typeof r!="string"&&(r=r[0]),t=function(n){return new Date(n[r])}),h){this.dcChart.on("preRedraw.domain",function(n){var u=GroupFactory.filterEmpty(i.chartGroup,i.chartConfig.measure),r=d3.extent(u.all(),function(n){return t(n)});r[0]==r[1]&&(r=d3.extent(i.chartGroup.all(),function(n){return t(n)}));n.x(d3.scaleTime().domain(r));n.children().forEach(function(n){n.x(d3.scaleTime().domain(r))})});o=GroupFactory.filterEmpty(i.chartGroup,i.chartConfig.measure);n=d3.extent(o.all(),function(n){return t(n)});n[0]==n[1]&&(n=d3.extent(i.chartGroup.all(),function(n){return t(n)}))}else u=Number(d3.min(this.chartGroup.all(),function(n){return t(n)}).valueOf()),f=Number(d3.max(this.chartGroup.all(),function(n){return t(n)}).valueOf());this.chartConfig.options.xScale=="year"?(n=[new Date(u),new Date(f)],n=[new Date(n[0].getFullYear(),0,1),new Date(n[1].getFullYear()+1,0,1)],this.dcChart.xAxis().tickFormat(d3.timeFormat("%Y")).ticks(d3.timeYear)):(e=f-u,n=[new Date(f-e*1.02),new Date(u+e*1.02)],s=this.chartConfig.options.timeFormat,this.dcChart.xAxis().tickFormat(this.translator.getTimeFormat(s)));this.dcChart.x(d3.scaleTime().domain(n))},t.prototype.setRange=function(){var n=this,t=this.chartConfig.options.rangeZoom;if(t){this.dcChart.elasticY(!1);this.dcChart.on("preRender.range, preRedraw.range",function(t){var i=GroupFactory.filterEmpty(n.chartGroup,n.chartConfig.measure),r=d3.extent(i.all(),function(n){return t.valueAccessor()(n)}),u=d3.scaleLinear().domain(r);t.y(u)})}else this.dcChart.on("preRender.range",function(t){var r=t.valueAccessor(),u=Number(d3.min(n.chartGroup.all(),function(n){return r(n)})),f=Number(d3.max(n.chartGroup.all(),function(n){return r(n)})),e=f-u,i=[f-e*1.02,u+e*1.02];i[0]>0&&(i[0]=0);t.elasticY(!1).y(d3.scaleLinear().domain(i))})},t.prototype.setClickableTicks=function(){var n=this,i=this.chartConfig.options.clickableTicks,t;if(i){switch(this.timeInterval){case"month":t=function(n){var i=new Date(n.getFullYear(),n.getMonth()),t=new Date(+i);return t.setMonth(t.getMonth()+1),[i,t]};break;case"day":t=function(n){var i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),t=new Date(+i);return t.setDate(t.getDate()+1),[i,t]};break;case"week":t=function(n){var i=n.getDay(),u=n.getDate()-i+(i==0?-6:1),r=new Date(n.getFullYear(),n.getMonth(),u),t=new Date(+r);return t.setDate(t.getDate()+7),[r,t]};break;case"hour":t=function(n){var i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours()),t=new Date(+i);return t.setHours(t.getHours()+1),[i,t]};break;case"minute":t=function(n){var i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()),t=new Date(+i);return t.setMinutes(t.getMinutes()+1),[i,t]};break;default:console.log("time interval unknown");return}this.dcChart.on("renderlet.click",function(i){var r=i.select(".axis.x").selectAll(".tick text");r.style("cursor:pointer !important");r.on("click",function(i){var u=t(i),r=dc.filters.RangedFilter(u[0],u[1]);n.dcChart.hasFilter()&&r[0].getTime()==n.dcChart.filters()[0][0].getTime()&&r[1].getTime()==n.dcChart.filters()[0][1].getTime()?n.dcChart.filterAll():n.dcChart.replaceFilter(r);n.dcChart.redrawGroup()})})}},t.prototype.setTransitionDuration=function(){var r,i,t;for(n.prototype.setTransitionDuration.call(this),r=this.chartConfig.layout.transitionDuration,i=this.dcChart.children(),t=0;t<i.length;t++)i[t].transitionDuration(r)},t.prototype.setOnFiltered=function(){var n=this,t;if(this.smartGraph.chartSelections!=undefined){t=n.chartConfig.options.timeInterval=="hour"||n.chartConfig.options.timeInterval=="minute"?this.translator.getDateFormat():this.translator.getDateFormat("%x");this.dcChart.on("filtered",function(i,r){if(r==null||r==undefined)n.smartGraph.chartSelections.removeSelections(n);else{var u=t(r[0])+" &ndash; "+t(r[1]);n.smartGraph.chartSelections.replaceSelection(u,n)}})}},t.prototype.getDimensionName=function(){var n=typeof this.chartConfig.dimension=="string"?this.chartConfig.dimension:this.chartConfig.dimension[0];return n=this.translator.translate(n),n.charAt(0).toUpperCase()+n.substring(1)},t.prototype.getFilters=function(){var t,n,i;return t=this.chartConfig.options.timeInterval=="hour"||this.chartConfig.options.timeInterval=="minute"?this.translator.getDateFormat():this.translator.getDateFormat("%x"),n=this.dcChart.filters()[0],n=["["+t(n[0])+" - "+t(n[1])+"]"],i=this.getDimensionName(),[{key:i,value:n}]},t.maxNumberOfDimensions=2,t}(BaseChart),__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),UndefinedChart=function(n){function t(){return n.call(this,null,null,null,null,null,null,null,null,null)||this}return __extends(t,n),t.prototype.initializeChild=function(){},t.prototype.initialize=function(){return console.log("UndefinedChartType"),this},t}(BaseChart),SmartGraph=function(){function n(n){this.LIMIT_DIMENSIONS=16;this.bodyNode=jQuery("body");this.config=n;this.geoData={};this.chartList=[];this.sliderList=[]}return n.prototype.initialize=function(){var n=this;this.bodyNode.append("<div id='alert' class='pop-up-container'><div id='alert-container' class='pop-up-content'><div id='alert-message'>Something went wrong.<\/div><div id='alert-button'><button>Ok<\/button><\/div><\/div><\/div>");jQuery("#alert-button button").click(function(){jQuery("#alert").removeClass("show")});n.processConfig(n.config)},n.prototype.processConfig=function(){var r=this;this.initializeConfig();this.initializeLayout(this.config);var n=new Translator,t=this.config.layout.currency!=undefined?this.config.layout.currency:"€",i=this.config.layout.language;n.initialize({},t,i);this.translator=n;this.processJsonConfigCharts()},n.prototype.initializeConfig=function(){this.config.layout==undefined&&(this.config.layout={});this.config.measures==undefined?this.config.measures={}:Array.isArray(this.config.measures)&&console.warn("Measures is an Array, should be an object");this.config.measures.sum==undefined&&(this.config.measures.sum=[]);this.config.measures.count==undefined&&(this.config.measures.count=[]);this.config.dimensions==undefined&&(this.config.dimensions={});this.config.layout.colors==undefined&&(this.config.layout.colors=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"]);this.config.layout.rotate==undefined&&(this.config.layout.rotate=-45);this.config.layout.showForm==undefined&&(this.config.layout.showForm=!0);this.config.layout.showSelections==undefined&&(this.config.layout.showSelections=!1);this.config.layout.editGrid==undefined&&(this.config.layout.editGrid=!1);this.config.layout.resize==undefined&&(this.config.layout.resize=!0);this.cascadeConfig(this.config)},n.prototype.processJsonConfigGeoFiles=function(){var i,u;if(jQuery("#alert-button button").text(this.translator.translate("Ok")),i=!0,this.config.mapConfigs!=undefined&&Object.keys(this.config.mapConfigs).length>0){i=!1;var n=this.config.mapConfigs,t=0,f=function(i){if(n.hasOwnProperty(i))if(n[i].geoJsonPath!=undefined){var u=r;d3.json(n[i].geoJsonPath,{credentials:"include"}).then(function(n){return n}).catch(function(){++t;u.alert("Geojson "+i+" niet gevonden");t==Object.keys(n).length&&u.finishLoading()}).then(function(r){++t;u.geoData[i]=r;t==Object.keys(n).length&&u.processJsonConfigCharts(u.config.data)}).catch(function(n){u.alert(n)})}else++t,t==Object.keys(n).length&&r.processJsonConfigCharts(r.config.data);else return"continue"},r=this;for(u in n)f(u)}i&&this.processJsonConfigCharts(this.config.data)},n.prototype.processJsonConfigCharts=function(){var n=this,t=this.config.data,i;n.preProcessJsonData(t);i=crossfilter(t);n.chartFactory=new ChartFactory(n.config.mapConfigs,i,n.translator,n.codeRootLocation);n.addConfigCharts();n.config.layout.resize&&n.initializeResize();n.finishLoading()},n.prototype.startLoading=function(){this.bodyNode.addClass("loading")},n.prototype.finishLoading=function(){this.bodyNode.removeClass("loading");this.onFinishLoading()},n.prototype.preProcessJsonData=function(n){var t=this;n.forEach(function(n){for(var i in n)n.hasOwnProperty(i)&&(n[i]==null?n[i]=t.isNumericalDimension(i)||t.isMeasure(i)?0:t.isGeoLocation(i)?"52.5, 4":"geen":(t.isNumericalDimension(i)||t.isMeasure(i))&&typeof n[i]=="string"?n[i]=n[i].indexOf(",")!==-1?+n[i].replace(",","."):+n[i]:n[i]==undefined&&console.log("undefined"),n[i]=t.translator.translate(n[i]))})},n.prototype.isNumericalDimension=function(n){var t=!1;return this.config.dimensions.numerical&&(t=this.config.dimensions.numerical.indexOf(n)>=0),t},n.prototype.isMultiDimension=function(n){var t=!1;return this.config.dimensions.multiValue&&(t=this.config.dimensions.multiValue.indexOf(n)>=0),t},n.prototype.isDateTimeDimension=function(n){return this.config.dimensions.dateTime==undefined?!1:this.config.dimensions.dateTime[n]!=undefined},n.prototype.isMeasure=function(n){var t=!1;return this.config.measures.sum&&(t=this.config.measures.sum.indexOf(n)>=0),t},n.prototype.isGeoLocation=function(n){var t=!1;return this.config.mapConfigs&&(t=this.config.mapConfigs.hasOwnProperty(n)),t},n.prototype.initializeLayout=function(n){dc.config.defaultColors(n.layout.colors);n.layout.numberOfColumns==undefined&&(n.layout.numberOfColumns=12);this.chartMargins=this.getChartMargins(n)},n.prototype.getChartMargins=function(n){var i,r,u,f,t;return n.layout.chartMargins!=undefined?(t=n.layout.chartMargins,i=t.top!=undefined?t.top:10,u=t.right!=undefined?t.right:10,r=t.bottom!=undefined?t.bottom:75,f=t.left!=undefined?t.left:75):(i=10,u=10,r=75,f=75),new Margins(i,u,r,f)},n.prototype.initializeResize=function(){var n=this;window.onresize=function(){for(var i,t=0;t<n.chartList.length;t++)i=n.chartList[t],i.onResize()}},n.prototype.removeChart=function(n){var r=n.id,t,i;n.remove();t=document.querySelector("#"+r);n instanceof Table||(t=t.parentElement);t.parentElement.removeChild(t);i=this.chartList.indexOf(n);this.chartList.splice(i,1)},n.prototype.removeAllCharts=function(){for(var t=this.chartList.length,n=0;n<t;n++)this.removeChart(this.chartList[0])},n.prototype.addChart=function(n){this.chartList.push(n);n.dcChart.render()},n.prototype.addConfigCharts=function(){var n,t,i,r;if(this.config.charts!=undefined)for(n=0;n<this.config.charts.length;n++)try{t=this.config.charts[n];t=this.processChartConfig(t);i=this.cascadeChartConfig(JSON.parse(JSON.stringify(t)));r=this.chartFactory.createChart(this.config.charts[n].chartType,i,this.chartMargins,this.geoData,this,t).initialize();this.addChart(r)}catch(u){console.log("?: ");console.log(u)}},n.prototype.processChartConfig=function(n){var t=n.measure;return typeof t=="string"&&(n.measure=t==="count"?{count:t}:{sum:t}),n},n.ChartConfigFromStrings=function(n,t,i,r,u,f,e,o){var h={chartType:"undefined",selector:u},c,s;return h.chartType=n,h.columns=r,c=i[1],h.dimension=c==null?i[0]:[i[0],c],s=t[0],h.measure=s=="count"?{count:s,average:f,percentage:e}:o.measures.sum.indexOf(s)>=0?{sum:s,average:f,percentage:e}:{count:s,average:f,percentage:e},h},n.prototype.alert=function(n,t){t===void 0&&(t="Something went wrong while loading the Smart Graph.<br>Please contact Quant Base: <a href='mailto:support@quantbase.eu'>support@quantbase.eu<\/a>");var i=jQuery("#alert-message");this.translator!=undefined&&(t=this.translator.translate(t));i.length==0?alert(t):(i.html(t),jQuery("#alert").addClass("show"));console.log(n)},n.copyPropertiesToObject=function(t,i){for(var r in t)i.hasOwnProperty(r)?typeof t[r]!="object"||t[r]instanceof Array||t[r]===null||n.copyPropertiesToObject(t[r],i[r]):t[r]!=undefined&&(i[r]=JSON.parse(JSON.stringify(t[r])))},n.prototype.cascadeConfig=function(t){var r,i;if(t.chartOptions!=undefined)for(r in t.chartOptions)t.chartOptions.hasOwnProperty(r)&&(i=t.chartOptions[r],i.hasOwnProperty("layout")||(i.layout={}),n.copyPropertiesToObject(t.layout,i.layout))},n.prototype.cascadeChartConfig=function(t){var r=t.chartType,i;return this.config.chartOptions!=undefined&&(this.config.chartOptions.hasOwnProperty(r)?(i=this.config.chartOptions[r],t.hasOwnProperty("layout")||(t.layout={}),n.copyPropertiesToObject(i.layout,t.layout),t.hasOwnProperty("options")||(t.options={}),n.copyPropertiesToObject(i.options,t.options)):(t.hasOwnProperty("layout")||(t.layout={}),n.copyPropertiesToObject(this.config.layout,t.layout))),t},n.prototype.addParameterToUrl=function(n,t,i){var r;return r=n.indexOf("?")!==-1?n+"&":n+"?",r+t+"="+i},n.prototype.isPhoneSize=function(){return window.matchMedia("(max-width: 767px)").matches},n.prototype.isTabletSize=function(){return window.matchMedia("(max-width: 991px)").matches},n.prototype.initializeSave=function(){var n=this,t=SvgIcon.getSvgString("saveIcon");this.generalControls.addButton({text:this.translator.translate("saveTitle"),"class":"save-smart-graph",icon:t,onClick:function(){n.onSaveClick()}})},n.prototype.saveConfig=function(){for(var n,i,f,e=JSON.parse(JSON.stringify(this.config)),t=[],r=[],u=0;u<this.chartList.length;u++)n=this.chartList[u],n instanceof Table?(i=r.length,r[i]=n.exportConfig):(i=n.getIndex(),t[i]=n.exportConfig,t[i].layout={width:n.getWidth(),height:n.getHeight()},n instanceof Map&&(f=n.dcChart.map().getCenter(),t[i].options={center:[f.lat,f.lng],zoom:n.dcChart.map().getZoom()}));return t=t.concat(r),e.charts=t,e},n.prototype.numberOfCharts=function(){return this.chartList.length},n.prototype.numberOfSliders=function(){return this.sliderList.length},n.prototype.chartLimitIsReached=function(){return this.numberOfCharts()+this.numberOfSliders()>=this.LIMIT_DIMENSIONS},n.prototype.onFinishLoading=function(){},n.prototype.onSaveClick=function(){},n.version="3.0",n}();